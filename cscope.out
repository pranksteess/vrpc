cscope 15 $HOME/Documents/code_dev/VipRpc -q 0000001870 0000230680
	@protobuf_cpp_service/output_example/example_test.cc

7 
	~"v½c_exam¶e_exam¶e_£rviû_­i.h
"

10 
	$maš
Ğ
¬gc
, ** 
¬gv
 )

12 
v½c
::
exam¶e
::
exam¶e_£rviûApi
 
cApi
;

13 
	}
}

	@protobuf_cpp_service/output_example/spp_vrpc_example_main.cc

1 
	~"¥pšş.h
"

2 
	~<sys/sock‘.h
>

3 
	~<Ãtš‘/š.h
>

4 
	~<¬·/š‘.h
>

5 
	~<¡ršg
>

6 
	~"v½c/ba£/mem_toŞs.h
"

7 
	~"v½c/´ÙocŞ/´ÙocŞ.h
"

8 
	~"v½c/´ÙocŞ/v½c_h—d.pb.h
"

9 
	~"v½c_exam¶e_def.h
"

10 
	~"v½c_exam¶e_InfoS”viû.h
"

11 
	~"şib_tim”.h
"

12 
	~"v½c/ba£/CRunRecod”.h
"

13 
	~"v½c/ba£/CTnm2R•Ü‹r.h
"

15 
usšg
 
Çme¥aû
 
	g¡d
;

17 cÚ¡ 
	gMONITOR_INTERVAL
 = 3;

19 
	gv½c
::
exam¶e
::
InfoS”viû
 
g_cS”viû
;

20 
	gv½c
::
ba£
::
CRunRecod”
 
g_cRecod”
;

22 *
fÜm©_time
Ğ
time_t
 
tm
);

24 
£nd_»¥Ú£
ĞcÚ¡ 
v½c
::
´ÙocŞ
::
h—d
& 
cH—d
,

25 
googË
::
´Ùobuf
::
Mes§ge
* 
pcRe¥
,

26 
CTCommu
* 
comm
, 
æow
, 
CS”v”Ba£
* 
ba£
 );

28 
	$MÚ™ÜWÜk”
()

30 
v½c
::
ba£
::
CTnm2R•Ü‹r
 
cR•Ü‹r
;

31 
Tnm2A‰r
 
sA‰r
 = 
g_cS”viû
.
	`G‘Tnm2A‰r
();

32 
cR•Ü‹r
.
	`S‘Tnm2A‰r
Ğ
sA‰r
 );

33 
iR‘
 = 
cR•Ü‹r
.
	`In™
();

34 ifĞ
iR‘
 != 0 )

36 
	`årštf
Ğ
¡d”r
, "cReporter.Init failed.ret:%dƒrr:%s\n",

37 
iR‘
, 
cR•Ü‹r
.
	`G‘E¼ÜMes§ge
() );

38 
	`ex™
(1);

41 
	`årštf
Ğ
¡d”r
, "MÚ™ÜWÜk” in™ ok. key[%u]\n", 
cR•Ü‹r
.
	`G‘Key
() );

42 
	`årštf
Ğ
¡d”r
, "Tnm2Attr: Req[%d] Err[%d] UsedTime[%d] AvgUsedTime[%d] ErrRatio[%d]\n",

43 
sA‰r
.
iReqCouÁA‰r
, sA‰r.
iE¼CouÁA‰r
, sA‰r.
iU£dTimeA‰r
, sA‰r.
iAvgU£dTimeA‰r
,

44 
sA‰r
.
iE¼R©ioA‰r
 );

45 
	`årštf
Ğ
¡d”r
, "MÚ™ÜWok” IÁ”v®:%d\n", 
MONITOR_INTERVAL
 );

47 
cR•Ü‹r
.
	`Run
Ğ
MONITOR_INTERVAL
 );

49 
	`ex™
(0);

50 
	}
}

52 
	$C»©eMÚ™ÜWÜk”
()

54 
pid_t
 
pid
 = 
	`fÜk
();

55 ifĞ0 =ğ
pid
 )

58 
	`MÚ™ÜWÜk”
();

65 
	}
}

67 "C" 
	$¥p_hªdË_š™
(* 
¬g1
, * 
¬g2
)

70 cÚ¡ * 
‘c
 = (cÚ¡ *)
¬g1
;

72 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

74 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_DEBUG
, "¥p_hªdË_š™, cÚfig:%s, s”v”ty³:%d\n", 
‘c
, ba£->
	`£rv”ty³
());

76 
pwd
[1024] = {0};

77 
pid_ty³
 = 
ba£
->
	`£rv”ty³
();

78 
iR‘
 = 0;

80 
iR‘
 = 
g_cS”viû
.
	`In™W™hCÚf
(
‘c
);

81 ifĞ
iR‘
 != 0 )

83 
ba£
->
log_
.
	`LOG_P_PID
Ğ
LOG_ERROR
, "spp_handle_init InitWithConfƒrror.ret:%dƒrr:%s\n",

84 
iR‘
, 
g_cS”viû
.
	`G‘E¼ÜMes§ge
() );

88 
iR‘
 = 
g_cRecod”
.
	`In™
();

89 ifĞ
iR‘
 != 0 )

91 
ba£
->
log_
.
	`LOG_P_PID
Ğ
LOG_ERROR
, "spp_handle_init g_cRecoder.Initƒrror.ret:%dƒrr:%s\n",

92 
iR‘
, 
g_cRecod”
.
	`G‘E¼ÜMes§ge
() );

95 
Tnm2A‰r
 
sA‰r
 = 
g_cS”viû
.
	`G‘Tnm2A‰r
();

96 
	`årštf
Ğ
¡d”r
, "Recod” in™ ok.key[%u]\n", 
g_cRecod”
.
	`G‘Key
() );

97 
	`årštf
Ğ
¡d”r
, "Tnm2Attr: Req[%d] Err[%d] UsedTime[%d] AvgUsedTime[%d] ErrRatio[%d]\n",

98 
sA‰r
.
iReqCouÁA‰r
, sA‰r.
iE¼CouÁA‰r
, sA‰r.
iU£dTimeA‰r
, sA‰r.
iAvgU£dTimeA‰r
,

99 
sA‰r
.
iE¼R©ioA‰r
 );

102 
pid_ty³
)

104 
SERVER_TYPE_PROXY
:

106 
	`C»©eMÚ™ÜWÜk”
();

108 
SERVER_TYPE_CTRL
:

110 
SERVER_TYPE_WORKER
:

119 
	}
}

121 "C" 
	$¥p_hªdË_šput
(
æow
, * 
¬g1
, * 
¬g2
)

124 
blob_ty³
* 
blob
 = (blob_ty³*)
¬g1
;

126 
TCÚnExtInfo
* 
extšfo
 = (TCÚnExtInfo*)
blob
->
extd©a
;

128 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

136 ifĞ
blob
->
Ën
 < 
v½c
::
´ÙocŞ
::
PKG_LENGTH_LEN
 )

141 
ušt32_t
 
Ën
 = *(ušt32_t*)(
blob
->
d©a
);

143  
	`Áohl
(
Ën
);

144 
	}
}

151 "C" 
	$¥p_hªdË_rou‹
(
æow
, * 
¬g1
, * 
¬g2
)

154 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

155 
ba£
->
log_
.
	`LOG_P_FILE
(
LOG_DEBUG
, "¥p_hªdË_rou‹, flow:%d\n", 
æow
);

157 
	}
}

159 
	#RETURN_VALUE
(
»t
, 
»pÜt_»suÉ
)\

161 
ušt32_t
 
uiU£dTime
 = 
tim”
.
	`’d_g‘_ms
(
szProûssTim”Pošt
); \

162 
g_cRecod”
.
	`Recode
Ğ
»pÜt_»suÉ
, 
uiU£dTime
 );\

163  
»t
;\

164 }0);

	)

171 "C" 
	$¥p_hªdË_´oûss
(
æow
, * 
¬g1
, * 
¬g2
)

174 
blob_ty³
* 
blob
 = (blob_ty³*)
¬g1
;

176 
CTCommu
* 
commu
 = (CTCommu*)
blob
->
owÃr
;

178 
TCÚnExtInfo
* 
extšfo
 = (TCÚnExtInfo*)
blob
->
extd©a
;

180 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

182 
iR‘
 = 0;

183 
iS”viûR‘
 = 0;

184 
şib_tim”
 
tim”
;

185 
szProûssTim”Pošt
[] = "process";

187 
tim”
.
	`¡¬t
Ğ
szProûssTim”Pošt
 );

195 ifĞ
blob
->
Ën
 < 2*
v½c
::
´ÙocŞ
::
PKG_LENGTH_LEN
 )

197 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_ERROR
, "¥p_hªdË_´oûs blob->ËÀi toØsm®l: %u\n", 
blob
->
Ën
 );

198 
	`RETURN_VALUE
(-1, 
çl£
);

201 cÚ¡ * 
p_body
 = 
NULL
;

202 
ušt32_t
 
body_Ën
 = 0;

203 
v½c
::
´ÙocŞ
::
h—d
 
cH—d
;

204 
iR‘
 = 
v½c
::
´ÙocŞ
::
	`uÅack_h—d
Ğ
blob
->
d©a
, blob->
Ën
, 
cH—d
, 
p_body
, 
body_Ën
 );

205 ifĞ(
iR‘
!=0è|| (
p_body
==
NULL
è|| (
body_Ën
==0) )

207 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_ERROR
, "¥p_hªdË_´oûs uÅack_h—dƒ¼Ü.»t:%d\n", 
iR‘
 );

208 
	`RETURN_VALUE
(-1, 
çl£
);

211 
g_cS”viû
.
	`Re£t
();

213 
v½c
::
exam¶e
::
Qu”yReq
 
cReq1
;

214 
v½c
::
exam¶e
::
Qu”yRe¥
 
cRe¥1
;

215 
v½c
::
exam¶e
::
Upd©eReq
 
cReq2
;

216 
v½c
::
exam¶e
::
Upd©eRe¥
 
cRe¥2
;

217 
googË
::
´Ùobuf
::
Mes§ge
* 
pcRe¥
 = 
NULL
;

218  
cH—d
.
	`cmd
() )

220 
v½c
::
exam¶e
::
QUERYINFO_CMD
:

221 
iS”viûR‘
 = 
g_cS”viû
.
	`Qu”yInfo
Ğ
cReq1
, 
cRe¥1
 );

222 
pcRe¥
 = &
cRe¥1
;

224 
v½c
::
exam¶e
::
UPDATEINFO_CMD
:

225 
iS”viûR‘
 = 
g_cS”viû
.
	`Upd©eInfo
Ğ
cReq2
, 
cRe¥2
 );

226 
pcRe¥
 = &
cRe¥2
;

229 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_ERROR
, "¥p_hªdË_´oûs unknow cmd:%u\n", 
cH—d
.
	`cmd
() );

230 
	`RETURN_VALUE
(-1, 
çl£
);

233 ifĞ
iS”viûR‘
 != 0 )

236 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_ERROR
, "spp_handle_process service„eturnƒrror.ret:%dƒrr:%s\n",

237 
iS”viûR‘
, 
g_cS”viû
.
	`G‘E¼ÜMes§ge
() );

240 
iR‘
 = 
	`£nd_»¥Ú£
Ğ
cH—d
, 
pcRe¥
, 
commu
, 
æow
, 
ba£
 );

241 ifĞ
iR‘
 != 0 )

243 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_ERROR
, "£nd„e¥Ú£ƒ¼Ü,„‘:%d\n", 
iR‘
);

244 
	`RETURN_VALUE
(-1, 
çl£
);

247 ifĞ
iS”viûR‘
 == 0 )

249 
	`RETURN_VALUE
(0, 
Œue
);

253 
	`RETURN_VALUE
(0, 
çl£
);

255 
	}
}

257 #undeà
RETURN_VALUE


262 "C" 
	$¥p_hªdË_fši
(* 
¬g1
, * 
¬g2
)

265 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

267 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_DEBUG
, "spp_handle_fini\n");

268 
	}
}

270 *
	$fÜm©_time
Ğ
time_t
 
tm
)

272 
¡r_tm
[1024];

273 
tm
 
tmm
;

274 
	`mem£t
(&
tmm
, 0, (tmm) );

275 
	`loÿÉime_r
((
time_t
 *)&
tm
, &
tmm
);

277 
	`¢´štf
(
¡r_tm
, (str_tm), "[%04d-%02d-%02d %02d:%02d:%02d]",

278 
tmm
.
tm_y—r
 + 1900,mm.
tm_mÚ
 + 1,mm.
tm_mday
,

279 
tmm
.
tm_hour
,mm.
tm_mš
,mm.
tm_£c
);

281  
¡r_tm
;

282 
	}
}

284 
	$£nd_»¥Ú£
ĞcÚ¡ 
v½c
::
´ÙocŞ
::
h—d
& 
cH—d
,

285 
googË
::
´Ùobuf
::
Mes§ge
* 
pcRe¥
,

286 
CTCommu
* 
comm
, 
æow
, 
CS”v”Ba£
* 
ba£
 )

288 
blob_ty³
 
»¥Ú£
;

290 
	`·ck_mes§ge
Ğ
cH—d
, *
pcRe¥
, 
»¥Ú£
.
d©a
,„e¥Ú£.
Ën
 );

293 
»t
 = 
comm
->
	`£ndto
(
æow
, &
»¥Ú£
, (*)
ba£
 );

294 
	`ä“
Ğ
»¥Ú£
.
d©a
 );

295 ià(
»t
 != 0)

297  
»t
;

301 
	}
}

	@protobuf_cpp_service/output_example/spp_vrpc_example_main_ex.cc

1 
	~"¥pšş.h
"

2 
	~<sys/sock‘.h
>

3 
	~<Ãtš‘/š.h
>

4 
	~<¬·/š‘.h
>

5 
	~<¡ršg
>

6 
	~"v½c/ba£/mem_toŞs.h
"

7 
	~"v½c/´ÙocŞ/´ÙocŞ.h
"

8 
	~"v½c/´ÙocŞ/v½c_h—d.pb.h
"

9 
	~"v½c_exam¶e_def.h
"

10 
	~"v½c_exam¶e_InfoS”viû.h
"

11 
	~"şib_tim”.h
"

12 
	~"v½c/ba£/CRunRecod”.h
"

13 
	~"v½c/ba£/CTnm2R•Ü‹r.h
"

15 
usšg
 
Çme¥aû
 
	g¡d
;

17 cÚ¡ 
	gMONITOR_INTERVAL
 = 10;

19 
	gv½c
::
exam¶e
::
InfoS”viû
 
g_cS”viû
;

20 
	gv½c
::
ba£
::
CRunRecod”
 
g_cRecod”
;

22 *
fÜm©_time
Ğ
time_t
 
tm
);

24 
£nd_»¥Ú£
ĞcÚ¡ 
v½c
::
´ÙocŞ
::
h—d
& 
cH—d
,

25 
googË
::
´Ùobuf
::
Mes§ge
* 
pcRe¥
,

26 
CTCommu
* 
comm
, 
æow
, 
CS”v”Ba£
* 
ba£
 );

28 
	$MÚ™ÜWÜk”
()

30 
v½c
::
ba£
::
CTnm2R•Ü‹r
 
cR•Ü‹r
;

31 
Tnm2A‰r
 
sA‰r
 = 
g_cS”viû
.
	`G‘Tnm2A‰r
();

32 
cR•Ü‹r
.
	`S‘Tnm2A‰r
Ğ
sA‰r
 );

33 
iR‘
 = 
cR•Ü‹r
.
	`In™
();

34 ifĞ
iR‘
 != 0 )

36 
	`årštf
Ğ
¡d”r
, "cReporter.Init failed.ret:%dƒrr:%s\n",

37 
iR‘
, 
cR•Ü‹r
.
	`G‘E¼ÜMes§ge
() );

38 
	`ex™
(1);

41 
	`årštf
Ğ
¡d”r
, "MonitorWorker init ok\n" );

42 
	`årštf
Ğ
¡d”r
, "Tnm2Attr: Req[%d] Err[%d] AvgTime[%d] ErrRatio[%d]\n",

43 
sA‰r
.
iReqCouÁA‰r
, sA‰r.
iE¼CouÁA‰r
, sA‰r.
iU£dTimeA‰r
,

44 
sA‰r
.
iE¼R©ioA‰r
 );

45 
	`årštf
Ğ
¡d”r
, "MÚ™ÜWok” IÁ”v®:%d\n", 
MONITOR_INTERVAL
 );

47 
cR•Ü‹r
.
	`Run
Ğ
MONITOR_INTERVAL
 );

49 
	`ex™
(0);

50 
	}
}

52 
	$C»©eMÚ™ÜWÜk”
()

54 
pid_t
 
pid
 = 
	`fÜk
();

55 ifĞ0 =ğ
pid
 )

58 
	`MÚ™ÜWÜk”
();

65 
	}
}

67 "C" 
	$¥p_hªdË_š™
(* 
¬g1
, * 
¬g2
)

70 cÚ¡ * 
‘c
 = (cÚ¡ *)
¬g1
;

72 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

74 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_DEBUG
, "¥p_hªdË_š™, cÚfig:%s, s”v”ty³:%d\n", 
‘c
, ba£->
	`£rv”ty³
());

76 
pwd
[1024] = {0};

77 
pid_ty³
 = 
ba£
->
	`£rv”ty³
();

78 
iR‘
 = 0;

80 
iR‘
 = 
g_cS”viû
.
	`In™W™hCÚf
(
‘c
);

81 ifĞ
iR‘
 != 0 )

83 
ba£
->
log_
.
	`LOG_P_PID
Ğ
LOG_ERROR
, "spp_handle_init InitWithConfƒrror.ret:%dƒrr:%s\n",

84 
iR‘
, 
g_cS”viû
.
	`G‘E¼ÜMes§ge
() );

88 
iR‘
 = 
g_cRecod”
.
	`In™
();

89 ifĞ
iR‘
 != 0 )

91 
ba£
->
log_
.
	`LOG_P_PID
Ğ
LOG_ERROR
, "spp_handle_init g_cRecoder.Initƒrror.ret:%dƒrr:%s\n",

92 
iR‘
, 
g_cRecod”
.
	`G‘E¼ÜMes§ge
() );

97 
pid_ty³
)

99 
SERVER_TYPE_PROXY
:

101 
	`C»©eMÚ™ÜWÜk”
();

103 
SERVER_TYPE_CTRL
:

105 
SERVER_TYPE_WORKER
:

114 
	}
}

116 "C" 
	$¥p_hªdË_šput
(
æow
, * 
¬g1
, * 
¬g2
)

119 
blob_ty³
* 
blob
 = (blob_ty³*)
¬g1
;

121 
TCÚnExtInfo
* 
extšfo
 = (TCÚnExtInfo*)
blob
->
extd©a
;

123 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

131 ifĞ
blob
->
Ën
 < 
v½c
::
´ÙocŞ
::
PKG_LENGTH_LEN
 )

136 
ušt32_t
 
Ën
 = *(ušt32_t*)(
blob
->
d©a
);

138  
	`Áohl
(
Ën
);

139 
	}
}

146 "C" 
	$¥p_hªdË_rou‹
(
æow
, * 
¬g1
, * 
¬g2
)

149 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

150 
ba£
->
log_
.
	`LOG_P_FILE
(
LOG_DEBUG
, "¥p_hªdË_rou‹, flow:%d\n", 
æow
);

152 
	}
}

158 "C" 
	$¥p_hªdË_´oûss
(
æow
, * 
¬g1
, * 
¬g2
)

161 
blob_ty³
* 
blob
 = (blob_ty³*)
¬g1
;

163 
CTCommu
* 
commu
 = (CTCommu*)
blob
->
owÃr
;

165 
TCÚnExtInfo
* 
extšfo
 = (TCÚnExtInfo*)
blob
->
extd©a
;

167 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

169 
ušt32_t
 
uiU£dTime
 = 0;

170 
şib_tim”
 
tim”
;

171 
´oûss_Çme
[] = "process";

172 
tim”
.
	`¡¬t
(
´oûss_Çme
);

180 ifĞ
blob
->
Ën
 < 2*
v½c
::
´ÙocŞ
::
PKG_LENGTH_LEN
 )

182 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_ERROR
, "¥p_hªdË_´oûs blob->ËÀi toØsm®l: %u\n", 
blob
->
Ën
 );

186 cÚ¡ * 
p_body
 = 
NULL
;

187 
ušt32_t
 
body_Ën
 = 0;

188 
v½c
::
´ÙocŞ
::
h—d
 
cH—d
;

189 
iR‘
 = 
v½c
::
´ÙocŞ
::
	`uÅack_h—d
Ğ
blob
->
d©a
, blob->
Ën
, 
cH—d
, 
p_body
, 
body_Ën
 );

190 ifĞ(
iR‘
!=0è|| (
p_body
==
NULL
è|| (
body_Ën
==0) )

192 
uiU£dTime
 = 
tim”
.
	`’d_g‘_ms
(
´oûss_Çme
);

193 
g_cRecod”
.
	`Recode
Ğ
çl£
, 
uiU£dTime
 );

194 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_ERROR
, "¥p_hªdË_´oûs uÅack_h—dƒ¼Ü.»t:%d\n", 
iR‘
 );

198 
g_cS”viû
.
	`Re£t
();

200 
v½c
::
exam¶e
::
Qu”yReq
 
cReq1
;

201 
v½c
::
exam¶e
::
Qu”yRe¥
 
cRe¥1
;

202 
v½c
::
exam¶e
::
Upd©eReq
 
cReq2
;

203 
v½c
::
exam¶e
::
Upd©eRe¥
 
cRe¥2
;

204 
googË
::
´Ùobuf
::
Mes§ge
* 
pcRe¥
 = 
NULL
;

205  
cH—d
.
	`cmd
() )

207 
v½c
::
exam¶e
::
QUERYINFO_CMD
:

208 
iR‘
 = 
g_cS”viû
.
	`Qu”yInfo
Ğ
cReq1
, 
cRe¥1
 );

209 
pcRe¥
 = &
cRe¥1
;

211 
v½c
::
exam¶e
::
UPDATEINFO_CMD
:

212 
iR‘
 = 
g_cS”viû
.
	`Upd©eInfo
Ğ
cReq2
, 
cRe¥2
 );

213 
pcRe¥
 = &
cRe¥2
;

216 
uiU£dTime
 = 
tim”
.
	`’d_g‘_ms
(
´oûss_Çme
);

217 
g_cRecod”
.
	`Recode
Ğ
çl£
, 
uiU£dTime
 );

218 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_ERROR
, "¥p_hªdË_´oûs unknow cmd:%u\n", 
cH—d
.
	`cmd
() );

222 ifĞ
iR‘
 != 0 )

225 
uiU£dTime
 = 
tim”
.
	`’d_g‘_ms
(
´oûss_Çme
);

226 
g_cRecod”
.
	`Recode
Ğ
çl£
, 
uiU£dTime
 );

227 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_ERROR
, "spp_handle_process service„eturnƒrror.ret:%dƒrr:%s\n",

228 
iR‘
, 
g_cS”viû
.
	`G‘E¼ÜMes§ge
() );

231 
iR‘
 = 
	`£nd_»¥Ú£
Ğ
cH—d
, 
pcRe¥
, 
commu
, 
æow
, 
ba£
 );

232 ifĞ
iR‘
 != 0 )

234 
uiU£dTime
 = 
tim”
.
	`’d_g‘_ms
(
´oûss_Çme
);

235 
g_cRecod”
.
	`Recode
Ğ
çl£
, 
uiU£dTime
 );

236 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_ERROR
, "£nd„e¥Ú£ƒ¼Ü,„‘:%d\n", 
iR‘
);

240 
uiU£dTime
 = 
tim”
.
	`’d_g‘_ms
(
´oûss_Çme
);

241 
g_cRecod”
.
	`Recode
Ğ
Œue
, 
uiU£dTime
 );

244 
	}
}

249 "C" 
	$¥p_hªdË_fši
(* 
¬g1
, * 
¬g2
)

252 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

254 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_DEBUG
, "spp_handle_fini\n");

255 
	}
}

257 *
	$fÜm©_time
Ğ
time_t
 
tm
)

259 
¡r_tm
[1024];

260 
tm
 
tmm
;

261 
	`mem£t
(&
tmm
, 0, (tmm) );

262 
	`loÿÉime_r
((
time_t
 *)&
tm
, &
tmm
);

264 
	`¢´štf
(
¡r_tm
, (str_tm), "[%04d-%02d-%02d %02d:%02d:%02d]",

265 
tmm
.
tm_y—r
 + 1900,mm.
tm_mÚ
 + 1,mm.
tm_mday
,

266 
tmm
.
tm_hour
,mm.
tm_mš
,mm.
tm_£c
);

268  
¡r_tm
;

269 
	}
}

271 
	$£nd_»¥Ú£
ĞcÚ¡ 
v½c
::
´ÙocŞ
::
h—d
& 
cH—d
,

272 
googË
::
´Ùobuf
::
Mes§ge
* 
pcRe¥
,

273 
CTCommu
* 
comm
, 
æow
, 
CS”v”Ba£
* 
ba£
 )

275 
blob_ty³
 
»¥Ú£
;

277 
	`·ck_mes§ge
Ğ
cH—d
, *
pcRe¥
, 
»¥Ú£
.
d©a
,„e¥Ú£.
Ën
 );

280 
»t
 = 
comm
->
	`£ndto
(
æow
, &
»¥Ú£
, (*)
ba£
 );

281 
	`ä“
Ğ
»¥Ú£
.
d©a
 );

282 ià(
»t
 != 0)

284  
»t
;

288 
	}
}

	@protobuf_cpp_service/output_example/vrpc_example_def.h

1 #iâdeà
VRPC_EXAMPLE_DEF_H


2 
	#VRPC_EXAMPLE_DEF_H


	)

4 
Çme¥aû
 
	gv½c


6 
Çme¥aû
 
	gexam¶e


12 
	gCALL_1_CMD
,

13 
	gCALL_2_CMD


	@protobuf_cpp_service/output_example/vrpc_example_example_service.cc

1 
	~"v½c_exam¶e_exam¶e_£rviû.h
"

3 
Çme¥aû
 
	gv½c


5 
Çme¥aû
 
	gexam¶e


8 
	gexam¶e_£rviû
::
exam¶e_£rviû
()

13 
exam¶e_£rviû
::~example_service()

18 
exam¶e_£rviû
::
Re£t
()

20 
CS”viû
::
Re£t
();

23 
št32_t
 
	gexam¶e_£rviû
::
In™W™hCÚf
ĞcÚ¡ * 
pchCÚfFe
 )

28 
št32_t
 
	gexam¶e_£rviû
::
ÿÎ_1
ĞcÚ¡ 
v½c
::
exam¶e
::
»q
&„eq,

29 
v½c
::
exam¶e
::
»¥_1
& 
»¥
 )

34 
št32_t
 
	gexam¶e_£rviû
::
ÿÎ_2
ĞcÚ¡ 
v½c
::
exam¶e
::
»q
&„eq,

35 
v½c
::
exam¶e
::
»¥_2
& 
»¥
 )

	@protobuf_cpp_service/output_example/vrpc_example_example_service.h

1 #iâdeà
VRPC_EXAMPLE_EXAMPLE_SERVICE_H


2 
	#VRPC_EXAMPLE_EXAMPLE_SERVICE_H


	)

4 
	~<¡dšt.h
>

5 
	~"v½c/ba£/CS”viû.h
"

6 
	~"ouut_£rviû_exam¶e.pb.h
"

8 
şass
 
	gv½c
::
exam¶e
::
»q
;

9 
şass
 
	gv½c
::
exam¶e
::
»¥_1
;

10 
şass
 
	gv½c
::
exam¶e
::
»¥_2
;

12 
Çme¥aû
 
	gv½c


14 
Çme¥aû
 
	gexam¶e


17 şas 
	cexam¶e_£rviû
 : 
public
 
v½c
::
ba£
::
CS”viû


19 
public
:

20 
exam¶e_£rviû
();

21 
	gvœtu®


22 ~
exam¶e_£rviû
();

24 
In™W™hCÚf
ĞcÚ¡ * 
pchCÚfFe
 );

26 
Re£t
();

28 
št32_t
 
ÿÎ_1
ĞcÚ¡ 
v½c
::
exam¶e
::
»q
&„eq,

29 
v½c
::
exam¶e
::
»¥_1
& 
»¥
 );

31 
št32_t
 
ÿÎ_2
ĞcÚ¡ 
v½c
::
exam¶e
::
»q
&„eq,

32 
v½c
::
exam¶e
::
»¥_2
& 
»¥
 );

	@protobuf_cpp_service/output_example/vrpc_example_example_service_api.cc

1 
	~<¡dio.h
>

2 
	~<”ºo.h
>

3 
	~"v½c_exam¶e_exam¶e_£rviû_­i.h
"

4 
	~"v½c/´ÙocŞ/´ÙocŞ.h
"

5 
	~"v½c_exam¶e_def.h
"

7 
Çme¥aû
 
	gv½c


9 
Çme¥aû
 
	gexam¶e


12 
	gexam¶e_£rviûApi
::
exam¶e_£rviûApi
()

17 
exam¶e_£rviûApi
::~example_serviceApi()

22 
št32_t
 
exam¶e_£rviûApi
::
ÿÎ_1
ĞcÚ¡ 
v½c
::
exam¶e
::
»q
& 
cReq
, v½c::exam¶e::
»¥_1
& 
cRe¥
 )

24 
iR‘
 = 
C®lS”v”
Ğ
v½c
::
exam¶e
::
CALL_1_CMD
,

25 
cReq
, 
cRe¥
 );

26 ifĞ
	giR‘
 != 0 )

28  
iR‘
;

34 
št32_t
 
	gexam¶e_£rviûApi
::
ÿÎ_2
ĞcÚ¡ 
v½c
::
exam¶e
::
»q
& 
cReq
, v½c::exam¶e::
»¥_2
& 
cRe¥
 )

36 
iR‘
 = 
C®lS”v”
Ğ
v½c
::
exam¶e
::
CALL_2_CMD
,

37 
cReq
, 
cRe¥
 );

38 ifĞ
	giR‘
 != 0 )

40  
iR‘
;

	@protobuf_cpp_service/output_example/vrpc_example_example_service_api.h

1 #iâdeà
VRPC_EXAMPLE_EXAMPLE_SERVICE_API_H


2 
	#VRPC_EXAMPLE_EXAMPLE_SERVICE_API_H


	)

4 
	~"v½c/ba£/CApiBa£.h
"

5 
	~"şib_sock_l5.h
"

6 
	~"ouut_£rviû_exam¶e.pb.h
"

8 
Çme¥aû
 
	gv½c


10 
Çme¥aû
 
	gexam¶e


13 şas 
	cexam¶e_£rviûApi
 : 
public
 
v½c
::
ba£
::
CApiBa£


15 
public
:

16 
exam¶e_£rviûApi
();

17 
	gvœtu®


18 ~
exam¶e_£rviûApi
();

20 
št32_t
 
ÿÎ_1
ĞcÚ¡ 
v½c
::
exam¶e
::
»q
&„eq,

21 
v½c
::
exam¶e
::
»¥_1
& 
»¥
 );

23 
št32_t
 
ÿÎ_2
ĞcÚ¡ 
v½c
::
exam¶e
::
»q
&„eq,

24 
v½c
::
exam¶e
::
»¥_2
& 
»¥
 );

	@protobuf_cpp_service/pkg_resource/cpp/include/clib/clib_sock_l5.h

19 #iâdeà
_CLIB_SOCK_L5_H_


20 
	#_CLIB_SOCK_L5_H_


	)

22 
	~<¡dio.h
>

23 
	~<¡dlib.h
>

24 
	~<¡ršg.h
>

25 
	~<uni¡d.h
>

26 
	~<±h»ad.h
>

27 
	~<sys/time.h
>

28 
	~<sys/sock‘.h
>

29 
	~<Ãtš‘/š.h
>

30 
	~<¬·/š‘.h
>

31 
	~<¡d¬g.h
>

32 
	~<¡ršg
>

33 
	~<m­
>

34 
	~<fú.h
>

35 
	~"qos_ş›Á.h
"

38 cÚ¡ 
	gCLIB_SHORT_SOCK
 = 0;

39 cÚ¡ 
	gCLIB_LONG_SOCK
 = 1;

40 cÚ¡ 
	gCLIB_DEFAULT_TIME_OUT
 = 1000;

41 cÚ¡ 
	gCLIB_L5_ERR_CREAT_SOCKET
 = -10000 ;

42 cÚ¡ 
	gCLIB_L5_ERR_CONNECT
 = -10001;

43 cÚ¡ 
	gCLIB_L5_ERR_NOFOUND_SERVER
 = -10002;

44 cÚ¡ 
	gCLIB_L5_ERR_TIMEOUT
 = -10003;

45 cÚ¡ 
	gCLIB_L5_ERR_SELECT
 = -10004;

46 cÚ¡ 
	gCLIB_L5_ERR_FD_NOT_EXIST
 = -10005;

47 cÚ¡ 
	gCLIB_L5_ERR_GRE_L5_ROUT
 = -10006;

48 cÚ¡ 
	gCLIB_L5_ERR_SOCKET
 = -10007;

49 cÚ¡ 
	gCLIB_L5_ERR_PARAM
 = -10008;

51 cÚ¡ 
	gCLIB_L5_SHORT
 = 32;

52 cÚ¡ 
	gCLIB_L5_Mid
 = 128;

53 cÚ¡ 
	gCLIB_L5_NORMAL
 = 256;

54 cÚ¡ 
	gCLIB_L5_LONG
 = 512;

55 cÚ¡ 
	gCLIB_L5_HUG
 = 1024;

58 
	#CLIB_SOCK_L5_TCP
 
SOCK_STREAM


	)

59 
	#CLIB_SOCK_L5_UDP
 
SOCK_DGRAM


	)

63 
	sClibL5


65 
	m¡d
::
¡ršg
 
m_sHo¡
;

66 
	mm_iPÜt
;

67 }
	tClibL5
;

69 
šlše
 
boŞ
 
	gİ”©Ü
<(cÚ¡ 
	gClibL5
 &
	g¡S”v”L51
,cÚ¡ ClibL5 &
	g¡S”v”L52
)

71 ià(
	g¡S”v”L51
.
	gm_sHo¡
 < 
	g¡S”v”L52
.m_sHost)

73  
	gŒue
;

75 ià(
	g¡S”v”L51
.
	gm_sHo¡
 > 
	g¡S”v”L52
.m_sHost)

77  
	gçl£
;

79 if(
	g¡S”v”L51
.
	gm_iPÜt
 < 
	g¡S”v”L52
.m_iPort)

81  
	gŒue
;

83 if(
	g¡S”v”L51
.
	gm_iPÜt
 > 
	g¡S”v”L52
.m_iPort)

85  
	gçl£
;

87  
	gçl£
;

139 şas 
	cşib_sock_l5


141 
	m´iv©e
:

143 
QOSREQUEST
 
m¡_qo¤eq
;

145 
	mmi_sockæag
;

147 
	mmi_´Ù
;

149 
	mmi_sock
;

151 
	mmi_timeout
;

153 
boŞ
 
	mmb_»ved
;

155 
	mmi_logËv–
;

157 
	mms_log·th
[
CLIB_L5_NORMAL
];

159 
	mms_”r
[
CLIB_L5_HUG
];

161 
	m¡d
::
m­
<
ClibL5
, > 
	mm_mpS”v”
;

163 
ClibL5
 
	mm¡_deçuÉ_¤v
;

165 
timev®
 
	mm¡_£ndtime
;

167 
timev®
 
	mm¡_»cvtime
;

170 
	$_log_»q
(cÚ¡ * 
­_fmt
, ...)

171 
	`__©Œibu‹__
((
	`fÜm©
(
__´štf__
,2,3)));

174 
	`_cÚÃù_to
(cÚ¡ * 
as_ho¡
, cÚ¡ 
ai_pÜt
, & 
ai_sock
);

176 
	`_g‘sock
(cÚ¡ 
¡d
::
¡ršg
 
as_ho¡
, cÚ¡ 
ai_pÜt
, & 
ai_sock
);

179 
	`_pŞl_»ad
(cÚ¡ 
ai_sock
, cÚ¡ 
ai_timeout
);

181 
	`_pŞl_wr™e
(cÚ¡ 
ai_sock
, cÚ¡ 
ai_timeout
);

183 
	`_£Ëù_»ad
(cÚ¡ 
ai_sock
, cÚ¡ 
ai_timeout
);

185 
	`_£Ëù_wr™e
(cÚ¡ 
ai_sock
, cÚ¡ 
ai_timeout
);

188 
	`_sock_£nd
(cÚ¡ 
ai_sock
, cÚ¡ * 
­_buf
, cÚ¡ 
ai_Ën
);

190 
	`_sock_»cv
(cÚ¡ 
ai_sock
, * 
­_buf
, cÚ¡ 
ai_Ën
);

192 
	`_sock_»cv_Ën
(cÚ¡ 
ai_sock
, *
­_buf
, cÚ¡ 
ai_Ën
);

195 
	`_sock_şo£
();

197 
	`_sock_ÿche
(
ai_sock
);

200 
	`_tı_»cv_lše
ĞcÚ¡ 
ai_sock
, * 
as_buf
, cÚ¡ 
ai_Ën
, cÚ¡ * 
as_eof
 );

203 
	`_check_lšk_¡©us
();

205 
public
:

215 
	`şib_sock_l5
Ğ
ai_modid
 = 0, 
ai_cmdid
 = 0, 
ai_sockæag
 = 0,

216 
ai_timeout
 = 
CLIB_DEFAULT_TIME_OUT
, 
ai_´Ù
 = 
CLIB_SOCK_L5_TCP
 );

221 ~
	`şib_sock_l5
( );

226 
šlše
 cÚ¡ * 
	$g‘_”r_msg
()

228  
ms_”r
;

241 
	`š™
Ğ
ai_modid
, 
ai_cmdid
, 
ai_sockæag
, 
ai_timeout
, 
ai_´Ù
 = 
CLIB_SOCK_L5_TCP
 );

250 
	`£t_log
ĞcÚ¡ * 
as_·th
, cÚ¡ 
ai_logËv–
 );

259 
	`£t_deçuÉ_£rv”
ĞcÚ¡ *
as_ho¡
, cÚ¡ 
ai_pÜt
 );

266 
	`cÚÃù
( );

273 
	`şo£
( );

282 
	`£nd
ĞcÚ¡ * 
­_buf
, cÚ¡ 
ai_Ën
 );

291 
	`»cv
Ğ* 
­_buf
, cÚ¡ 
ai_Ën
 );

300 
	`»cv_Ën
Ğ* 
­_buf
, cÚ¡ 
ai_Ën
 );

310 
	`»cv_lše
Ğ* 
as_buf
, cÚ¡ 
ai_Ën
, cÚ¡ * 
as_eof
 = "\r\n");

320 
	`upd©e_»suÉ
ĞcÚ¡ 
ai_»t
, cÚ¡ 
ai_time
, 
¡d
::
¡ršg
& 
as_msg
 );

329 
	`upd©e_»suÉ
ĞcÚ¡ 
ai_»t
, 
¡d
::
¡ršg
& 
as_msg
 );

336 cÚ¡ 
¡d
::
¡ršg
& 
	`g‘_cu¼’t_
();

343 
	`g‘_cu¼’t_pÜt
();

346 cÚ¡ 
¡d
::
¡ršg
 
	`g‘_cu¼’t_cÚÃù
();

348 
	`check_lšk
();

349 
	`dump_¤v”m­
();

350 
	}
};

	@protobuf_cpp_service/pkg_resource/cpp/include/clib/clib_timer.h

8 #iâdeà
_CLIB_TIMER_H_


9 
	#_CLIB_TIMER_H_


	)

10 
	~<m­
>

11 
	~<¡ršg
>

12 
	~<sys/time.h
>

20 şas 
	cşib_tim”


22 
	mpublic
:

23 
şib_tim”
();

24 ~
şib_tim”
();

31 
¡¬t
ĞcÚ¡ * 
as_Çme
 );

38 
’d
ĞcÚ¡ * 
as_Çme
 );

45 
ušt32_t
 
g‘_ms
ĞcÚ¡ * 
as_Çme
 );

52 
ušt32_t
 
g‘_us
ĞcÚ¡ * 
as_Çme
 );

59 
ušt32_t
 
’d_g‘_ms
ĞcÚ¡ * 
as_Çme
 );

66 
ušt32_t
 
’d_g‘_us
ĞcÚ¡ * 
as_Çme
 );

69 
	s_gTimePoštInfo


71 
timev®
 
	mtvS¹
;

72 
timev®
 
	mtvEnd
;

73 
ušt32_t
 
	muiU£TimeMS
;

74 
ušt32_t
 
	muiU£TimeUS
;

75 
_gTimePoštInfo
():
uiU£TimeMS
(0), 
uiU£TimeUS
(0)

77 
mem£t
(&
tvS¹
, 0, (tvStart) );

78 
mem£t
(&
tvEnd
, 0, (tvEnd) );

80 }
	tTimePoštInfo
;

82 
	g¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, 
	tTimePoštInfo
> 
	tTim”ResuÉM­
;

83 
	gTim”ResuÉM­
::
	t™”©Ü
 
	tTim”ResuÉM­I‹r
;

84 
	gTim”ResuÉM­
::
	tcÚ¡_™”©Ü
 
	tTim”ResuÉM­CÚ¡I‹r
;

90 
Tim”ResuÉM­
 
g‘_®l_tim•ošt
();

92 
	g´iv©e
:

97 
	$ÿl_»suÉ
Ğ
TimePoštInfo
& 
šfo
 )

99 
šfo
.
uiU£TimeUS
 = ( info.
tvEnd
.
tv_£c
 - info.
tvS¹
.tv_£c)*1000000+šfo.tvEnd.
tv_u£c
-info.tvStart.tv_usec;

100 
šfo
.
uiU£TimeMS
 = info.
uiU£TimeUS
/1000;

101 
	}
}

104 
Tim”ResuÉM­
 
	gm_m­ResuÉ
;

124 
	#TIME_PROFILE_CALL
(
func
, 
tim”
, 
time_pošt_Çme
 ) \

	)

127 
	gtim”
.
¡¬t
(
time_pošt_Çme
);\

128 
	gfunc
;\

129 
	gtim”
.
’d
(
time_pošt_Çme
);\

148 
	#TIME_PROFILE_CALL_MS
(
func
, 
u£_time_ms
è\

	)

151 
şib_tim”
 
tim”
;\

152 cÚ¡ * 
as_tmp_Çme
 = "time_profile_call_ms";\

153 
tim”
.
	`¡¬t
(
as_tmp_Çme
);\

154 
func
;\

155 
u£_time_ms
 = 
tim”
.
	`’d_g‘_ms
(
as_tmp_Çme
);\

156 
	}

	$}whe
(0)

174 
	#TIME_PROFILE_CALL_US
(
func
, 
u£_time_us
è\

	)

177 
şib_tim”
 
tim”
;\

178 cÚ¡ * 
as_tmp_Çme
 = "time_profile_call_us";\

179 
tim”
.
	`¡¬t
(
as_tmp_Çme
);\

180 
func
;\

181 
u£_time_us
 = 
tim”
.
	`’d_g‘_us
(
as_tmp_Çme
);\

182 
	}

	$}whe
(0)

184 
šlše


185 
şib_tim”
::
	$şib_tim”
()

187 
	}
}

189 
šlše


190 
şib_tim”
::~
	$şib_tim”
()

192 
	}
}

194 
šlše
 

195 
şib_tim”
::
	$¡¬t
ĞcÚ¡ * 
as_Çme
 )

197 
TimePoštInfo
 
¡Tim”Info
;

198 
	`g‘timeofday
Ğ&(
¡Tim”Info
.
tvS¹
), 
NULL
 );

199 
m_m­ResuÉ
[
as_Çme
] = 
¡Tim”Info
;

200 
	}
}

202 
šlše
 

203 
	gşib_tim”
::
	$’d
ĞcÚ¡ * 
as_Çme
 )

205 
Tim”ResuÉM­I‹r
 
™”
 = 
m_m­ResuÉ
.
	`fšd
Ğ
as_Çme
 );

206 ifĞ
™”
 !ğ
m_m­ResuÉ
.
	`’d
() )

208 
	`g‘timeofday
Ğ&(
™”
->
£cÚd
.
tvEnd
), 
NULL
 );

209 
	`ÿl_»suÉ
Ğ
™”
->
£cÚd
 );

211 
	}
}

213 
šlše
 
ušt32_t


214 
	gşib_tim”
::
	$g‘_ms
ĞcÚ¡ * 
as_Çme
 )

216 
Tim”ResuÉM­I‹r
 
™”
 = 
m_m­ResuÉ
.
	`fšd
Ğ
as_Çme
 );

217 ifĞ
™”
 !ğ
m_m­ResuÉ
.
	`’d
() )

219  
™”
->
£cÚd
.
uiU£TimeMS
;

225 
	}
}

227 
šlše
 
ušt32_t


228 
	gşib_tim”
::
	$g‘_us
ĞcÚ¡ * 
as_Çme
 )

230 
Tim”ResuÉM­I‹r
 
™”
 = 
m_m­ResuÉ
.
	`fšd
Ğ
as_Çme
 );

231 ifĞ
™”
 !ğ
m_m­ResuÉ
.
	`’d
() )

233  
™”
->
£cÚd
.
uiU£TimeUS
;

239 
	}
}

241 
šlše
 
ušt32_t


242 
	gşib_tim”
::
	$’d_g‘_ms
ĞcÚ¡ * 
as_Çme
 )

244 
	`’d
Ğ
as_Çme
 );

245  
	`g‘_ms
Ğ
as_Çme
 );

246 
	}
}

248 
šlše
 
ušt32_t


249 
	gşib_tim”
::
	$’d_g‘_us
ĞcÚ¡ * 
as_Çme
 )

251 
	`’d
Ğ
as_Çme
 );

252  
	`g‘_us
Ğ
as_Çme
 );

253 
	}
}

255 
šlše
 
	gşib_tim”
::
Tim”ResuÉM­


256 
şib_tim”
::
	$g‘_®l_tim•ošt
()

258  
m_m­ResuÉ
;

259 
	}
}

	@protobuf_cpp_service/pkg_resource/cpp/include/l5/qos_client.h

1 #iâdeà
_QOS_AGENT_H_


2 
	#_QOS_AGENT_H_


	)

3 
	~<Ãtdb.h
>

4 
	~<sys/sock‘.h
>

5 
	~<¡dio.h
>

6 
	~<”ºo.h
>

7 
	~<sys/time.h
>

8 
	~<sys/ty³s.h
>

9 
	~<sys/sock‘.h
>

10 
	~<Ãtš‘/š.h
>

11 
	~<¬·/š‘.h
>

12 
	~<sys/¡©.h
>

13 
	~<fú.h
>

14 
	~<uni¡d.h
>

15 
	~<sys/mmª.h
>

16 
	~<¡dlib.h
>

17 
	~<¡dšt.h
>

18 
	~<¡ršg
>

19 
	~<veùÜ
>

20 
h_”ºo
;

21 
usšg
 
Çme¥aû
 
	g¡d
;

23 
	#QOS_TM_MAX
 20

	)

25 
	e_QOS_RTN


27 
	mQOS_RTN_OK
 = 0x00,

28 
	mQOS_RTN_ACCEPT
,

29 
	mQOS_RTN_LROUTE
,

30 
	mQOS_RTN_TROUTE
,

31 
	mQOS_RTN_STATIC_ROUTE
,

32 
	mQOS_RTN_INITED
,

33 
	mQOS_RTN_OVERLOAD
 = -10000,

34 
	mQOS_RTN_TIMEOUT
,

35 
	mQOS_RTN_SYSERR
,

36 
	mQOS_RTN_SENDERR
,

37 
	mQOS_RTN_RECVERR
,

38 
	mQOS_MSG_INCOMPLETE
,

39 
	mQOS_CMD_ERROR
,

40 
	mQOS_MSG_CMD_ERROR
,

41 
	mQOS_INIT_CALLERID_ERROR
,

42 
	mQOS_RTN_PARAM_ERROR


46 
	e_QOS_RUN_TYPE


48 
	mQOS_TYPE_REQ
 = 0x00,

49 
	mQOS_TYPE_LIST


52 
	gQOSREQUESTTMEXTg
;

54 
	sQOSREQUESTg


56 
	m_æow
;

57 
	m_modid
;

58 
	m_cmd
;

59 
¡ršg
 
	m_ho¡_
;

60 
	m_ho¡_pÜt
;

61 
	m_´e
;

63 
QOSREQUESTg
(cÚ¡ 
QOSREQUESTTMEXTg
 &
rou‹
);

64 
QOSREQUESTg
():
_æow
(0),
_modid
(0),
_cmd
(0),
_ho¡_pÜt
(0),
_´e
(0){}

77 
QOSREQUESTg
 
	tQOSREQUEST
;

80 
	sQOSREQUESTTMEXTg


82 
	m_æow
;

83 
	m_modid
;

84 
	m_cmd
;

85 
¡ršg
 
	m_ho¡_
;

86 
	m_ho¡_pÜt
;

87 
	m_´e
;

88 
	m_d–ay
;

90 
QOSREQUESTTMEXTg
Ğ):
_æow
(0),
_modid
(0),
_cmd
(0),
_ho¡_pÜt
(0),
_´e
(0),
_d–ay
(0){}

91 
QOSREQUESTTMEXTg
ĞcÚ¡ 
QOSREQUEST
 & 
rou‹
);

102 
QOSREQUESTTMEXTg
 
	tQOSREQUEST_TMEXT
;

104 
	sQOSREQUESTMTTCEXTg


106 
št32_t
 
	m_modid
;

107 
št32_t
 
	m_cmdid
;

108 
št64_t
 
	m_key
;

109 
št32_t
 
	m_funid
;

110 
¡ršg
 
	m_ho¡_
;

111 
	m_ho¡_pÜt
;

112 }
	tQOSREQUEST_MTTCEXT
;

114 
	sQOSREQUESTMTTC_TMEXTg


116 
št32_t
 
	m_modid
;

117 
št32_t
 
	m_cmdid
;

118 
št64_t
 
	m_key
;

119 
št32_t
 
	m_funid
;

120 
¡ršg
 
	m_ho¡_
;

121 
	m_ho¡_pÜt
;

122 
št32_t
 
	m_d–ay
;

123 }
	tQOSREQUEST_MTTCEXT_TM
;

127 
	sCALLERQOSREQUESTg


129 
	m_æow
;

130 
	m_ÿÎ”mod
;

131 
	m_ÿÎ”cmd
;

132 
	m_ÿÎedmodid
;

133 
	m_ÿÎedcmd
;

134 
¡ršg
 
	m_ho¡_
;

135 
	m_ho¡_pÜt
;

136 }
	tCALLERQOSREQUEST
;

138 
	sCALLERQOSREQUESTMTTCEXTg


140 
	m_ÿÎ”mod
;

141 
	m_ÿÎ”cmd
;

142 
	m_ÿÎedmodid
;

143 
	m_ÿÎedcmdid
;

144 
št64_t
 
	m_ÿÎedkey
;

145 
št32_t
 
	m_funid
;

146 
¡ršg
 
	m_ho¡_
;

147 
	m_ho¡_pÜt
;

148 }
	tCALLERQOSREQUEST_MTTCEXT
;

152 
	sQOSREQCFG


154 
	m_»q_max
;

155 
	m_»q_mš
;

156 
	m_»q_”r_mš
;

157 
	m_»q_ex‹nd_¿‹
;

159 
QOSREQCFG
()

161 
	m_»q_max
 = 0;

162 
	m_»q_mš
 = 0;

163 
	m_»q_”r_mš
 = 0.0;

164 
	m_»q_ex‹nd_¿‹
 = 0.0;

169 
	sQOSLISTCFG


171 
	m_li¡_max
;

172 
	m_li¡_mš
;

173 
	m_li¡_”r_mš
;

174 
	m_li¡_ex‹nd_¿‹
;

176 
QOSLISTCFG
()

178 
	m_li¡_max
 = 0;

179 
	m_li¡_mš
 = 0;

180 
	m_li¡_”r_mš
 = 0.0;

181 
	m_li¡_ex‹nd_¿‹
 = 0.0;

186 
	sQOSTMCFG


188 
	m_tm_cfg_couÁ
;

189 
	m_begš_u£c
[
QOS_TM_MAX
];

190 
	m_’d_u£c
[
QOS_TM_MAX
];

191 
	m_»t
[
QOS_TM_MAX
];

193 
QOSTMCFG
()

195 
	m_tm_cfg_couÁ
 = 0;

196  
	mi
=0;i<
	mQOS_TM_MAX
;i++ )

198 
	m_begš_u£c
[
i
] = 0;

199 
	m_’d_u£c
[
i
] = 0;

200 
	m_»t
[
i
] = 0;

205 
	sRou‹_CycTm


207 
	m_modid
;

208 
	m_cmd
;

209 
	mtm
;

210 
	mmš»q
;

211 
	mmax»q
;

212 
	mext
;

213 
	mmš_”r
;

215 } 
	tROUTE_CYCTM
;

261 
ApiIn™Rou‹
(
modid
, 
cmdid
, 
time_out
, 
¡ršg
& 
”r_msg
);

264 
ApiG‘L5PÜt
(&
pÜt
);

265 
ApiS‘L5PÜt
(
pÜt
);

266 
ApiS‘Upd©eIÁ”v®
(
upd©eCyşe
);

268 
ApiRou‹NodeCfg
(
QOSREQUEST
& 
qos_»q
,
QOSREQCFG
& 
qos_»q_cfg
,
time_out
,
¡ršg
& 
”r_msg
);

270 
ApiRou‹NodeCfgD–
(
QOSREQUEST
& 
qos_»q
,
time_out
,
¡ršg
& 
”r_msg
);

273 
ApiOutRoutTabË
(
time_out
,
¡ršg
& 
”r_msg
);

278 
ApiAddRou‹Node
(
QOSREQUEST
& 
qos_»q
,
time_out
,
¡ršg
& 
”r_msg
);

293 
ApiG‘Rou‹
(
QOSREQUEST
& 
qos_»q
,
time_out
,
¡ršg
& 
”r_msg
,
timev®
* 
tm_v®
=
NULL
);

294 
ApiG‘Rou‹
(
QOSREQUEST_MTTCEXT
& 
qos_»q
,
time_out
,
¡ršg
& 
”r_msg
,
timev®
* 
tm_v®
=
NULL
);

295 
ApiG‘Rou‹
(
QOSREQUEST_TMEXT
& 
qos_»q
,
time_out
,
¡ršg
& 
”r_msg
,
timev®
* 
tm_v®
=
NULL
);

296 
ApiG‘Rou‹
(
QOSREQUEST_MTTCEXT_TM
& 
qos_»q
,
time_out
,
¡ršg
& 
”r_msg
,
timev®
* 
tm_v®
=
NULL
);

298 
ApiAÁiP¬®ËlG‘Rou‹
(
QOSREQUEST_MTTCEXT
& 
qos_»q
,
time_out
,
¡ršg
& 
”r_msg
,
timev®
* 
tm_v®
=
NULL
);

301 
ApiRou‹NodeD–
(
QOSREQUEST
& 
qos_»q
,
time_out
,
¡ršg
& 
”r_msg
);

315 
ApiRou‹ResuÉUpd©e
(
QOSREQUEST
& 
qos_»q
,
»t
, 
u£time_u£c
,
¡ršg
& 
”r_msg
,
timev®
* 
tm_v®
=
NULL
);

316 
ApiRou‹ResuÉUpd©e
(
QOSREQUEST_MTTCEXT
& 
qos_»q
,
»t
, 
u£time_u£c
,
¡ršg
& 
”r_msg
,
timev®
* 
tm_v®
=
NULL
);

318 
ApiRou‹ResuÉUpd©e
(
QOSREQUEST_TMEXT
& 
qos_»q
,
»t
,
u£time_u£c
,
¡ršg
& 
”r_msg
,
timev®
* 
tm_v®
=
NULL
);

319 
ApiAÁiP¬®ËlUpd©e
(
QOSREQUEST_MTTCEXT
& 
qos_»q
,
»t
,
u£time_u£c
,
¡ršg
& 
”r_msg
,
timev®
* 
tm_v®
=
NULL
);

320 
ApiRou‹ResuÉUpd©e
(
QOSREQUEST_MTTCEXT_TM
& 
qos_»q
,
»t
,
u£time_u£c
,
¡ršg
& 
”r_msg
,
timev®
* 
tm_v®
=
NULL
);

323 
ApiC®ËrRou‹ResuÉUpd©e
(
CALLERQOSREQUEST
& 
qos_»q
,
»t
, 
u£time_u£c
,
¡ršg
& 
”r_msg
,
timev®
* 
tm_v®
=
NULL
);

324 
ApiC®ËrRou‹ResuÉUpd©e
(
CALLERQOSREQUEST_MTTCEXT
& 
qos_»q
,
»t
, 
u£time_u£c
,
¡ršg
& 
”r_msg
,
timev®
* 
tm_v®
=
NULL
);

329 
ApiRou‹CofCycTm
(cÚ¡ 
ROUTE_CYCTM
& 
qos_»q
);

331 
ApiS‘L5Time
(* 
tm
,
timev®
* 
tm_v®
);

349 
šlše
 * 
	$m­_fe
 (cÚ¡ * 
f’ame
, 
size
)

351 
fd
 = ::
	`İ’
(
f’ame
, 
O_RDWR
|
O_CREAT
, 0666);

352 *
m­
 = 
NULL
;

354 if(
fd
 >= 0)

356 if(
size
 > 0)

357 
	`árunÿ‹
(
fd
, 
size
);

359 
size
 = 
	`l£ek
(
fd
, 0L, 
SEEK_END
);

361 if(
size
 > 0)

362 
m­
 = 
	`mm­
(0, 
size
, 
PROT_READ
|
PROT_WRITE
, 
MAP_SHARED
, 
fd
, 0);

363 ::
	`şo£
(
fd
);

365 if(
size
 > 0)

367 
m­
 = 
	`mm­
(0, 
size
, 
PROT_READ
|
PROT_WRITE
, 
MAP_ANONYMOUS
, -1, 0);

370 if(
m­
 =ğ
MAP_FAILED
)

372 
m­
 = 
NULL
;

374  
m­
;

375 
	}
}

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/GetExtInfo.cpp

19 
	~"G‘ExtInfo.h
"

20 
	~"msg.h
"

21 
	~"¥pšş.h
"

23 
£q
;

26 
	gCG‘ExtInfo
::
	$HªdËEncode
Ğ
CAsyncF¿me
 *
pF¿me
,

27 *
buf
,

28 &
Ën
,

29 
CMsgBa£
 *
pMsg
)

33 
CMsg
 *
msg
 = (CMsg*)
pMsg
;

34 *(*)
buf
 = 
msg
->
uš
;

35 *((*)
buf
+1èğ
£q
;

36 
Ën
 = 2*();

38 
	`S‘Cu¼’tSeq
Ğ
£q
++ );

40 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "CG‘ExtInfo::HªdËEncode. seq: %d\n", *((*)
buf
+1));

42 
	}
}

45 
	gCG‘ExtInfo
::
	$HªdËIÅut
Ğ
CAsyncF¿me
 *
pF¿me
,

46 cÚ¡ *
buf
,

47 
Ën
,

48 
CMsgBa£
 *
pMsg
)

50 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "CG‘ExtInfo::HªdËIÅut. buàËn: %d\n", 
Ën
);

51 ifĞ
Ën
 == ()*4 )

53 
£qno
 = *(*)(
buf
+()*3);

54 
	`S‘Cu¼’tSeq
Ğ
£qno
 );

55  
Ën
;

58 
	}
}

61 
	gCG‘ExtInfo
::
	$HªdËProûss
Ğ
CAsyncF¿me
 *
pF¿me
,

62 cÚ¡ *
buf
,

63 
Ën
,

64 
CMsgBa£
 *
pMsg
)

67 
£q
 = *(*)(
buf
+()*3);

68 
uš
 = *(*)(
buf
);

69 
£ed_num
 = *(*)(
buf
+());

70 
gaš_num
 = *(*)(
buf
+2*());

72 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "CGetExtInfo::HandleProcess. buf†en: %d; seq: %d; uin: %d; seed_num: %d: gain_num: %d\n",

73 
Ën
, 
£q
, 
uš
, 
£ed_num
, 
gaš_num
);

76 
	}
}

79 
	gCG‘ExtInfo
::
	$HªdËE¼Ü
Ğ
CAsyncF¿me
 *
pF¿me
,

80 
”r_no
,

81 
CMsgBa£
 *
pMsg
)

83 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_ERROR
, "CG‘ExtInfo::HªdËE¼Ü.ƒ¼no: %d\n", 
”r_no
);

86 
	}
}

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/GetExtInfo.h

19 #iâdeà
__GETEXTINFO_H__


20 
	#__GETEXTINFO_H__


	)

22 
	~"IAùiÚ.h
"

24 
	gUSING_ASYNCFRAME_NS
;

26 şas 
	cCG‘ExtInfo


27 : 
public
 
IAùiÚ


29 
public
:

31 
vœtu®
 
HªdËEncode
Ğ
CAsyncF¿me
 *
pF¿me
,

32 *
buf
,

33 &
Ën
,

34 
CMsgBa£
 *
pMsg
);

37 
vœtu®
 
HªdËIÅut
Ğ
CAsyncF¿me
 *
pF¿me
,

38 cÚ¡ *
buf
,

39 
Ën
,

40 
CMsgBa£
 *
pMsg
);

43 
vœtu®
 
HªdËProûss
Ğ
CAsyncF¿me
 *
pF¿me
,

44 cÚ¡ *
buf
,

45 
Ën
,

46 
CMsgBa£
 *
pMsg
);

49 
vœtu®
 
HªdËE¼Ü
Ğ
CAsyncF¿me
 *
pF¿me
,

50 
”r_no
,

51 
CMsgBa£
 *
pMsg
);

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/GetInfo.cpp

19 
	~"G‘Info.h
"

20 
	~"msg.h
"

21 
	~"¥pšş.h
"

23 
£q
;

26 
	gCG‘Info
::
	$HªdËEncode
Ğ
CAsyncF¿me
 *
pF¿me
,

27 *
buf
,

28 &
Ën
,

29 
CMsgBa£
 *
pMsg
)

32 ifĞ
Ën
 < 1024 )

37 
CMsg
 *
msg
 = (CMsg*)
pMsg
;

38 *(*)
buf
 = 
msg
->
uš
;

39 *((*)
buf
+1èğ
£q
;

40 
Ën
 = 2*();

42 
	`S‘Cu¼’tSeq
(
£q
++);

44 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "CG‘Info::HªdËEncode. seq: %d\n", *((*)
buf
+1));

46 
	}
}

49 
	gCG‘Info
::
	$HªdËIÅut
Ğ
CAsyncF¿me
 *
pF¿me
,

50 cÚ¡ *
buf
,

51 
Ën
,

52 
CMsgBa£
 *
pMsg
)

54 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "CG‘Info::HªdËIÅut. buàËn: %d\n", 
Ën
);

55 ifĞ
Ën
 == ()*4 )

57 
£qno
 = *(*)(
buf
+()*3);

58 
	`S‘Cu¼’tSeq
Ğ
£qno
 );

59  
Ën
;

62 
	}
}

65 
	gCG‘Info
::
	$HªdËProûss
Ğ
CAsyncF¿me
 *
pF¿me
,

66 cÚ¡ *
buf
,

67 
Ën
,

68 
CMsgBa£
 *
pMsg
)

71 
£q
 = *(*)(
buf
+()*3);

72 
uš
 = *(*)(
buf
);

73 
Ëv–
 = *(*)(
buf
+());

74 
coš
 = *(*)(
buf
+2*());

76 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "CGetInfo::HandleProcess. buf†en: %d; seq: %d; uin: %d;†evel: %d: coin: %d\n",

77 
Ën
, 
£q
, 
uš
, 
Ëv–
, 
coš
);

80 
	}
}

83 
	gCG‘Info
::
	$HªdËE¼Ü
Ğ
CAsyncF¿me
 *
pF¿me
,

84 
”r_no
,

85 
CMsgBa£
 *
pMsg
)

87 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_ERROR
, "CG‘Info::HªdËE¼Ü.ƒ¼no: %d\n", 
”r_no
);

90 
	}
}

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/GetInfo.h

19 #iâdeà
__GETINFO_H__


20 
	#__GETINFO_H__


	)

22 
	~"IAùiÚ.h
"

24 
	gUSING_ASYNCFRAME_NS
;

26 şas 
	cCG‘Info


27 : 
public
 
IAùiÚ


29 
public
:

31 
vœtu®
 
HªdËEncode
Ğ
CAsyncF¿me
 *
pF¿me
,

32 *
buf
,

33 &
Ën
,

34 
CMsgBa£
 *
pMsg
);

37 
vœtu®
 
HªdËIÅut
Ğ
CAsyncF¿me
 *
pF¿me
,

38 cÚ¡ *
buf
,

39 
Ën
,

40 
CMsgBa£
 *
pMsg
);

43 
vœtu®
 
HªdËProûss
Ğ
CAsyncF¿me
 *
pF¿me
,

44 cÚ¡ *
buf
,

45 
Ën
,

46 
CMsgBa£
 *
pMsg
);

49 
vœtu®
 
HªdËE¼Ü
Ğ
CAsyncF¿me
 *
pF¿me
,

50 
”r_no
,

51 
CMsgBa£
 *
pMsg
);

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/GetState.cpp

19 
	~"G‘S‹.h
"

20 
	~"G‘Info.h
"

21 
	~"G‘ExtInfo.h
"

22 
	~"AùiÚInfo.h
"

23 
	~"AsyncF¿me.h
"

24 
	~"CommDef.h
"

25 
	~"msg.h
"

28 
	gCG‘S‹
::
	$HªdËEncode
(
CAsyncF¿me
 *
pF¿me
,

29 
CAùiÚS‘
 *
pAùiÚS‘
,

30 
CMsgBa£
 *
pMsg
)

32 
CG‘Info
 
G‘Info
;

33 
CG‘ExtInfo
 
G‘ExtInfo
;

36 
CAùiÚInfo
 *
pAùiÚ1
 = 
Ãw
 
	`CAùiÚInfo
(512);

37 
pAùiÚ1
->
	`S‘ID
(1);

38 
pAùiÚ1
->
	`S‘De¡Ip
("172.25.0.29");

39 
pAùiÚ1
->
	`S‘De¡PÜt
(5574);

40 
pAùiÚ1
->
	`S‘PrÙo
(
PrÙoTy³_TCP
);

41 
pAùiÚ1
->
	`S‘AùiÚTy³
(
AùiÚTy³_S’dRecv_K“pAlive
);

42 
pAùiÚ1
->
	`S‘Timeout
(200);

43 
pAùiÚ1
->
	`S‘IAùiÚPŒ
((
IAùiÚ
 *)&
G‘Info
);

45 
pAùiÚS‘
->
	`AddAùiÚ
(
pAùiÚ1
);

47 
CAùiÚInfo
 *
pAùiÚ2
 = 
Ãw
 
	`CAùiÚInfo
(512);

48 
pAùiÚ2
->
	`S‘ID
(2);

49 
pAùiÚ2
->
	`S‘De¡Ip
("172.25.0.29");

50 
pAùiÚ2
->
	`S‘De¡PÜt
(5574);

51 
pAùiÚ2
->
	`S‘PrÙo
(
PrÙoTy³_TCP
);

52 
pAùiÚ2
->
	`S‘AùiÚTy³
(
AùiÚTy³_S’dRecv_K“pAliveW™hP’dšg
);

53 
pAùiÚ2
->
	`S‘Timeout
(200);

54 
pAùiÚ2
->
	`S‘IAùiÚPŒ
((
IAùiÚ
 *)&
G‘ExtInfo
);

56 
pAùiÚS‘
->
	`AddAùiÚ
(
pAùiÚ2
);

59 
	}
}

61 
	gCG‘S‹
::
	$HªdËProûss
(
CAsyncF¿me
 *
pF¿me
,

62 
CAùiÚS‘
 *
pAùiÚS‘
,

63 
CMsgBa£
 *
pMsg
)

65 
nNextS‹ID
 = 
STATE_ID_UPDATE
;

67 
CMsg
 *
msg
 = (CMsg *)
pMsg
;

68 
”r1
 = 0, 
”r2
 = 0;

69 
co¡1
 = 0, 
co¡2
 = 0;

70 
size1
 = 0, 
size2
 = 0;

72 
CAùiÚS‘
::
AùiÚS‘
 &
aùiÚ_£t
 = 
pAùiÚS‘
->
	`G‘AùiÚS‘
();

73 
CAùiÚS‘
::
AùiÚS‘
::
™”©Ü
 
™
 = 
aùiÚ_£t
.
	`begš
();

74 ; 
™
 !ğ
aùiÚ_£t
.
	`’d
(); it++ )

76 
CAùiÚInfo
 *
pInfo
 = *
™
;

77 *
buf
 = 
NULL
;

79 
id
;

80 
pInfo
->
	`G‘ID
(
id
);

82 ifĞ
id
 == 1 )

84 
pInfo
->
	`G‘E¼no
(
”r1
);

85 
pInfo
->
	`G‘Bufãr
Ğ&
buf
, 
size1
);

86 ifĞ
”r1
 == 0 )

88 ifĞ
size1
 == 16

89 && 
msg
->
uš
 =ğ*(*)
buf
 )

91 
msg
->
Ëv–
 = *(*)(
buf
+());

92 
msg
->
coš
 = *(*)(
buf
+()*2);

97 
msg
->
Ëv–
 = -1;

98 
msg
->
coš
 = -1;

100 
nNextS‹ID
 = -1;

104 
pInfo
->
	`G‘TimeCo¡
Ğ
co¡1
 );

107 ifĞ
id
 == 2 )

109 
pInfo
->
	`G‘E¼no
(
”r2
);

110 
pInfo
->
	`G‘Bufãr
Ğ&
buf
, 
size2
);

111 ifĞ
”r2
 == 0 )

113 ifĞ
size2
 == 16

114 && 
msg
->
uš
 =ğ*(*)
buf
 )

116 
msg
->
£ed_num
 = *(*)(
buf
+());

117 
msg
->
gaš_num
 = *(*)(
buf
+()*2);

122 
msg
->
Ëv–
 = -2;

123 
msg
->
coš
 = -2;

125 
nNextS‹ID
 = -1;

129 
pInfo
->
	`G‘TimeCo¡
Ğ
co¡2
 );

144  
STATE_ID_UPDATE
;

145 
	}
}

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/GetState.h

19 #iâdeà
__GETSTATE_H__


20 
	#__GETSTATE_H__


	)

21 
	~"IS‹.h
"

23 
	gUSING_ASYNCFRAME_NS
;

25 şas 
	cCG‘S‹


26 : 
public
 
IS‹


28 
public
:

29 
vœtu®
 
HªdËEncode
(
CAsyncF¿me
 *
pF¿me
,

30 
CAùiÚS‘
 *
pAùiÚS‘
,

31 
CMsgBa£
 *
pMsg
) ;

33 
vœtu®
 
HªdËProûss
(
CAsyncF¿me
 *
pF¿me
,

34 
CAùiÚS‘
 *
pAùiÚS‘
,

35 
CMsgBa£
 *
pMsg
) ;

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/GetState2.cpp

19 
	~"G‘S‹2.h
"

20 
	~"G‘Info.h
"

21 
	~"G‘ExtInfo.h
"

22 
	~"AùiÚInfo.h
"

23 
	~"NÚS‹AùiÚInfo.h
"

24 
	~"S‹AùiÚInfo.h
"

25 
	~"AÁiP¬®AùiÚInfo.h
"

26 
	~"AsyncF¿me.h
"

27 
	~"CommDef.h
"

28 
	~"msg.h
"

31 
	gCG‘S‹2
::
	$HªdËEncode
(
CAsyncF¿me
 *
pF¿me
,

32 
CAùiÚS‘
 *
pAùiÚS‘
,

33 
CMsgBa£
 *
pMsg
)

35 
CG‘Info
 
G‘Info
;

36 
CG‘ExtInfo
 
G‘ExtInfo
;

39 
CNÚS‹AùiÚInfo
 *
pAùiÚ1
 = 
Ãw
 
	`CNÚS‹AùiÚInfo
(512);

40 
pAùiÚ1
->
	`S‘Rou‹ID
(1000, 500);

63 
pAùiÚ1
->
	`S‘ID
(1);

64 
pAùiÚ1
->
	`S‘PrÙo
(
PrÙoTy³_TCP
);

65 
pAùiÚ1
->
	`S‘AùiÚTy³
(
AùiÚTy³_S’dRecv_K“pAlive
);

66 
pAùiÚ1
->
	`S‘Timeout
(400);

67 
pAùiÚ1
->
	`S‘IAùiÚPŒ
((
IAùiÚ
 *)&
G‘Info
);

69 
pAùiÚS‘
->
	`AddAùiÚ
(
pAùiÚ1
);

83 
	}
}

85 
	gCG‘S‹2
::
	$HªdËProûss
(
CAsyncF¿me
 *
pF¿me
,

86 
CAùiÚS‘
 *
pAùiÚS‘
,

87 
CMsgBa£
 *
pMsg
)

89 
nNextS‹ID
 = 0;

91 
CMsg
 *
msg
 = (CMsg *)
pMsg
;

92 
”r1
 = 0, 
”r2
 = 0;

93 
co¡1
 = 0, 
co¡2
 = 0;

94 
size1
 = 0, 
size2
 = 0;

96 
CAùiÚS‘
::
AùiÚS‘
 &
aùiÚ_£t
 = 
pAùiÚS‘
->
	`G‘AùiÚS‘
();

97 
CAùiÚS‘
::
AùiÚS‘
::
™”©Ü
 
™
 = 
aùiÚ_£t
.
	`begš
();

98 ; 
™
 !ğ
aùiÚ_£t
.
	`’d
(); it++ )

100 
CAùiÚInfo
 *
pInfo
 = *
™
;

101 *
buf
 = 
NULL
;

103 
id
;

104 
pInfo
->
	`G‘ID
(
id
);

106 ifĞ
id
 == 1 )

108 
Rou‹Ty³
 
ty³
 = 
pInfo
->
	`G‘Rou‹Ty³
();

109 ifĞ
ty³
 =ğ
L5AÁiP¬®Rou‹
 )

111 
¡d
::
¡ršg
 

;

112 
pÜt
 = 0;

113 
pInfo
->
	`G‘De¡Ip
Ğ

 );

114 
pInfo
->
	`G‘De¡PÜt
Ğ
pÜt
 );

115 
CAÁiP¬®AùiÚInfo
 *
pAÁiP¬®Info
 = (CAÁiP¬®AùiÚInfØ*)
pInfo
;

116 
modid
 = 0, 
cmdid
 = 0;

117 
št64_t
 
key
 = -1;

118 
pAÁiP¬®Info
->
	`G‘Rou‹Key
Ğ
modid
, 
cmdid
, 
key
 );

120 
¡d
::
¡ršg
 
id—l_
;

121 
id—l_pÜt
 = 0;

122 
pAÁiP¬®Info
->
	`G‘Id—lHo¡
(
id—l_
, 
id—l_pÜt
);

124 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_ERROR
, "modid: %d, cmdid: %d, key: %lld, ip: %s,…ort: %d, ideal_ip: %s, ideal_port: %d\n",

125 
modid
, 
cmdid
, 
key
, 

.
	`c_¡r
(), 
pÜt
, 
id—l_
.c_¡r(), 
id—l_pÜt
);

128 
pInfo
->
	`G‘E¼no
(
”r1
);

129 
pInfo
->
	`G‘Bufãr
Ğ&
buf
, 
size1
);

130 
pInfo
->
	`G‘TimeCo¡
Ğ
co¡1
 );

131 ifĞ
”r1
 == -5 )

133 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_ERROR
, "ECode: %d, Co¡: %d\n", 
”r1
, 
co¡1
);

136 ifĞ
”r1
 == 0 )

138 ifĞ
size1
 == 16

139 && 
msg
->
uš
 =ğ*(*)
buf
 )

141 
msg
->
Ëv–
 = *(*)(
buf
+());

142 
msg
->
coš
 = *(*)(
buf
+()*2);

147 
msg
->
Ëv–
 = -1;

148 
msg
->
coš
 = -1;

150 
nNextS‹ID
 = -1;

155 ifĞ
id
 == 2 )

157 
pInfo
->
	`G‘E¼no
(
”r2
);

158 
pInfo
->
	`G‘Bufãr
Ğ&
buf
, 
size2
);

159 ifĞ
”r2
 == 0 )

161 ifĞ
size2
 == 16

162 && 
msg
->
uš
 =ğ*(*)
buf
 )

164 
msg
->
£ed_num
 = *(*)(
buf
+());

165 
msg
->
gaš_num
 = *(*)(
buf
+()*2);

170 
msg
->
Ëv–
 = -2;

171 
msg
->
coš
 = -2;

173 
nNextS‹ID
 = -1;

177 
pInfo
->
	`G‘TimeCo¡
Ğ
co¡2
 );

191  
nNextS‹ID
;

192 
	}
}

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/GetState2.h

19 #iâdeà
__GETSTATE2_H__


20 
	#__GETSTATE2_H__


	)

21 
	~"IS‹.h
"

23 
	gUSING_ASYNCFRAME_NS
;

25 şas 
	cCG‘S‹2


26 : 
public
 
IS‹


28 
public
:

29 
vœtu®
 
HªdËEncode
(
CAsyncF¿me
 *
pF¿me
,

30 
CAùiÚS‘
 *
pAùiÚS‘
,

31 
CMsgBa£
 *
pMsg
) ;

33 
vœtu®
 
HªdËProûss
(
CAsyncF¿me
 *
pF¿me
,

34 
CAùiÚS‘
 *
pAùiÚS‘
,

35 
CMsgBa£
 *
pMsg
) ;

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/UpdateData.cpp

19 
	~"Upd©eD©a.h
"

20 
	~"msg.h
"

21 
	~"¥pšş.h
"

23 
£q
;

26 
	gCUpd©eD©a
::
	$HªdËEncode
Ğ
CAsyncF¿me
 *
pF¿me
,

27 *
buf
,

28 &
Ën
,

29 
CMsgBa£
 *
pMsg
)

31 
CMsg
 *
msg
 = (CMsg*)
pMsg
;

32 *(*)
buf
 = 
msg
->
uš
;

33 *((*)
buf
+1èğ
£q
;

34 *((*)
buf
+2èğ
msg
->
Ëv–
;

35 *((*)
buf
+3èğ
msg
->
coš
;

36 *((*)
buf
+4èğ
msg
->
£ed_num
;

37 *((*)
buf
+5èğ
msg
->
gaš_num
;

38 
Ën
 = 6*();

40 
	`S‘Cu¼’tSeq
Ğ
£q
++ );

42 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "CUpd©eD©a::HªdËEncode. seq: %d\n", *((*)
buf
+1));

44 
	}
}

47 
	gCUpd©eD©a
::
	$HªdËIÅut
Ğ
CAsyncF¿me
 *
pF¿me
,

48 cÚ¡ *
buf
,

49 
Ën
,

50 
CMsgBa£
 *
pMsg
)

52 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "CUpd©eD©a::HªdËIÅut. buàËn: %d\n", 
Ën
);

53 ifĞ
Ën
 == ()*3 )

55 
£qno
 = *(*)(
buf
+());

56 
	`S‘Cu¼’tSeq
Ğ
£qno
 );

57  
Ën
;

60 
	}
}

63 
	gCUpd©eD©a
::
	$HªdËProûss
Ğ
CAsyncF¿me
 *
pF¿me
,

64 cÚ¡ *
buf
,

65 
Ën
,

66 
CMsgBa£
 *
pMsg
)

69 
uš
 = *(*)(
buf
);

70 
£q
 = *(*)(
buf
+());

71 
»suÉ
 = *(*)(
buf
+()*2);

73 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "CUpdateData::HandleProcess. buf†en: %d; seq: %d; uin: %d;„esult: %d\n",

74 
Ën
, 
£q
, 
uš
, 
»suÉ
);

77 
	}
}

80 
	gCUpd©eD©a
::
	$HªdËE¼Ü
Ğ
CAsyncF¿me
 *
pF¿me
,

81 
”r_no
,

82 
CMsgBa£
 *
pMsg
)

84 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_ERROR
, "CUpd©eD©a::HªdËE¼Ü.ƒ¼no: %d\n", 
”r_no
);

87 
	}
}

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/UpdateData.h

19 #iâdeà
__UPDATEDATA_H__


20 
	#__UPDATEDATA_H__


	)

22 
	~"IAùiÚ.h
"

24 
	gUSING_ASYNCFRAME_NS
;

26 şas 
	cCUpd©eD©a


27 : 
public
 
IAùiÚ


29 
public
:

31 
vœtu®
 
HªdËEncode
Ğ
CAsyncF¿me
 *
pF¿me
,

32 *
buf
,

33 &
Ën
,

34 
CMsgBa£
 *
pMsg
);

37 
vœtu®
 
HªdËIÅut
Ğ
CAsyncF¿me
 *
pF¿me
,

38 cÚ¡ *
buf
,

39 
Ën
,

40 
CMsgBa£
 *
pMsg
);

43 
vœtu®
 
HªdËProûss
Ğ
CAsyncF¿me
 *
pF¿me
,

44 cÚ¡ *
buf
,

45 
Ën
,

46 
CMsgBa£
 *
pMsg
);

49 
vœtu®
 
HªdËE¼Ü
Ğ
CAsyncF¿me
 *
pF¿me
,

50 
”r_no
,

51 
CMsgBa£
 *
pMsg
);

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/UpdateState.cpp

19 
	~"Upd©eS‹.h
"

20 
	~"Upd©eD©a.h
"

21 
	~"AùiÚInfo.h
"

22 
	~"AsyncF¿me.h
"

23 
	~"CommDef.h
"

24 
	~"msg.h
"

27 
	gCUpd©eS‹
::
	$HªdËEncode
(
CAsyncF¿me
 *
pF¿me
,

28 
CAùiÚS‘
 *
pAùiÚS‘
,

29 
CMsgBa£
 *
pMsg
)

31 
CUpd©eD©a
 
Upd©eD©a
;

33 
CAùiÚInfo
 *
pAùiÚ1
 = 
Ãw
 
	`CAùiÚInfo
(512);

34 
pAùiÚ1
->
	`S‘ID
(3);

35 
pAùiÚ1
->
	`S‘De¡Ip
("172.25.0.29");

36 
pAùiÚ1
->
	`S‘De¡PÜt
(5575);

37 
pAùiÚ1
->
	`S‘PrÙo
(
PrÙoTy³_TCP
);

38 
pAùiÚ1
->
	`S‘AùiÚTy³
(
AùiÚTy³_S’dRecv_K“pAliveW™hP’dšg
);

39 
pAùiÚ1
->
	`S‘Timeout
(200);

40 
pAùiÚ1
->
	`S‘IAùiÚPŒ
((
IAùiÚ
 *)&
Upd©eD©a
);

42 
pAùiÚS‘
->
	`AddAùiÚ
(
pAùiÚ1
);

45 
	}
}

47 
	gCUpd©eS‹
::
	$HªdËProûss
(
CAsyncF¿me
 *
pF¿me
,

48 
CAùiÚS‘
 *
pAùiÚS‘
,

49 
CMsgBa£
 *
pMsg
)

51 
CMsg
 *
msg
 = (CMsg *)
pMsg
;

52 
”r1
 = 0 ;

53 
co¡1
 = 0;

54 
size1
 = 0;

56 
CAùiÚS‘
::
AùiÚS‘
 &
aùiÚ_£t
 = 
pAùiÚS‘
->
	`G‘AùiÚS‘
();

57 
CAùiÚS‘
::
AùiÚS‘
::
™”©Ü
 
™
 = 
aùiÚ_£t
.
	`begš
();

58 ; 
™
 !ğ
aùiÚ_£t
.
	`’d
(); it++ )

60 
CAùiÚInfo
 *
pInfo
 = *
™
;

61 *
buf
 = 
NULL
;

63 
id
;

64 
pInfo
->
	`G‘ID
(
id
);

66 ifĞ
id
 == 3 )

68 
pInfo
->
	`G‘E¼no
(
”r1
);

69 
pInfo
->
	`G‘Bufãr
Ğ&
buf
, 
size1
);

70 ifĞ
”r1
 == 0 )

72 ifĞ
size1
 == ()*3

73 && 
msg
->
uš
 =ğ*(*)
buf
 )

75 
msg
->
»suÉ
 = *(*)(
buf
+()*2);

80 
msg
->
»suÉ
 = -1;

81 
msg
->
Ëv–
 = -3;

82 
msg
->
coš
 = -3;

87 
pInfo
->
	`G‘TimeCo¡
Ğ
co¡1
 );

97  
STATE_ID_FINISHED
;

98 
	}
}

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/UpdateState.h

19 #iâdeà
__UPDATESTATE_H__


20 
	#__UPDATESTATE_H__


	)

21 
	~"IS‹.h
"

23 
	gUSING_ASYNCFRAME_NS
;

25 şas 
	cCUpd©eS‹


26 : 
public
 
IS‹


28 
public
:

29 
vœtu®
 
HªdËEncode
(
CAsyncF¿me
 *
pF¿me
,

30 
CAùiÚS‘
 *
pAùiÚS‘
,

31 
CMsgBa£
 *
pMsg
) ;

33 
vœtu®
 
HªdËProûss
(
CAsyncF¿me
 *
pF¿me
,

34 
CAùiÚS‘
 *
pAùiÚS‘
,

35 
CMsgBa£
 *
pMsg
) ;

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/echo_example.cpp

2 
	~"¥pšş.h
"

3 
	~<sys/sock‘.h
>

4 
	~<Ãtš‘/š.h
>

5 
	~<¬·/š‘.h
>

8 *
fÜm©_time
Ğ
time_t
 
tm
);

14 "C" 
	$¥p_hªdË_š™
(* 
¬g1
, * 
¬g2
)

17 cÚ¡ * 
‘c
 = (cÚ¡ *)
¬g1
;

19 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

21 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_DEBUG
, "¥p_hªdË_š™, cÚfig:%s, s”v”ty³:%d\n", 
‘c
, ba£->
	`£rv”ty³
());

24 
	}
}

33 "C" 
	$¥p_hªdË_šput
(
æow
, * 
¬g1
, * 
¬g2
)

36 
blob_ty³
* 
blob
 = (blob_ty³*)
¬g1
;

38 
TCÚnExtInfo
* 
extšfo
 = (TCÚnExtInfo*)
blob
->
extd©a
;

40 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

42 
ba£
->
log_
.
	`LOG_P
(
LOG_DEBUG
, "spp_handle_input[recvime:%s] flow:%d, buffer†en:%d, client ip:%s\n",

43 
	`fÜm©_time
(
extšfo
->
»cvtime_
),

44 
æow
,

45 
blob
->
Ën
,

46 
	`š‘_Áß
(*(
š_addr
*)&
extšfo
->
»mÙe_
));

48  
blob
->
Ën
;

49 
	}
}

56 "C" 
	$¥p_hªdË_rou‹
(
æow
, * 
¬g1
, * 
¬g2
)

59 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

60 
ba£
->
log_
.
	`LOG_P_FILE
(
LOG_DEBUG
, "¥p_hªdË_rou‹, flow:%d\n", 
æow
);

62 
	}
}

69 "C" 
	$¥p_hªdË_´oûss
(
æow
, * 
¬g1
, * 
¬g2
)

72 
blob_ty³
* 
blob
 = (blob_ty³*)
¬g1
;

74 
CTCommu
* 
commu
 = (CTCommu*)
blob
->
owÃr
;

76 
TCÚnExtInfo
* 
extšfo
 = (TCÚnExtInfo*)
blob
->
extd©a
;

78 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

80 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_DEBUG
, "spp_handle_process[recvime:%s] flow:%d, buffer†en:%d, client ip:%s\n",

81 
	`fÜm©_time
(
extšfo
->
»cvtime_
),

82 
æow
,

83 
blob
->
Ën
,

84 
	`š‘_Áß
(*(
š_addr
*)&
extšfo
->
»mÙe_
));

87 
»t
 = 
commu
->
	`£ndto
(
æow
, 
¬g1
, 
¬g2
 );

88 ià(
»t
 != 0)

90 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_ERROR
, "£nd„e¥Ú£ƒ¼Ü,„‘:%d\n", 
»t
);

91  
»t
;

101 
	}
}

106 "C" 
	$¥p_hªdË_fši
(* 
¬g1
, * 
¬g2
)

109 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

111 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_DEBUG
, "spp_handle_fini\n");

112 
	}
}

114 *
	$fÜm©_time
Ğ
time_t
 
tm
)

116 
¡r_tm
[1024];

117 
tm
 
tmm
;

118 
	`mem£t
(&
tmm
, 0, (tmm) );

119 
	`loÿÉime_r
((
time_t
 *)&
tm
, &
tmm
);

121 
	`¢´štf
(
¡r_tm
, (str_tm), "[%04d-%02d-%02d %02d:%02d:%02d]",

122 
tmm
.
tm_y—r
 + 1900,mm.
tm_mÚ
 + 1,mm.
tm_mday
,

123 
tmm
.
tm_hour
,mm.
tm_mš
,mm.
tm_£c
);

125  
¡r_tm
;

126 
	}
}

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/msg.cpp

19 
	~"msg.h
"

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/msg.h

19 #iâdeà
__MSG_H__


20 
	#__MSG_H__


	)

21 
	~"MsgBa£.h
"

23 
	gUSING_ASYNCFRAME_NS
;

25 
	#STATE_ID_FINISHED
 0

	)

26 
	#STATE_ID_GET
 1

	)

27 
	#STATE_ID_UPDATE
 2

	)

28 
	#STATE_ID_GET2
 3

	)

30 şas 
	cCMsg


31 : 
public
 
CMsgBa£


33 
public
:

34 
uš
;

35 
	mËv–
;

36 
	mcoš
;

37 
	m£ed_num
;

38 
	mgaš_num
;

39 
	m»suÉ
;

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/service.cpp

2 
	~"¥pšş.h
"

3 
	~<sys/sock‘.h
>

4 
	~<Ãtš‘/š.h
>

5 
	~<¬·/š‘.h
>

7 
	~"msg.h
"

8 
	~"G‘S‹.h
"

9 
	~"G‘S‹2.h
"

10 
	~"Upd©eS‹.h
"

12 
	#MODULE_PROC_NUM
 "moduË_´oc_num"

	)

15 
št32_t
 
	g£q
 = 0;

17 *
fÜm©_time
Ğ
time_t
 
tm
);

19 
	$In™
(
CAsyncF¿me
* 
pF¿me
, 
CMsgBa£
* 
pMsg
)

23  
STATE_ID_GET
;

25 
	}
}

27 
	sr¥_pkg


29 
	muš
;

30 
	mËv–
;

31 
	mcoš
;

32 } 
	tr¥_pkg_t
;

34 
	$Fši
(
CAsyncF¿me
* 
pF¿me
, 
CMsgBa£
* 
pMsg
)

37 
CMsg
 *
msg
 = (CMsg *è
pMsg
;

39 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
,

41 
msg
->
uš
, msg->
Ëv–
, msg->
coš
, msg->
£ed_num
, msg->
gaš_num
, msg->
»suÉ
);

42 
¡d
::
¡ršg
 
šfo
;

43 
pMsg
->
	`G‘D‘aInfo
(
šfo
);

44 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "%s\n", 
šfo
.
	`c_¡r
());

46 
r¥_pkg_t
 
pkg
;

47 
pkg
.
uš
 = 
msg
->uin;

48 
pkg
.
Ëv–
 = 
msg
->level;

49 
pkg
.
coš
 = 
msg
->coin;

51 
blob_ty³
 
r¥blob
;

52 
r¥blob
.
d©a
 = (*)&
pkg
;

53 
r¥blob
.
Ën
 = (
pkg
);

54 
pMsg
->
	`S’dToCl›Á
(
r¥blob
);

57 
	}
}

59 
	$Ov”lßdProûss
(
CAsyncF¿me
* 
pF¿me
, 
CMsgBa£
* 
pMsg
)

64 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "Overload.\n" );

66 
r¥_pkg_t
 
pkg
;

67 
pkg
.
uš
 = -1000;

68 
pkg
.
Ëv–
 = -999;

69 
pkg
.
coš
 = -888;

71 
blob_ty³
 
r¥blob
;

72 
r¥blob
.
d©a
 = (*)&
pkg
;

73 
r¥blob
.
Ën
 = (
pkg
);

74 
pMsg
->
	`S’dToCl›Á
(
r¥blob
);

77 
	}
}

82 "C" 
	$¥p_hªdË_š™
(* 
¬g1
, * 
¬g2
)

85 cÚ¡ * 
‘c
 = (cÚ¡ *)
¬g1
;

87 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

88 
ba£
->
log_
.
	`LOG_P
(
LOG_DEBUG
, "¥p_hªdË_š™, %s, %d\n", 
‘c
, ba£->
	`£rv”ty³
());

92 iàĞ
ba£
->
	`£rv”ty³
(è=ğ
SERVER_TYPE_WORKER
 )

103 
CAsyncF¿me
::
	`In¡ªû
()->
	`In™F¿me2
(
ba£
, 100, 0);

105 
CAsyncF¿me
::
	`In¡ªû
()->
	`RegC®lback
(CAsyncF¿me::
CBTy³_In™
, 
In™
);

106 
CAsyncF¿me
::
	`In¡ªû
()->
	`RegC®lback
(CAsyncF¿me::
CBTy³_Fši
, 
Fši
);

107 
CAsyncF¿me
::
	`In¡ªû
()->
	`RegC®lback
(CAsyncF¿me::
CBTy³_Ov”lßd
, 
Ov”lßdProûss
);

109 
CAsyncF¿me
::
	`In¡ªû
()->
	`AddS‹
(
STATE_ID_GET
, 
Ãw
 
CG‘S‹
);

110 
CAsyncF¿me
::
	`In¡ªû
()->
	`AddS‹
(
STATE_ID_UPDATE
, 
Ãw
 
CUpd©eS‹
);

111 
CAsyncF¿me
::
	`In¡ªû
()->
	`AddS‹
(
STATE_ID_GET2
, 
Ãw
 
CG‘S‹2
);

120 
	}
}

126 "C" 
	$¥p_hªdË_šput
(
æow
, * 
¬g1
, * 
¬g2
)

129 
blob_ty³
* 
blob
 = (blob_ty³*)
¬g1
;

131 
TCÚnExtInfo
* 
extšfo
 = (TCÚnExtInfo*)
blob
->
extd©a
;

133 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

134 
ba£
->
log_
.
	`LOG_P
(
LOG_DEBUG
, "spp_handle_input, %d, %d, %s, %s\n",

135 
æow
,

136 
blob
->
Ën
,

137 
	`š‘_Áß
(*(
š_addr
*)&
extšfo
->
»mÙe_
),

138 
	`fÜm©_time
(
extšfo
->
»cvtime_
));

140 iàĞ
blob
->
Ën
 >= ()() )

145 
	}
}

152 "C" 
	$¥p_hªdË_rou‹
(
æow
, * 
¬g1
, * 
¬g2
)

155 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

156 
ba£
->
log_
.
	`LOG_P
(
LOG_DEBUG
, "¥p_hªdË_rou‹, %d\n", 
æow
);

160 
	}
}

167 "C" 
	$¥p_hªdË_´oûss
(
æow
, * 
¬g1
, * 
¬g2
)

170 
blob_ty³
* 
blob
 = (blob_ty³*)
¬g1
;

171 
TCÚnExtInfo
* 
extšfo
 = (TCÚnExtInfo*)
blob
->
extd©a
;

174 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

176 
CTCommu
* 
commu
 = (CTCommu*)
blob
->
owÃr
;

180 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_DEBUG
, "spp_handle_process, %d, %d, %s, %s\n",

181 
æow
,

182 
blob
->
Ën
,

183 
	`š‘_Áß
(*(
š_addr
*)&
extšfo
->
»mÙe_
),

184 
	`fÜm©_time
(
extšfo
->
»cvtime_
));

198 
CMsg
 *
msg
 = 
Ãw
 CMsg;

199 
msg
->
	`S‘S”v”Ba£
(
ba£
);

200 
msg
->
	`S‘TCommu
(
commu
);

201 
msg
->
	`S‘Flow
(
æow
);

202 
msg
->
	`S‘InfoFÏg
(
Œue
);

203 
msg
->
	`S‘MsgTimeout
(0);

204 
msg
->
uš
 = *(*)
blob
->
d©a
;

205 
msg
->
Ëv–
 = 0;

206 
msg
->
coš
 = 0;

207 
CAsyncF¿me
::
	`In¡ªû
()->
	`Proûss
Ğ
msg
 );

210 
	}
}

214 "C" 
	$¥p_hªdË_fši
(* 
¬g1
, * 
¬g2
)

217 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

218 
ba£
->
log_
.
	`LOG_P
(
LOG_DEBUG
, "spp_handle_fini\n");

220 iàĞ
ba£
->
	`£rv”ty³
(è=ğ
SERVER_TYPE_WORKER
 )

222 
CAsyncF¿me
::
	`In¡ªû
()->
	`FšiF¿me
();

223 
CAsyncF¿me
::
	`De¡roy
();

225 
	}
}

227 *
	$fÜm©_time
Ğ
time_t
 
tm
)

229 
¡r_tm
[1024];

230 
tm
 
tmm
;

231 
	`mem£t
(&
tmm
, 0, (tmm) );

232 
	`loÿÉime_r
((
time_t
 *)&
tm
, &
tmm
);

234 
	`¢´štf
(
¡r_tm
, (str_tm), "[%04d-%02d-%02d %02d:%02d:%02d]",

235 
tmm
.
tm_y—r
 + 1900,mm.
tm_mÚ
 + 1,mm.
tm_mday
,

236 
tmm
.
tm_hour
,mm.
tm_mš
,mm.
tm_£c
);

238  
¡r_tm
;

239 
	}
}

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/ActionInfo.h

19 #iâdeà
__ACTION_INFO_H__


20 
	#__ACTION_INFO_H__


	)

22 
	~"CommDef.h
"

23 
	~<¡ršg
>

25 
BEGIN_ASYNCFRAME_NS


27 
şass
 
	gIAùiÚ
;

28 
şass
 
	gCN‘HªdËr
;

29 
şass
 
	gCP¬®ËlN‘HªdËr
;

30 
şass
 
	gCAsyncF¿me
;

31 
şass
 
	gCAùiÚS‘
;

32 
şass
 
	gCMsgBa£
;

34 şas 
	cCAùiÚInfo


36 
	mpublic
:

37 
ä›nd
 
şass
 
CN‘HªdËr
;

38 
ä›nd
 
şass
 
	mCP¬®ËlN‘HªdËr
;

39 
ä›nd
 
şass
 
	mCAùiÚS‘
;

41 
	mpublic
:

47 
CAùiÚInfo
(
š™_buf_size
);

48 
	mvœtu®
 ~
CAùiÚInfo
();

55 
šlše
 
	$S‘IAùiÚPŒ
Ğ
IAùiÚ
 *
pAùiÚ
 )

57 ifĞ
NULL
 =ğ
pAùiÚ
 ) {

61 
_pAùiÚ
 = 
pAùiÚ
;

72 
šlše
 
	$S‘De¡Ip
(cÚ¡ *

)

74 ifĞ
NULL
 =ğ

 ) {

78 
	`¡ºıy
Ğ
_
, 

, (_ip)-1 );

81 
	}
}

89 
šlše
 
	$G‘De¡Ip
(
¡d
::
¡ršg
 &

)

91 

 = 
_
;

92 
	}
}

100 
šlše
 
	$S‘De¡PÜt
Ğ
PÜtTy³
 
pÜt
 )

102 
_pÜt
 = 
pÜt
;

103 
	}
}

111 
šlše
 
	$G‘De¡PÜt
Ğ
PÜtTy³
 &
pÜt
 )

113 
pÜt
 = 
_pÜt
;

114 
	}
}

121 
šlše
 
	$S‘PrÙo
Ğ
PrÙoTy³
 
´Ùo
 )

123 
_´Ùo
 = 
´Ùo
;

124 
	}
}

131 
šlše
 
	$G‘PrÙo
Ğ
PrÙoTy³
 &
´Ùo
 )

133 
´Ùo
 = 
_´Ùo
;

134 
	}
}

149 
šlše
 
	$S‘AùiÚTy³
Ğ
AùiÚTy³
 
ty³
)

151 
_ty³
 = 
ty³
;

152 
	}
}

160 
šlše
 
	$G‘AùiÚTy³
Ğ
AùiÚTy³
 &
ty³
)

162 
ty³
 = 
_ty³
;

163 
	}
}

171 
šlše
 
	$S‘ID
Ğ
id
 )

173 
_id
 = 
id
;

174 
	}
}

182 
šlše
 
	$G‘ID
Ğ&
id
 )

184 
id
 = 
_id
 ;

185 
	}
}

193 
šlše
 
	$S‘Timeout
Ğ
timeout
 )

195 
_timeout
 = 
timeout
;

196 
	}
}

204 
šlše
 
	$G‘Timeout
Ğ&
timeout
 )

206 
timeout
 = 
_timeout
;

207 
	}
}

214 
šlše
 
	$S‘E¼no
Ğ
”r_no
 )

216 
_”ºo
 = 
”r_no
;

217 
	}
}

240 
šlše
 
	$G‘E¼no
Ğ&
”r_no
 )

242 
”r_no
 = 
_”ºo
;

243 
	}
}

250 
šlše
 
	$S‘TimeCo¡
Ğ
co¡
 )

252 
_time_co¡
 = 
co¡
;

253 
	}
}

260 
šlše
 
	$G‘TimeCo¡
Ğ&
co¡
 )

262 
co¡
 = 
_time_co¡
;

263 
	}
}

273 
G‘Bufãr
Ğ**
buf
, &
size
 );

280 
šlše
 
Rou‹Ty³
 
	$G‘Rou‹Ty³
()

282  
_rou‹_ty³
;

283 
	}
}

289 
HªdËS¹
();

290 
HªdËE¼Ü
Ğ
”r_no
 );

291 
	g´Ùeùed
:

297 
šlše
 
	$S‘F¿mePŒ
Ğ
CAsyncF¿me
 *
pF¿me
)

299 
_pF¿me
 = 
pF¿me
;

300 
	}
}

307 
šlše
 
	$S‘AùiÚS‘PŒ
Ğ
CAùiÚS‘
 *
pAùiÚS‘
 )

309 
_pAùiÚS‘
 = 
pAùiÚS‘
;

310 
	}
}

317 
šlše
 
	$S‘MsgPŒ
Ğ
CMsgBa£
 *
pMsg
 )

319 
_pMsg
 = 
pMsg
;

320 
	}
}

327 
šlše
 
	$S‘N‘HªdËr
(
CN‘HªdËr
 *
pHªdËr
)

329 
_pHªdËr
 = 
pHªdËr
;

330 
	}
}

336 
šlše
 
CN‘HªdËr
 *
	$G‘N‘HªdËr
()

338  
_pHªdËr
;

339 
	}
}

342 
	g´Ùeùed
:

347 
Re£tBufãr
();

354 
Ex‹ndBufãr
Ğ
Ãed_size
 );

356 
	g´Ùeùed
:

357 
HªdËEncode
();

358 
HªdËIÅut
ĞcÚ¡ *
buf
, 
Ën
);

359 
HªdËProûss
ĞcÚ¡ *
buf
, 
Ën
);

361 
HªdËS’dFšished
();

363 
boŞ
 
S’dOÆy
();

365 
	g´Ùeùed
:

366 
Rou‹Ty³
 
_rou‹_ty³
;

368 
CAùiÚS‘
 *
	g_pAùiÚS‘
;

369 
IAùiÚ
 *
	g_pAùiÚ
;

370 
CAsyncF¿me
 *
	g_pF¿me
;

371 
CMsgBa£
 *
	g_pMsg
;

372 
CN‘HªdËr
 *
	g_pHªdËr
;

374 
	g_
[
IP_BUF_SIZE
];

375 
PÜtTy³
 
	g_pÜt
;

377 
PrÙoTy³
 
	g_´Ùo
;

378 
AùiÚTy³
 
	g_ty³
;

380 
	g_id
;

381 
	g_timeout
;

382 
	g_”ºo
;

383 
	g_time_co¡
;

385 *
	g_buf
;

386 
	g_buf_size
;

387 
	g_»®_d©a_Ën
;

391 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/ActionSet.h

19 #iâdeà
__ACTION_SET_H__


20 
	#__ACTION_SET_H__


	)

22 
	~"CommDef.h
"

23 
	~<£t
>

25 
BEGIN_ASYNCFRAME_NS


27 
şass
 
	gIS‹
;

28 
şass
 
	gCAùiÚInfo
;

29 
şass
 
	gCAsyncF¿me
;

30 
şass
 
	gCMsgBa£
;

32 şas 
	cCAùiÚS‘


34 
	mpublic
:

35 
ä›nd
 
şass
 
CAùiÚInfo
;

36 
ä›nd
 
şass
 
	mCAsyncF¿me
;

38 
	m¡d
::
	t£t
< 
	tCAùiÚInfo
* > 
	tAùiÚS‘
;

39 
	mpublic
:

40 
CAùiÚS‘
(
CAsyncF¿me
 *
pF¿me
,

41 
IS‹
 *
pS‹
,

42 
CMsgBa£
 *
pMsg
);

43 ~
CAùiÚS‘
();

53 
AddAùiÚ
Ğ
CAùiÚInfo
 *
ai
 );

61 
šlše
 
	$G‘AùiÚNum
()

63  
_AùiÚS‘
.
	`size
();

72 
šlše
 
AùiÚS‘
 & 
	$G‘AùiÚS‘
()

74  
_AùiÚS‘
;

75 
	}
}

80 
CË¬AùiÚ
();

82 
	g´Ùeùed
:

83 
S¹AùiÚ
();

84 
HªdËFšished
Ğ
CAùiÚInfo
 * 
ai
 );

86 
IS‹
 *
G‘IS‹
();

87 
CMsgBa£
 *
G‘Msg
();

89 
	g´Ùeùed
:

90 
CAsyncF¿me
 *
_pF¿me
;

91 
IS‹
 *
	g_pS‹
;

92 
CMsgBa£
 *
	g_pMsg
;

93 
AùiÚS‘
 
	g_AùiÚS‘
;

94 
	g_fšished_couÁ
;

96 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/AntiParalActionInfo.h

19 #iâdeà
__ANTI_PARAL_ACTION_INFO_H__


20 
	#__ANTI_PARAL_ACTION_INFO_H__


	)

23 
	~<¡dšt.h
>

24 
	~"AùiÚInfo.h
"

27 
BEGIN_ASYNCFRAME_NS


29 şas 
	cCAÁiP¬®AùiÚInfo


30 : 
public
 
CAùiÚInfo


32 
public
:

38 
CAÁiP¬®AùiÚInfo
(
š™_buf_size
);

39 
	mvœtu®
 ~
CAÁiP¬®AùiÚInfo
();

49 
S‘Rou‹Key
(
modid
, 
cmdid
, 
št64_t
 
key
);

54 
G‘Rou‹Key
(&
modid
, &
cmdid
, 
št64_t
 &
key
);

60 
G‘Rou‹ID
Ğ&
modid
, &
cmdid
 );

71 
S‘Id—lHo¡
ĞcÚ¡ 
¡d
::
¡ršg
 &
id—l_
, 
PÜtTy³
 
id—l_pÜt
 );

83 
G‘Id—lHo¡
Ğ
¡d
::
¡ršg
 &
id—l_
, 
PÜtTy³
 &
id—l_pÜt
 );

85 
	m´Ùeùed
:

86 
_modid
;

87 
št64_t
 
	m_key
;

89 
	m_cmdid
;

91 
	m¡d
::
¡ršg
 
_id—l_
;

92 
PÜtTy³
 
	m_id—l_pÜt
;

96 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/AsyncFrame.h

19 #iâdeà
__ASYNC_FRAME_H__


20 
	#__ASYNC_FRAME_H__


	)

21 
	~<£rv”ba£.h
>

22 
	~<m­
>

24 
şass
 
	gCPŞËrUn™
;

25 
şass
 
	gCTim”Un™
;

27 
	~"PŒMgr.h
"

29 
BEGIN_ASYNCFRAME_NS


31 
şass
 
	gIS‹
;

32 
şass
 
	gCAùiÚS‘
;

33 
şass
 
	gCAùiÚInfo
;

34 
şass
 
	gCMsgBa£
;

35 
usšg
 
Çme¥aû
 
	g¥p
::
comm
;

37 
	#FRAME_LOG
 
	`G‘S”v”Ba£
()->
log_
.
LOG_P_ALL


	)

39 şas 
	cCAsyncF¿me


41 
	mpublic
:

42 
	eCBTy³
 {

43 
CBTy³_In™
 = 0,

44 
	mCBTy³_Fši
,

45 
	mCBTy³_Ov”lßd
,

46 
	mCBTy³_Num
 = 10,

49 (*
	tCBFunc
)(
	tCAsyncF¿me
*, 
	tCMsgBa£
*);

50 
¡d
::
	tm­
<, 
	tIS‹
*> 
	tS‹M­
;

52 
ä›nd
 
şass
 
CAùiÚS‘
;

53 
ä›nd
 
şass
 
CAùiÚInfo
;

55 
public
:

56 
CAsyncF¿me
* 
	`In¡ªû
 ();

57 
	`De¡roy
 ();

59 
	`CAsyncF¿me
();

60 ~
	`CAsyncF¿me
();

73 
	`In™F¿me
(
CS”v”Ba£
 *
pS”vBa£
,

74 
CPŞËrUn™
 *
pPŞËrUn™
,

75 
CTim”Un™
 *
pTim”Un™
,

76 
nP’dšgCÚnNum
 = 100);

92 
	`In™F¿me2
(
CS”v”Ba£
 *
pS”vBa£
,

93 
nP’dšgCÚnNum
 = 100,

94 
nOv”lßdLim™
 = 0,

95 
nL5Timeout
 = 100,

96 
nL5PÜt
 = 8888);

101 
	`FšiF¿me
();

115 
	`RegC®lback
(
CBTy³
 
ty³
, 
CBFunc
 
func
);

125 
	`AddS‹
Ğ
id
, 
IS‹
 *
pS‹
);

135 
	`Proûss
(
CMsgBa£
 *
pMsg
);

143 
šlše
 
CS”v”Ba£
 *
	$G‘S”v”Ba£
()

145  
_pS”vBa£
;

146 
	}
}

148 
	g´Ùeùed
:

150 
HªdËEncode
(
id
, 
CMsgBa£
 *
pMsgBa£
);

153 
HªdËProûss
(
IS‹
 *
pS‹
, 
CAùiÚS‘
 *
pAùiÚS‘
, 
CMsgBa£
 *
pMsg
);

156 
CË¬S‹M­
();

158 
	g´Ùeùed
:

159 
CAsyncF¿me
 *
_s_š¡ªû
;

160 
CS”v”Ba£
 *
	g_pS”vBa£
;

161 
	gCPŒMgr
<
	gCAùiÚS‘
, 
	gPŒTy³_New
> *
	g_a¥Œ_mgr
;

162 
	gCPŒMgr
<
	gCMsgBa£
, 
	gPŒTy³_New
> *
	g_msg±r_mgr
;

164 
CBFunc
 
	g_cbFunc
[
CBTy³_Num
];

166 
S‹M­
 
	g_m­S‹
;

168 
	g_nOv”lßdLim™
;

169 
	g_nReque¡CouÁ
;

171 
CAùiÚS‘
 *
	g_pN“dD–‘eAS
;

175 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/CommDef.h

20 #iâdeà
__COMMDEF_H__


21 
	#__COMMDEF_H__


	)

23 
	#BEGIN_ASYNCFRAME_NS
 
Çme¥aû
 
SPP_ASYNCFRAME
 {

	)

24 
	#END_ASYNCFRAME_NS
 }

	)

25 
	#USING_ASYNCFRAME_NS
 
usšg
 
Çme¥aû
 
SPP_ASYNCFRAME


	)

27 
	gBEGIN_ASYNCFRAME_NS


29 
	#IP_BUF_SIZE
 16

	)

30 
	#MIN_BUF_SIZE
 32

	)

38 
	mNoG‘Rou‹
,

39 
	mL5NÚS‹Rou‹
,

40 
	mL5S‹Rou‹
,

41 
	mL5AÁiP¬®Rou‹
,

42 }
	tRou‹Ty³
;

46 
	tPÜtTy³
;

49 
	e’umPrÙoTy³


51 
	mPrÙoTy³_Inv®id
 = -1,

52 
	mPrÙoTy³_TCP
,

53 
	mPrÙoTy³_UDP
,

54 }
	tPrÙoTy³
;

57 
	e’umCÚnTy³


59 
	mCÚnTy³_ShÜt
 = 0,

60 
	mCÚnTy³_LÚg
,

61 
	mCÚnTy³_LÚgW™hP’dšg
,

62 }
	tCÚnTy³
;

65 
	e’umAùiÚTy³


67 
	mAùiÚTy³_Inv®id
 = -1,

68 
	mAùiÚTy³_S’dRecv
,

69 
	mAùiÚTy³_S’dRecv_K“pAlive
,

70 
	mAùiÚTy³_S’dRecv_K“pAliveW™hP’dšg
,

71 
	mAùiÚTy³_S’dOÆy
,

72 
	mAùiÚTy³_S’dOÆy_K“pAlive
,

73 
	mAùiÚTy³_S’dOÆy_K“pAliveW™hP’dšg
,

74 
	mAùiÚTy³_S’dRecv_P¬®Ël
,

75 }
	tAùiÚTy³
;

77 
šlše
 cÚ¡ *
	$PrÙoTy³ToSŒ
(
PrÙoTy³
 
ty³
)

79 ifĞ
ty³
 =ğ
PrÙoTy³_TCP
 )

83 iàĞ
ty³
 =ğ
PrÙoTy³_UDP
 )

90 
	}
}

92 
šlše
 cÚ¡ *
	$CÚnTy³ToSŒ
(
CÚnTy³
 
ty³
)

94 ifĞ
ty³
 =ğ
CÚnTy³_ShÜt
 )

98 iàĞ
ty³
 =ğ
CÚnTy³_LÚg
 )

102 iàĞ
ty³
 =ğ
CÚnTy³_LÚgW™hP’dšg
 )

109 
	}
}

112 
šlše
 cÚ¡ *
	$AùiÚTy³ToSŒ
(
AùiÚTy³
 
ty³
)

114 ifĞ
ty³
 =ğ
AùiÚTy³_S’dRecv
 )

118 iàĞ
ty³
 =ğ
AùiÚTy³_S’dRecv_K“pAlive
 )

122 iàĞ
ty³
 =ğ
AùiÚTy³_S’dRecv_K“pAliveW™hP’dšg
 )

126 iàĞ
ty³
 =ğ
AùiÚTy³_S’dOÆy
 )

130 iàĞ
ty³
 =ğ
AùiÚTy³_S’dOÆy_K“pAlive
 )

134 iàĞ
ty³
 =ğ
AùiÚTy³_S’dOÆy_K“pAliveW™hP’dšg
 )

138 iàĞ
ty³
 =ğ
AùiÚTy³_S’dRecv_P¬®Ël
 )

145 
	}
}

148 
	eE¼ÜNo


150 
	mESucûss
 = 0,

151 
	mECÚÃù
 = -1,

152 
	mES’d
 = -2,

153 
	mERecv
 = -3,

154 
	mECheckPkg
 = -4,

155 
	mETimeout
 = -5,

156 
	mEC»©eSock
 = -6,

157 
	mEA‰achPŞËr
 = -7,

158 
	mEInv®idS‹
 = -8,

159 
	mEHªgup
 = -9,

160 
	mEShutdown
 = -10,

161 
	mEEncodeFa
 = -11,

162 
	mEInv®idRou‹Ty³
 = -12,

163 
	mEMsgTimeout
 = -13,

164 
	mEG‘Rou‹Fa
 = -14,

167 
šlše
 * 
	$¥³¼ToSŒ
(
”r
)

169 * 
”r¡r
[] =

188 
”r
 =ƒrr < 0 ? -err :ƒrr;

189 iàĞ
”r
 > ()(
”r¡r
) -1 )

194  
”r¡r
[
”r
];

195 
	}
}

197 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/IAction.h

20 #iâdeà
__IACTION_H__


21 
	#__IACTION_H__


	)

23 
	~"CommDef.h
"

25 
BEGIN_ASYNCFRAME_NS


27 
şass
 
	gCAsyncF¿me
;

28 
şass
 
	gCMsgBa£
;

30 şas 
	cIAùiÚ


32 
	mpublic
:

33 
vœtu®
 ~
	$IAùiÚ
() {}

49 
vœtu®
 
	`HªdËEncode
Ğ
CAsyncF¿me
 *
pF¿me
,

50 *
buf
,

51 &
Ën
,

52 
CMsgBa£
 *
pMsgBa£
) = 0;

64 
vœtu®
 
	`HªdËIÅut
Ğ
CAsyncF¿me
 *
pF¿me
,

65 cÚ¡ *
buf
,

66 
Ën
,

67 
CMsgBa£
 *
pMsgBa£
) = 0;

80 
vœtu®
 
	$HªdËProûss
Ğ
CAsyncF¿me
 *
pF¿me
,

81 cÚ¡ *
buf
,

82 
Ën
,

83 
CMsgBa£
 *
pMsgBa£
)

86 
	}
}

113 
vœtu®
 
	$HªdËE¼Ü
Ğ
CAsyncF¿me
 *
pF¿me
,

114 
”r_no
,

115 
CMsgBa£
 *
pMsgBa£
)

118 
	}
}

122 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/IState.h

19 #iâdeà
__ISTATE_H__


20 
	#__ISTATE_H__


	)

21 
	~"AùiÚS‘.h
"

24 
BEGIN_ASYNCFRAME_NS


26 
şass
 
	gCAsyncF¿me
;

27 
şass
 
	gCMsgBa£
;

29 şas 
	cIS‹


31 
	mpublic
:

32 
vœtu®
 ~
	$IS‹
() {}

47 
vœtu®
 
	`HªdËEncode
(
CAsyncF¿me
 *
pF¿me
,

48 
CAùiÚS‘
 *
pAùiÚS‘
,

49 
CMsgBa£
 *
pMsgBa£
) = 0;

62 
vœtu®
 
	`HªdËProûss
(
CAsyncF¿me
 *
pF¿me
,

63 
CAùiÚS‘
 *
pAùiÚS‘
,

64 
CMsgBa£
 *
pMsgBa£
) = 0;

65 
	}
};

67 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/MsgBase.h

19 #iâdeà
__MSGBASE_H__


20 
	#__MSGBASE_H__


	)

22 
	~<£rv”ba£.h
>

23 
	~<tcommu.h
>

24 
	~<¡ršg
>

25 
	~<s¡»am
>

26 
	~"CommDef.h
"

27 
	~<sys/time.h
>

29 
BEGIN_ASYNCFRAME_NS


32 
usšg
 
Çme¥aû
 
	g¥p
::
comm
;

33 
usšg
 
Çme¥aû
 
	gtba£
::
tcommu
;

36 şas 
	cCMsgBa£


38 
	mpublic
:

40 
public
:

41 
CMsgBa£
();

42 
	mvœtu®
 ~
CMsgBa£
();

47 
šlše
 
	$S‘S”v”Ba£
(
CS”v”Ba£
* 
¤vba£
)

49 
_¤vba£
 = 
¤vba£
;

55 
šlše
 
CS”v”Ba£
* 
	$G‘S”v”Ba£
()

57  
_¤vba£
;

58 
	}
}

64 
šlše
 
	$S‘TCommu
(
CTCommu
* 
commu
)

66 
_commu
 = 
commu
;

67 
	}
}

72 
šlše
 
CTCommu
* 
	$G‘TCommu
()

74  
_commu
;

75 
	}
}

80 
šlše
 
	$S‘Flow
(
æow
)

82 
_æow
 = 
æow
;

83 
	}
}

88 
šlše
 
	$G‘Flow
()

90  
_æow
;

91 
	}
}

99 
šlše
 
	$S‘InfoFÏg
(
boŞ
 
æag
)

101 
_šfo_æag
 = 
æag
;

102 
	}
}

110 
šlše
 
boŞ
 
	$G‘InfoFÏg
()

112  
_šfo_æag
;

113 
	}
}

120 
šlše
 
	$G‘D‘aInfo
(
¡d
::
¡ršg
 &
šfo
)

122 
šfo
 = 
_šfo
.
	`¡r
();

123 
	}
}

130 
Aµ’dInfo
(cÚ¡ *
¡r
);

137 
S’dToCl›Á
(
blob_ty³
 &
blob
);

147 
S‘MsgTimeout
(
timeout
);

155 
G‘MsgTimeout
();

165 
boŞ
 
CheckMsgTimeout
();

173 
G‘MsgCo¡
();

175 
	g´Ùeùed
:

176 
CS”v”Ba£
* 
_¤vba£
;

177 
CTCommu
* 
	g_commu
;

178 
	g_æow
;

180 
boŞ
 
	g_šfo_æag
;

181 
	g¡d
::
¡ršg¡»am
 
_šfo
;

183 
	g_msg_timeout
;

184 
timev®
 
	g_¡¬t_tv
;

187 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/NonStateActionInfo.h

19 #iâdeà
__NONSTATE_ACTION_INFO_H__


20 
	#__NONSTATE_ACTION_INFO_H__


	)

22 
	~"AùiÚInfo.h
"

25 
BEGIN_ASYNCFRAME_NS


27 şas 
	cCNÚS‹AùiÚInfo


28 : 
public
 
CAùiÚInfo


30 
public
:

36 
CNÚS‹AùiÚInfo
(
š™_buf_size
);

37 
	mvœtu®
 ~
CNÚS‹AùiÚInfo
();

46 
S‘Rou‹ID
(
modid
, 
cmdid
);

52 
G‘Rou‹ID
(&
modid
, &
cmdid
);

54 
	m´Ùeùed
:

55 
_modid
;

56 
	m_cmdid
;

60 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/PtrMgr.h

19 #iâdeà
__PTRMGR_H__


20 
	#__PTRMGR_H__


	)

21 
	~<£t
>

22 
	~"CommDef.h
"

24 
BEGIN_ASYNCFRAME_NS


28 
	mPŒTy³_New
 = 0,

29 
	mPŒTy³_M®loc
,

30 
	mPŒTy³_NewA¼ay
,

31 }
	tPŒTy³
;

37 
	g‹m¶©e
< 
ty³Çme
 
	gT
, 
PŒTy³
 
	gty³
>

38 şas 
	cCPŒMgr


40 
	mpublic
:

41 
ty³Çme
 
	t¡d
::
	t£t
<
	tT
*> 
	tPŒS‘
;

42 
ty³Çme
 
	tPŒS‘
::
	t™”©Ü
 
	tPŒS‘I‹r
;

43 
	mpublic
:

44 ~
	$CPŒMgr
()

46 
PŒS‘I‹r
 
™
 = 
_±r_£t
.
	`begš
();

47 ; 
™
 !ğ
_±r_£t
.
	`’d
(); it++ )

49 
	`R–—£
Ğ*
™
 );

52 
_±r_£t
.
	`ş—r
();

55 
	$Regi¡”
Ğ
T
* 
±r
 )

65 
_±r_£t
.
	`š£¹
(
±r
);

66 
	}
}

68 
	$Recyşe
Ğ
T
* 
±r
 , 
boŞ
 
Ãed_»Ëa£
 = 
Œue
)

70 ifĞ
Ãed_»Ëa£
 )

72 
	`R–—£
Ğ
±r
 );

74 
_±r_£t
.
	`”a£
Ğ
±r
 );

75 
	}
}

77 
	g´iv©e
:

78 
	$R–—£
Ğ
T
* 
±r
 )

80 ifĞ
ty³
 =ğ
PŒTy³_New
 )

82 
d–‘e
 
±r
;

84 ifĞ
ty³
 =ğ
PŒTy³_M®loc
 )

86 
	`ä“
(
±r
);

88 ifĞ
ty³
 =ğ
PŒTy³_NewA¼ay
 )

90 
d–‘e
 [] 
±r
;

93 
	}
}

95 
	g´iv©e
:

96 
PŒS‘
 
_±r_£t
;

100 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/SEXInterface.h

8 #iâdeà
__SEX_INTERFACE_H__


9 
	#__SEX_INTERFACE_H__


	)

11 
BEGIN_ASYNCFRAME_NS


20 
In™CÚnNumLim™
(cÚ¡ 
¡d
::
¡ršg
& 

, cÚ¡ 
pÜt
, cÚ¡ 
lim™
);

30 
In™CÚnNumLim™
(cÚ¡ 
modid
, cÚ¡ 
cmdid
, cÚ¡ 
lim™
);

33 * 
G‘Cu¼’tAùiÚInfo
();

36 
S‘Cu¼’tSeq
(
ušt64_t
 
£q
);

37 
ušt64_t
 
G‘Cu¼’tSeq
();

39 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/StateActionInfo.h

19 #iâdeà
__STATE_ACTION_INFO_H__


20 
	#__STATE_ACTION_INFO_H__


	)

22 
	~<¡dšt.h
>

23 
	~"AùiÚInfo.h
"

26 
BEGIN_ASYNCFRAME_NS


28 şas 
	cCS‹AùiÚInfo


29 : 
public
 
CAùiÚInfo


31 
public
:

37 
CS‹AùiÚInfo
(
š™_buf_size
);

38 
	mvœtu®
 ~
CS‹AùiÚInfo
();

48 
S‘Rou‹Key
(
modid
, 
št64_t
 
key
, 
št32_t
 
funid
);

53 
G‘Rou‹Key
(&
modid
, 
št64_t
 &
key
, 
št32_t
 &
funid
);

60 
S‘CmdID
Ğ
cmdid
 );

66 
G‘Rou‹ID
Ğ&
modid
, &
cmdid
 );

68 
	m´Ùeùed
:

69 
_modid
;

70 
št64_t
 
	m_key
;

71 
št32_t
 
	m_funid
;

73 
	m_cmdid
;

77 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/asyn_api.h

1 #iâdeà
_ASYN_API_H


2 
	#_ASYN_API_H


	)

5 
	#RESERVED_SESSION_ID_SUP
 500

	)

7 
	#RESERVED_SESSION_ID_INF
 1

	)

11 
	eSESSION_EVENT


13 
EVENT_NORMAL
 = 1,

14 
EVENT_DEFAULT_PROC
 = 2,

15 
EVENT_SPECIAL_TASK_PROC
 = 3,

16 
EVENT_SHUTDOWN_COM
 = 4,

17 
EVENT_TIMEOUT
 = 5,

18 
EVENT_INPUT_ERR
 = 6,

19 
EVENT_DETACH
 = 7,

20 
EVENT_SYS_QUIT
 = 8,

21 
EVENT_OVERACCESS
 = 9,

22 
EVENT_SEND_FAIL
 = 10,

23 
EVENT_SEND_SUCC
 = 11

26 
	eINIT_CONSTANT


28 
NO_COUNTER_LIMIT
 = -1,

29 
NO_TIME_LIMIT
 = -1

32 
	eADDR_CMP_ENUM


34 
ADDR_EQ
 = 1,

35 
ADDR_LT
 = 2,

36 
ADDR_GT
 = 3,

37 
ADDR_LE
 = 4,

38 
ADDR_GE
 = 5,

39 
ADDR_TYPE_MISMATCH
 = 6

42 
	eADDR_TYPE


44 
ADDR_CHAR
 = 1,

45 
ADDR_INT
 = 2,

46 
ADDR_SHORT
 = 3,

47 
ADDR_STRING
 = 4

51 
	saddrun™
 {

52 
ty³
;

53 
İt
;

54 
Ën
;

56 
ch1
;

57 
s1
;

58 
™1
;

59 
buf
[0];

60 } 
v®
;

62 } 
__©Œibu‹__
((
®igÃd
(4)));

67 
	#ADDR_BUF_PAD
 ((*)((
addrun™
))-(×ddrun™*)0)->
v®
.
buf
)

	)

69 
	saddr£t
 {

70 
couÁ
;

71 
addrun™
 **
un™
;

75 
	eAPI_RET_CODE


77 
API_RET_SUCCESS
 = 0,

78 
API_RET_ERR
 = -1,

79 
API_ILLEGAL_PARA
 = -2,

80 
API_REG_FAIL
 = -3,

81 
API_RET_SUCCESS_AND_DETACH
 = -4

86 (*
»cv_func
)(
	tev’t
, 
	t£ssiÚId
, * 
	tcomm_·¿m
, * 
	tbuf
, 
	tËn
);

88 (*
šput_func
)(* 
	tšput_·¿m
, 
	t£ssiÚId
 , * 
	tblob
, * 
	t£rv”
);

90 (*
´oûss_func
)(
	tev’t
, 
	t£ssiÚId
, * 
	t´oc_·¿m
, * 
	td©a_blob
, * 
	t£rv”
);

92 (*
·ck_cb_func
)(
	tev’t
, 
	t£ssiÚId
, * 
	tglob®_·¿m
, * 
	t·ckage_·¿m
, * 
	td©a_blob
, * 
	t£rv”
);

95 (*
¿w_hªdË_func
)(
	t£ssiÚId
, * 
	tfd
, * 
	t·¿m
, * 
	t£rv”
);

97 (*
time_sk_func
)(
	t£ssiÚId
, * 
	tsk_·¿
, * 
	t£rv”
);

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/atomic.h

1 #iâdeà
__ATOMIC__T


2 
	#__ATOMIC__T


	)

4 
	~<¡dšt.h
>

6 #ià
__GNUC__
 < 4

7 
	~"©omic_asm.h
"

9 
	~"©omic_gcc.h
"

12 #ià
__WORDSIZE
==64

13 
	#HAS_ATOMIC8
 1

	)

14 
	~"©omic_gcc8.h
"

15 
	~"my©omic_gcc8.h
"

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/atomic_asm.h

1 #iâdeà
__ARCH_I386_ATOMIC__


2 
	#__ARCH_I386_ATOMIC__


	)

4 
	~<sys/cdefs.h
>

5 
__BEGIN_DECLS


15 vŞ©
	mcouÁ”
;

16 } 
	t©omic_t
;

18 
	#ATOMIC_INIT
(
i
è{ (iè}

	)

26 
	#©omic_»ad
(
v
è((v)->
couÁ”
)

	)

35 
	#©omic_£t
(
v
,
i
è(((v)->
couÁ”
èğ(i))

	)

37 
__šlše__
 
	$©omic_ş—r
(
©omic_t
 *
v
)

39 
i
;

40 
__asm__
 
	`__vŞ©e__
(

43 : "=&r"(
i
)

44 : "m"(
v
->
couÁ”
));

45  
i
;

46 
	}
}

55 
__šlše__
 
	$©omic_add
(
i
, 
©omic_t
 *
v
)

57 
__i
 = 
i
;

58 
__asm__
 
	`__vŞ©e__
(

60 : "ô"(
i
)

61 : "m"(
v
->
couÁ”
), "0"(
i
));

62  
__i
;

63 
	}
}

72 
__šlše__
 
	$©omic_sub
(
i
, 
©omic_t
 *
v
)

74  
	`©omic_add
(-
i
, 
v
);

75 
	}
}

86 
__šlše__
 
	$©omic_sub_ªd_‹¡
(
i
, 
©omic_t
 *
v
)

88 
c
;

90 
__asm__
 
	`__vŞ©e__
(

92 : "=m"(
v
->
couÁ”
), "=qm"(
c
)

93 : "œ"(
i
), "m"(
v
->
couÁ”
) : "memory");

94  
c
;

95 
	}
}

103 
__šlše__
 
	$©omic_šc
(
©omic_t
 *
v
)

105 
__asm__
 
	`__vŞ©e__
(

107 : "=m"(
v
->
couÁ”
)

108 : "m"(
v
->
couÁ”
));

109 
	}
}

117 
__šlše__
 
	$©omic_dec
(
©omic_t
 *
v
)

119 
__asm__
 
	`__vŞ©e__
(

121 : "=m"(
v
->
couÁ”
)

122 : "m"(
v
->
couÁ”
));

123 
	}
}

133 
__šlše__
 
	$©omic_dec_ªd_‹¡
(
©omic_t
 *
v
)

135 
c
;

137 
__asm__
 
	`__vŞ©e__
(

139 : "=m"(
v
->
couÁ”
), "=qm"(
c
)

140 : "m"(
v
->
couÁ”
) : "memory");

141  
c
 != 0;

142 
	}
}

152 
__šlše__
 
	$©omic_šc_ªd_‹¡
(
©omic_t
 *
v
)

154 
c
;

156 
__asm__
 
	`__vŞ©e__
(

158 : "=m"(
v
->
couÁ”
), "=qm"(
c
)

159 : "m"(
v
->
couÁ”
) : "memory");

160  
c
 != 0;

161 
	}
}

172 
__šlše__
 
	$©omic_add_Ãg©ive
(
i
, 
©omic_t
 *
v
)

174 
c
;

176 
__asm__
 
	`__vŞ©e__
(

178 : "=m"(
v
->
couÁ”
), "=qm"(
c
)

179 : "œ"(
i
), "m"(
v
->
couÁ”
) : "memory");

180  
c
;

181 
	}
}

190 
__šlše__
 
	$©omic_add_»tuº
(
i
, 
©omic_t
 *
v
)

192 
__i
 = 
i
;

193 
__asm__
 
	`__vŞ©e__
(

195 : "ô"(
i
)

196 : "m"(
v
->
couÁ”
), "0"(
i
));

197  
i
 + 
__i
;

198 
	}
}

200 
__šlše__
 
	$©omic_sub_»tuº
(
i
, 
©omic_t
 *
v
)

202  
	`©omic_add_»tuº
(-
i
, 
v
);

203 
	}
}

205 
	#©omic_šc_»tuº
(
v
è(
	`©omic_add_»tuº
(1,v))

	)

206 
	#©omic_dec_»tuº
(
v
è(
	`©omic_sub_»tuº
(1,v))

	)

209 
	#©omic_ş—r_mask
(
mask
, 
addr
) \

210 
__asm__
 
	`__vŞ©e__
("lock;‡ndl %0,%1" \

211 : : "r" (~(
mask
)),"m" (*
addr
è: "memÜy")

	)

213 
	#©omic_£t_mask
(
mask
, 
addr
) \

214 
__asm__
 
	`__vŞ©e__
("lock; orl %0,%1" \

215 : : "r" (
mask
),"m" (*(
addr
)è: "memÜy")

	)

217 
	g__END_DECLS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/atomic_asm8.h

1 #iâdeà
__ARCH_I386_ATOMIC8__


2 
	#__ARCH_I386_ATOMIC8__


	)

4 
	~<sys/cdefs.h
>

5 
__BEGIN_DECLS


15 vŞ©
št64_t
 
	mcouÁ”
;

16 } 
	t©omic8_t
;

18 
	#ATOMIC_INIT
(
i
è{ (iè}

	)

26 
__šlše__
 
št64_t
 
	$©omic8_»ad
(
©omic8_t
 *
v
)

28 
št64_t
 
r
;

29 
__asm__
 
	`__vŞ©e__
(

35 : "=A"(
r
)

36 : "o"(
v
->
couÁ”
)

38  
r
;

39 
	}
}

48 
__šlše__
 
	$©omic8_£t
(
©omic8_t
 *
v
, 
št64_t
 
i
)

50 

 = 
i
 & 0xFFFFFFFF;

51 
ih
 = 
i
 >> 32;

53 *
v2
 = (*)
v
;

54 
__asm__
 
	`__vŞ©e__
(

59 : "+o"(
v2
[0]), "+o"(v2[1])

60 : "b"(

), "c"(
ih
)

63 
__asm__
 
	`__vŞ©e__
(

67 : "+o"(
v
->
couÁ”
)

68 : "A"(
v
->
couÁ”
), "b"(

), "c"(
ih
)

71 
	}
}

80 
__šlše__
 
št64_t
 
	$©omic8_ş—r
(
©omic8_t
 *
v
)

82 
št64_t
 
r
;

83 
__asm__
 
	`__vŞ©e__
(

88 : "+o"(
v
->
couÁ”
), "=A"(
r
)

89 : "A"(
v
->
couÁ”
)

91  
r
;

92 
	}
}

101 
__šlše__
 
št64_t
 
	$©omic8_add
(
št64_t
 
i
, 
©omic8_t
 *
v
)

103 

 = 
i
 & 0xFFFFFFFF;

104 
ih
 = 
i
 >> 32;

106 *
v2
 = (*)
v
;

107 
__asm__
 
	`__vŞ©e__
(

116 : "+o"(
v2
[0]), "+o"(v2[1])

117 : "g"(

), "g"(
ih
)

120 
št64_t
 
r
;

121 
__asm__
 
	`__vŞ©e__
(

128 : "+o"(
v
->
couÁ”
), "=A"(
r
)

129 : "A"(
v
->
couÁ”
), "g"(

), "g"(
ih
)

131  
r
;

133 
	}
}

142 
__šlše__
 
št64_t
 
	$©omic8_add_»tuº
(
št64_t
 
i
, 
©omic8_t
 *
v
)

144 
št64_t
 
r
;

145 

 = 
i
 & 0xFFFFFFFF;

146 
ih
 = 
i
 >> 32;

149 *
v2
 = (*)
v
;

150 
__asm__
 
	`__vŞ©e__
(

161 : "+o"(
v2
[0]), "+o"(v2[1]), "=&A"(
r
)

162 : "g"(

), "g"(
ih
)

165 
__asm__
 
	`__vŞ©e__
(

174 : "+o"(
v
->
couÁ”
), "=A"(
r
)

175 : "A"(
v
->
couÁ”
), "g"(

), "g"(
ih
)

178  
r
;

179 
	}
}

188 
__šlše__
 
št64_t
 
	$©omic8_sub
(
št64_t
 
i
, 
©omic8_t
 *
v
)

190  
	`©omic8_add
(-
i
, 
v
);

191 
	}
}

202 
__šlše__
 
	$©omic8_sub_ªd_‹¡
(
i
, 
©omic8_t
 *
v
)

204  
	`©omic8_add_»tuº
(-
i
, 
v
) == 0;

205 
	}
}

213 
__šlše__
 
št64_t
 
	$©omic8_šc
(
©omic8_t
 *
v
)

215  
	`©omic8_add
(1, 
v
);

216 
	}
}

224 
__šlše__
 
št64_t
 
	$©omic8_dec
(
©omic8_t
 *
v
)

226  
	`©omic8_add
(-1, 
v
);

227 
	}
}

237 
__šlše__
 
	$©omic8_dec_ªd_‹¡
(
©omic8_t
 *
v
)

239  
	`©omic8_add_»tuº
(-1, 
v
) == 0;

240 
	}
}

250 
__šlše__
 
	$©omic8_šc_ªd_‹¡
(
©omic8_t
 *
v
)

252  
	`©omic8_add_»tuº
(1, 
v
) == 0;

253 
	}
}

264 
__šlše__
 
	$©omic8_add_Ãg©ive
(
št64_t
 
i
, 
©omic8_t
 *
v
)

266  
	`©omic8_add_»tuº
(
i
, 
v
) < 0;

267 
	}
}

269 
__šlše__
 
št64_t
 
	$©omic8_sub_»tuº
(
št64_t
 
i
, 
©omic8_t
 *
v
)

271  
	`©omic8_add_»tuº
(-
i
, 
v
);

272 
	}
}

274 
	#©omic8_šc_»tuº
(
v
è(
	`©omic8_add_»tuº
(1,v))

	)

275 
	#©omic8_dec_»tuº
(
v
è(
	`©omic8_sub_»tuº
(1,v))

	)

277 
	g__END_DECLS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/atomic_gcc.h

1 #iâdeà
__ARCH_I386_ATOMIC__


2 
	#__ARCH_I386_ATOMIC__


	)

4 
	~<sys/cdefs.h
>

5 
__BEGIN_DECLS


12 vŞ©
	t©omic_t
;

14 
	#ATOMIC_INIT
(
i
è{ (iè}

	)

22 
	#©omic_»ad
(
v
è(*(v))

	)

31 
	#©omic_£t
(
v
,
i
è(*(vèğ(i))

	)

33 
__šlše__
 
	$©omic_ş—r
(
©omic_t
 *
v
)

35  
	`__sync_ãtch_ªd_ªd
(
v
, 0);

36 
	}
}

45 
__šlše__
 
	$©omic_add
(
i
, 
©omic_t
 *
v
)

47  
	`__sync_ãtch_ªd_add
(
v
, 
i
);

48 
	}
}

57 
__šlše__
 
	$©omic_sub
(
i
, 
©omic_t
 *
v
)

59  
	`__sync_ãtch_ªd_sub
(
v
, 
i
);

60 
	}
}

71 
__šlše__
 
	$©omic_sub_ªd_‹¡
(
i
, 
©omic_t
 *
v
)

73  
	`__sync_sub_ªd_ãtch
(
v
, 
i
) == 0;

74 
	}
}

82 
__šlše__
 
	$©omic_šc
(
©omic_t
 *
v
)

84  
	`__sync_ãtch_ªd_add
(
v
, 1);

85 
	}
}

93 
__šlše__
 
	$©omic_dec
(
©omic_t
 *
v
)

95  
	`__sync_ãtch_ªd_sub
(
v
, 1);

96 
	}
}

106 
__šlše__
 
	$©omic_dec_ªd_‹¡
(
©omic_t
 *
v
)

108  
	`__sync_sub_ªd_ãtch
(
v
, 1) == 0;

109 
	}
}

119 
__šlše__
 
	$©omic_šc_ªd_‹¡
(
©omic_t
 *
v
)

121  
	`__sync_add_ªd_ãtch
(
v
, 1) == 0;

122 
	}
}

133 
__šlše__
 
	$©omic_add_Ãg©ive
(
i
, 
©omic_t
 *
v
)

135  
	`__sync_add_ªd_ãtch
(
v
, 
i
) < 0;

136 
	}
}

145 
__šlše__
 
	$©omic_add_»tuº
(
i
, 
©omic_t
 *
v
)

147  
	`__sync_add_ªd_ãtch
(
v
, 
i
);

148 
	}
}

150 
__šlše__
 
	$©omic_sub_»tuº
(
i
, 
©omic_t
 *
v
)

152  
	`__sync_sub_ªd_ãtch
(
v
, 
i
);

153 
	}
}

155 
	#©omic_šc_»tuº
(
v
è(
	`©omic_add_»tuº
(1,v))

	)

156 
	#©omic_dec_»tuº
(
v
è(
	`©omic_sub_»tuº
(1,v))

	)

158 
	g__END_DECLS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/atomic_gcc8.h

1 #iâdeà
__ARCH_I386_ATOMIC8__


2 
	#__ARCH_I386_ATOMIC8__


	)

4 
	#HAS_ATOMIC8
 1

	)

6 
	~<sys/cdefs.h
>

7 
__BEGIN_DECLS


14 vŞ©
	tšt64_t
 
	t©omic8_t
;

16 
	#ATOMIC_INIT
(
i
è{ (iè}

	)

24 #ià
__WORDSIZE
==64

25 
	#©omic8_»ad
(
v
è(*(v))

	)

27 
	#©omic8_»ad
(
v
è
	`©omic8_add_»tuº
(0,v)

	)

37 #ià
__WORDSIZE
==64

38 
	#©omic8_£t
(
v
,
i
è(*(vèğ(i))

	)

40 
	#©omic8_£t
(
v
,
i
è(*(vèğ(i))

	)

43 
__šlše__
 
št64_t
 
	$©omic8_ş—r
(
©omic8_t
 *
v
)

45  
	`__sync_ãtch_ªd_ªd
(
v
, 0);

46 
	}
}

54 
__šlše__
 
št64_t
 
	$©omic8_add
(
št64_t
 
i
, 
©omic8_t
 *
v
)

56  
	`__sync_ãtch_ªd_add
(
v
, 
i
);

57 
	}
}

66 
__šlše__
 
št64_t
 
	$©omic8_sub
(
št64_t
 
i
, 
©omic8_t
 *
v
)

68  
	`__sync_ãtch_ªd_sub
(
v
, 
i
);

69 
	}
}

80 
__šlše__
 
	$©omic8_sub_ªd_‹¡
(
št64_t
 
i
, 
©omic8_t
 *
v
)

82  
	`__sync_sub_ªd_ãtch
(
v
, 
i
) == 0;

83 
	}
}

91 
__šlše__
 
št64_t
 
	$©omic8_šc
(
©omic8_t
 *
v
)

93  
	`__sync_ãtch_ªd_add
(
v
, 1);

94 
	}
}

102 
__šlše__
 
št64_t
 
	$©omic8_dec
(
©omic8_t
 *
v
)

104  
	`__sync_ãtch_ªd_sub
(
v
, 1);

105 
	}
}

115 
__šlše__
 
	$©omic8_dec_ªd_‹¡
(
©omic8_t
 *
v
)

117  
	`__sync_sub_ªd_ãtch
(
v
, 1) == 0;

118 
	}
}

128 
__šlše__
 
	$©omic8_šc_ªd_‹¡
(
©omic8_t
 *
v
)

130  
	`__sync_add_ªd_ãtch
(
v
, 1) == 0;

131 
	}
}

142 
__šlše__
 
	$©omic8_add_Ãg©ive
(
št64_t
 
i
, 
©omic8_t
 *
v
)

144  
	`__sync_add_ªd_ãtch
(
v
, 
i
) < 0;

145 
	}
}

154 
__šlše__
 
št64_t
 
	$©omic8_add_»tuº
(
št64_t
 
i
, 
©omic8_t
 *
v
)

156  
	`__sync_add_ªd_ãtch
(
v
, 
i
);

157 
	}
}

159 
__šlše__
 
št64_t
 
	$©omic8_sub_»tuº
(
št64_t
 
i
, 
©omic8_t
 *
v
)

161  
	`__sync_sub_ªd_ãtch
(
v
, 
i
);

162 
	}
}

164 
	#©omic8_šc_»tuº
(
v
è(
	`©omic8_add_»tuº
(1,v))

	)

165 
	#©omic8_dec_»tuº
(
v
è(
	`©omic8_sub_»tuº
(1,v))

	)

167 
	g__END_DECLS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/list.h

1 #iâdeà
_H_OBJLIST_H_


2 
	#_H_OBJLIST_H_


	)

3 
	~<sys/cdefs.h
>

4 
	~<¡ddef.h
>

6 
Çme¥aû
 
	g¥p
 {

7 
Çme¥aû
 
	gcomm
 {

9 
	g__BEGIN_DECLS


19 
	#__butš_´eãtch
(
x
,
y
,
z
è()1

	)

20 
	sli¡_h—d
 {

21 
li¡_h—d
 *
	gÃxt
, *
	g´ev
;

23 
li¡_h—d
 
	tli¡_h—d_t
;

25 
	#LIST_HEAD_INIT
(
Çme
è{ &Òame), &Òameè}

	)

27 
	#LIST_HEAD
(
Çme
) \

28 
li¡_h—d
 
Çme
 = 
	`LIST_HEAD_INIT
Òame)

	)

30 
	#INIT_LIST_HEAD
(
±r
) do { \

31 (
±r
)->
Ãxt
 = (±r); (±r)->
´ev
 = (ptr); \

32 } 0)

	)

40 
šlše
 
__li¡_add
(
li¡_h—d
 *
p
,

41 
li¡_h—d
 *
´ev
,

42 
li¡_h—d
 *
Ãxt
)

44 
	gÃxt
->
	g´ev
 = 
p
;

45 
	gp
->
	gÃxt
 = 
Ãxt
;

46 
	gp
->
	g´ev
 = 
´ev
;

47 
	g´ev
->
	gÃxt
 = 
p
;

58 
šlše
 
li¡_add
(
li¡_h—d
 *
p
, li¡_h—d *
h—d
)

60 
__li¡_add
(
p
, 
h—d
, h—d->
Ãxt
);

70 
šlše
 
li¡_add_
(
li¡_h—d
 *
p
, li¡_h—d *
h—d
)

72 
__li¡_add
(
p
, 
h—d
->
´ev
, head);

82 
šlše
 
__li¡_d–
(
li¡_h—d
 *
´ev
, li¡_h—d *
Ãxt
)

84 
	gÃxt
->
	g´ev
 = 
´ev
;

85 
	g´ev
->
	gÃxt
 = 
Ãxt
;

93 
šlše
 
li¡_d–
(
li¡_h—d
 *
’Œy
)

95 
__li¡_d–
(
’Œy
->
´ev
,ƒÁry->
Ãxt
);

96 
	g’Œy
->
	gÃxt
 = 0;

97 
	g’Œy
->
	g´ev
 = 0;

104 
šlše
 
li¡_d–_š™
(
li¡_h—d
 *
’Œy
)

106 
__li¡_d–
(
’Œy
->
´ev
,ƒÁry->
Ãxt
);

107 
INIT_LIST_HEAD
(
’Œy
);

115 
šlše
 
li¡_move
(
li¡_h—d
 *
li¡
, li¡_h—d *
h—d
)

117 
__li¡_d–
(
li¡
->
´ev
,†i¡->
Ãxt
);

118 
li¡_add
(
li¡
, 
h—d
);

125 
šlše
 
li¡_move_
(
li¡_h—d
 *
li¡
,

126 
li¡_h—d
 *
h—d
)

128 
__li¡_d–
(
li¡
->
´ev
,†i¡->
Ãxt
);

129 
li¡_add_
(
li¡
, 
h—d
);

136 
šlše
 
li¡_em±y
(cÚ¡ 
li¡_h—d
 *
h—d
)

138  
	gh—d
->
	gÃxt
 =ğ
h—d
;

141 
šlše
 
__li¡_¥liû
(
li¡_h—d
 *
li¡
,

142 
li¡_h—d
 *
h—d
)

144 
li¡_h—d
 *
	gfœ¡
 = 
li¡
->
Ãxt
;

145 
li¡_h—d
 *
	gÏ¡
 = 
li¡
->
´ev
;

146 
li¡_h—d
 *
	g©
 = 
h—d
->
Ãxt
;

148 
	gfœ¡
->
	g´ev
 = 
h—d
;

149 
	gh—d
->
	gÃxt
 = 
fœ¡
;

151 
	gÏ¡
->
	gÃxt
 = 
©
;

152 
	g©
->
	g´ev
 = 
Ï¡
;

160 
šlše
 
li¡_¥liû
(
li¡_h—d
 *
li¡
, li¡_h—d *
h—d
)

162 ià(!
li¡_em±y
(
li¡
))

163 
__li¡_¥liû
(
li¡
, 
h—d
);

173 
šlše
 
li¡_¥liû_š™
(
li¡_h—d
 *
li¡
,

174 
li¡_h—d
 *
h—d
)

176 ià(!
li¡_em±y
(
li¡
)) {

177 
__li¡_¥liû
(
li¡
, 
h—d
);

178 
INIT_LIST_HEAD
(
li¡
);

182 #iâdeà
off£tof


183 #ià
__GNUC__
 >= 4

184 
	#off£tof
(
ty³
, 
memb”
è
	`__butš_off£tof
 (ty³, memb”)

	)

186 
	#off£tof
(
ty³
, 
memb”
è()(&(Ñy³ *)0)->memb”)

	)

196 
	#li¡_’Œy
(
±r
, 
ty³
, 
memb”
) \

197 ((
ty³
 *)((*)(
±r
)-
	`off£tof
Ñy³, 
memb”
)))

	)

204 
	#li¡_fÜ_—ch
(
pos
, 
h—d
) \

205 
pos
 = (
h—d
)->
Ãxt
, 
	`__butš_´eãtch
(pos->next,0,1); \

206 
pos
 !ğ(
h—d
); \

207 
pos
 =…os->
Ãxt
, 
	`__butš_´eãtch
(pos->next,0,1)) \

208 

	)

209 
	#__li¡_fÜ_—ch
(
pos
, 
h—d
) \

210 
pos
 = (
h—d
)->
Ãxt
;…o !ğ(h—d);…o ğpos->Ãxt)

	)

216 
	#li¡_fÜ_—ch_´ev
(
pos
, 
h—d
) \

217 
pos
 = (
h—d
)->
´ev
, 
	`__butš_´eãtch
(pos->prev,0,1); \

218 
pos
 !ğ(
h—d
); \

219 
pos
 =…os->
´ev
, 
	`__butš_´eãtch
Õos->´ev,0,1))

	)

221 
	#__li¡_fÜ_—ch_´ev
(
pos
, 
h—d
) \

222 
pos
 = (
h—d
)->
´ev
;…os != (head); \

223 
pos
 =…os->
´ev
)

	)

231 
	#li¡_fÜ_—ch_§ã
(
pos
, 
n
, 
h—d
) \

232 
pos
 = (
h—d
)->
Ãxt
, 
n
 =…os->next;…os != (head); \

233 
pos
 = 
n
,‚ =…os->
Ãxt
)

	)

241 
	#li¡_fÜ_—ch_’Œy
(
pos
, 
h—d
, 
memb”
) \

242 
pos
 = 
	`li¡_’Œy
((
h—d
)->
Ãxt
, 
	`ty³of
(*pos), 
memb”
), \

243 
	`__butš_´eãtch
(
pos
->
memb”
.
Ãxt
,0,1); \

244 &
pos
->
memb”
 !ğ(
h—d
); \

245 
pos
 = 
	`li¡_’Œy
Õos->
memb”
.
Ãxt
, 
	`ty³of
(*pos), member), \

246 
	`__butš_´eãtch
(
pos
->
memb”
.
Ãxt
,0,1))

	)

249 
__END_DECLS


252 şas 
	cCLi¡H—d


254 
	gpublic
:

255 
li¡_h—d
 
objli¡
;

257 
In™Li¡
() {

258 
INIT_LIST_HEAD
(&
objli¡
);

260 
Re£tLi¡
() {

261 
li¡_d–_š™
(&
objli¡
);

263 
Li¡Em±y
() const {

264  
li¡_em±y
(&
objli¡
);

266 
CLi¡H—d
 *
Li¡Next
() {

267  
li¡_’Œy
(
objli¡
.
Ãxt
, 
CLi¡H—d
, objlist);

269 
CLi¡H—d
 *
Li¡P»v
() {

270  
li¡_’Œy
(
objli¡
.
´ev
, 
CLi¡H—d
, objlist);

273 
Li¡Add
(
CLi¡H—d
 &
n
) {

274 
li¡_add
(&
objli¡
, &
n
.objlist);

276 
Li¡Add
(
CLi¡H—d
 *
n
) {

277 
li¡_add
(&
objli¡
, &
n
->objlist);

279 
Li¡AddTa
(
CLi¡H—d
 &
n
) {

280 
li¡_add_
(&
objli¡
, &
n
.objlist);

282 
Li¡AddTa
(
CLi¡H—d
 *
n
) {

283 
li¡_add_
(&
objli¡
, &
n
->objlist);

285 
Li¡D–
() {

286 
Re£tLi¡
();

288 
Li¡Move
(
CLi¡H—d
 &
n
) {

289 
li¡_move
(&
objli¡
, &
n
.objlist);

291 
Li¡Move
(
CLi¡H—d
 *
n
) {

292 
li¡_move
(&
objli¡
, &
n
->objlist);

294 
Li¡MoveTa
(
CLi¡H—d
 &
n
) {

295 
li¡_move_
(&
objli¡
, &
n
.objlist);

297 
Li¡MoveTa
(
CLi¡H—d
 *
n
) {

298 
li¡_move_
(&
objli¡
, &
n
->objlist);

300 
F»eLi¡
() {

301 !
Li¡Em±y
())

302 
Li¡Next
()->
Re£tLi¡
();

306 
	g‹m¶©e
<
şass
 
	gT
>

307 şas 
	cCLi¡Objeù
: 
public
 
CLi¡H—d


309 
public
:

310 
CLi¡Objeù
() {

311 
In™Li¡
();

313 ~
CLi¡Objeù
() {

314 
Re£tLi¡
();

316 
	gCLi¡Objeù
<
	gT
> *
Li¡Next
() {

317  (
	gCLi¡Objeù
<
	gT
>*)
	gCLi¡H—d
::
Li¡Next
();

319 
	gCLi¡Objeù
<
	gT
> *
Li¡P»v
() {

320  (
	gCLi¡Objeù
<
	gT
>*)
	gCLi¡H—d
::
Li¡P»v
();

323 
T
 *
Li¡OwÃr
() {

324  (
	gT
 *)
	gthis
;

326 
T
 *
NextOwÃr
() {

327  
Li¡Next
()->
Li¡OwÃr
();

329 
T
 *
P»vOwÃr
() {

330  
Li¡P»v
()->
Li¡OwÃr
();

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/myatomic_gcc8.h

19 #iâdeà
_MYATOMIC_GCC8_h


20 
	#_MYATOMIC_GCC8_h


	)

22 
	#©omic64_t
 
©omic8_t


	)

23 
	#©omic64_»ad
 
©omic8_»ad


	)

24 
	#©omic64_£t
 
©omic8_£t


	)

25 
	#©omic64_šc
 
©omic8_šc


	)

26 
	#©omic64_add
 
©omic8_add


	)

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/serverbase.h

1 #iâdeà
_SPP_COMM_SERVERBASE_H_


2 
	#_SPP_COMM_SERVERBASE_H_


	)

3 
	~<sys/»sourû.h
>

4 
	~<uni¡d.h
>

5 
	~<sigÇl.h
>

6 
	~"og.h
"

7 
	~"t¡©.h
"

8 
	~"rocmÚ.h
"

10 #ià!
__GLIBC_PREREQ
(2, 3)

11 
	#__butš_ex³ù
(
x
, 
ex³ùed_v®ue
è(x)

	)

13 #iâdeà
lik–y


14 
	#lik–y
(
x
è
	`__butš_ex³ù
(!!(x), 1)

	)

16 #iâdeà
uÆik–y


17 
	#uÆik–y
(
x
è
	`__butš_ex³ù
(!!(x), 0)

	)

20 
	#RUN_FLAG_QUIT
 0x01

	)

21 
	#RUN_FLAG_RELOAD
 0x02

	)

23 
	#SERVER_TYPE_UNKNOWN
 0x00

	)

24 
	#SERVER_TYPE_PROXY
 0x01

	)

25 
	#SERVER_TYPE_WORKER
 0x02

	)

26 
	#SERVER_TYPE_CTRL
 0x04

	)

28 
usšg
 
Çme¥aû
 
	gtba£
::
og
;

29 
usšg
 
Çme¥aû
 
	gtba£
::
t¡©
;

30 
usšg
 
Çme¥aû
 
	gtba£
::
rocmÚ
;

32 
Çme¥aû
 
	g¥p


34 
Çme¥aû
 
	gcomm


37 şas 
	cCS”v”Ba£


39 
	gpublic
:

40 
CS”v”Ba£
();

41 
	gvœtu®
 ~
CS”v”Ba£
();

42 
vœtu®
 
run
(
¬gc
, * 
¬gv
[]);

43 
vœtu®
 
¡¬tup
(
boŞ
 
bg_run
 = 
Œue
);

45 
vœtu®
 
»®run
(
¬gc
, * 
¬gv
[]) {}

47 
vœtu®
 
£rv”ty³
()

49  
	gSERVER_TYPE_UNKNOWN
;

53 
CTLog
 
	glog_
;

55 
CTSt
 
	g¡©_
;

57 
CTProcMÚCli
 
	gmÚşi_
;

60 
	g´Ùeùed
:

61 
	sTIÁ”Çl


64 
¬gc_
;

65 ** 
	g¬gv_
;

67 
	gmÚi_š‹r_time_
;

69 
	gf¡©_š‹r_time_
;

71 
	g¡©_š‹r_time_
;

73 
TIÁ”Çl
* 
	gix_
;

74 
	gpublic
:

76 
boŞ
 
»lßd
();

77 
boŞ
 
qu™
();

78 
sigu¤1_hªdË
(
signo
);

79 
sigu¤2_hªdË
(
signo
);

80 
	gæag_
;

81 
	gv”siÚ_desc
[64];

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/spp_async_interface.h

1 #iâdeà
SPP_ASYNC_INTERFACE


2 
	#SPP_ASYNC_INTERFACE


	)

4 
	#RESERVED_SESSION_ID_SUP
 500

	)

5 
	#RESERVED_SESSION_ID_INF
 1

	)

7 
	#DEFAULT_MULTI_CON_INF
 10

	)

8 
	#DEFAULT_MULTI_CON_SUP
 50

	)

10 
şass
 
	gCPŞËrUn™
;

11 
şass
 
	gCTim”Un™
;

13 şas 
	cSPP_ASYNC


15 
	mpublic
:

16 
	tSID
;

17 
	tCONID
;

19 
	eSPP_ASYNC_RET_ENUM
 {

20 
	mASYNC_SUCC
 = 0,

21 
	mASYNC_REG_ID_OVERLAP
 = -1,

22 
	mASYNC_SESSION_NONE_EXIST
 = -2,

23 
	mASYNC_SEND_FAILED
 = -3,

24 
	mASYNC_GENERAL_ERR
 = -4,

25 
	mASYNC_REG_SESSION_ERR
 = -5,

26 
	mASYNC_PARAM_ERR
 = -6 ,

27 
	mASYNC_CONNECT_ERR
 = -7,

28 
	mASYNC_FATAL_ERR
 = -13

31 
SID
 
C»©eSessiÚ
(cÚ¡ 
sid
,

32 cÚ¡ * 
ty³
,

33 cÚ¡ * 
subty³
,

34 cÚ¡ * 

,

35 cÚ¡ 
pÜt
,

36 cÚ¡ 
»cv_út
,

37 cÚ¡ 
timeout
,

38 cÚ¡ 
šf
 = 
DEFAULT_MULTI_CON_INF
,

39 cÚ¡ 
sup
 = 
DEFAULT_MULTI_CON_SUP
);

41 
SID
 
C»©eTmSessiÚ
(cÚ¡ 
tm_sid
,

42 cÚ¡ 
time_š‹rv®
,

43 
time_sk_func
 
func
,

44 * 
sk_·¿
);

47 
SID
 
C»©eSessiÚ
(cÚ¡ 
sid
,

48 
fd
,

49 
¿w_hªdË_func
 
šput_f
 = 
NULL
,

50 * 
šput_·¿m
 = 
NULL
,

51 
¿w_hªdË_func
 
ouut_f
 = 
NULL
,

52 * 
ouut_·¿m
 = 
NULL
,

53 
¿w_hªdË_func
 
exû±iÚ_f
 = 
NULL
,

54 * 
exû±iÚ_·¿m
 = 
NULL
);

57 
SPP_ASYNC_RET_ENUM
 
De¡roySessiÚ
(
SID
 
sid
);

59 
SPP_ASYNC_RET_ENUM
 
De¡royTmSessiÚ
(
SID
 
tm_sid
);

61 
SPP_ASYNC_RET_ENUM
 
RegSessiÚC®lBack
(
SID
 
id
,

62 
´oûss_func
 
´oc
,

63 * 
´oc_·¿m
,

64 
šput_func
 
šput_f
,

65 * 
šput_·¿m
);

68 
SPP_ASYNC_RET_ENUM
 
RegSessiÚC®lBack
(cÚ¡ 
sid
,

69 
¿w_hªdË_func
 
šput_f
,

70 * 
šput_·¿m
,

71 
¿w_hªdË_func
 
ouut_f
,

72 * 
ouut_·¿m
,

73 
¿w_hªdË_func
 
exû±iÚ_f
,

74 * 
exû±iÚ_·¿m
);

76 
EÇbËIÅut
(cÚ¡ 
sid
);

78 
Di§bËIÅut
(cÚ¡ 
sid
);

80 
EÇbËOuut
(cÚ¡ 
sid
);

82 
Di§bËOuut
(cÚ¡ 
sid
);

85 
SPP_ASYNC_RET_ENUM
 
RegPackC®lBack
(
SID
 
id
,

86 
·ck_cb_func
 
´oc
,

87 * 
glob®_·¿m
);

90 
SPP_ASYNC_RET_ENUM
 
S’dD©a
(
SID
 
sid
, * 
buf
, 
buæ’
);

92 
SPP_ASYNC_RET_ENUM
 
S’dD©a
(
SID
 
sid
, * 
buf
, 
buæ’
,

93 * 
šput_·¿m
, * 
´oc_·¿m
);

95 
SPP_ASYNC_RET_ENUM
 
S’dD©a
(
SID
 
sid
, * 
buf
, 
buæ’
, * 
·ck_šfo
);

97 
SPP_ASYNC_RET_ENUM
 
S’dD©a
(
SID
 
sid
, * 
buf
, 
buæ’
,

98 * 
šput_·¿m
, * 
´oc_·¿m
, * 
·ck_šfo
);

100 
SPP_ASYNC_RET_ENUM
 
RecyşeCÚ
(
SID
 
sid
 = -1, 
CONID
 
cÚid
 = -1);

102 
S‘CÚÃùR‘ryIÁ”v®
();

104 
S‘IdËTimeout
(
timeout
,
sid
=-1);

106 
S‘U£rD©a
(
æow
, * 
d©a
);

108 * 
G‘U£rD©a
(
æow
);

110 
CPŞËrUn™
* 
G‘PŞËrUn™
();

111 
CTim”Un™
* 
G‘Tim”Un™
();

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/spp_version.h

1 #iâdeà
__SPP_VERSION_H__


2 
	#__SPP_VERSION_H__


	)

4 
__©Œibu‹__
((
w—k
)è
	gSPP_VERSION
[64] = "spp version: spp 2.7.1„elease 0001";

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/tcommu.h

1 #iâdeà
_TBASE_TCOMMU_H_


2 
	#_TBASE_TCOMMU_H_


	)

3 
	~<uni¡d.h
>

4 
	~<¡ršg.h
>

5 
	~<sys/time.h
>

8 
	#COMMU_ERR_OVERLOAD_PKG
 -100

	)

9 
	#COMMU_ERR_OVERLOAD_CONN
 -200

	)

12 
	#SOCK_TYPE_TCP
 0x1

	)

13 
	#SOCK_TYPE_UDP
 0x2

	)

14 
	#SOCK_TYPE_UNIX
 0x4

	)

15 
	#SOCK_TYPE_NOTIFY
 0x8

	)

16 
	#SOCK_MAX_BIND
 100

	)

18 
Çme¥aû
 
	gtba£


20 
Çme¥aû
 
	gtcommu


25 
	gCB_CONNECTED
 = 0,

26 
	gCB_DISCONNECT
,

27 
	gCB_RECVDATA
,

28 
	gCB_RECVERROR
,

29 
	gCB_RECVDONE
,

30 
	gCB_SENDDATA
,

31 
	gCB_SENDERROR
,

32 
	gCB_SENDDONE
,

33 
	gCB_HANGUP
,

34 
	gCB_OVERLOAD
,

35 
	gCB_TIMEOUT
,

36 } 
	tcb_ty³
;

40 
	gCT_DISCONNECT
 = 0,

41 
	gCT_CLOSE
,

42 
	gCT_STAT
,

43 } 
	tù¾_ty³
;

49 (*
	gcb_func
)(
	tæow
, * 
	t¬g1
, * 
	t¬g2
);

53 
	gËn
;

54 * 
	gd©a
;

55 * 
	gowÃr
;

56 * 
	gextd©a
;

57 } 
	tblob_ty³
;

61 
	gfd_
;

62 
	gty³_
;

63 
	gloÿl_
;

64 
	gloÿÍÜt_
;

65 
	g»mÙe_
;

66 
	g»mÙ•Üt_
;

67 
time_t
 
	g»cvtime_
;

68 
su£cÚds_t
 
	gtv_u£c
;

69 } 
	tTCÚnExtInfo
;

72 şas 
	cCTCommu


74 
	gpublic
:

75 
CTCommu
() {

76 
mem£t
(
func_li¡_
, 0, (
cb_func
è*(
CB_TIMEOUT
 + 1));

77 
mem£t
(
func_¬gs_
, 0, (*è*(
CB_TIMEOUT
 + 1));

79 
	gvœtu®
 ~
CTCommu
() {}

83 
vœtu®
 
š™
(cÚ¡ * 
cÚfig
) = 0;

87 
vœtu®
 
pŞl
(
boŞ
 
block
 = 
çl£
) = 0;

93 
vœtu®
 
£ndto
(
æow
, * 
¬g1
, * 
¬g2
) = 0;

100 
vœtu®
 
ù¾
(
æow
, 
ù¾_ty³
 
ty³
, * 
¬g1
, * 
¬g2
) = 0;

106 
vœtu®
 
»g_cb
(
cb_ty³
 
ty³
, 
cb_func
 
func
, * 
¬gs
 = 
NULL
) {

107 ià(
ty³
 <ğ
CB_TIMEOUT
) {

108 
func_li¡_
[
ty³
] = 
func
;

109 
	gfunc_¬gs_
[
ty³
] = 
¬gs
;

117 
vœtu®
 
ş—r
() = 0;

119 
	g´Ùeùed
:

120 
cb_func
 
func_li¡_
[
CB_TIMEOUT
 + 1];

121 * 
	gfunc_¬gs_
[
CB_TIMEOUT
 + 1];

124 
vœtu®
 
fši
() = 0;

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/tlog.h

1 #iâdeà
_TBASE_TLOG_H_


2 
	#_TBASE_TLOG_H_


	)

3 
	~<time.h
>

4 
	~<¡d¬g.h
>

9 #ifdeà
_THREAD_SAFE


10 
	~<±h»ad.h
>

13 
	#INTERNAL_LOG
 
SšgËTÚ
<
CTLog
, 
C»©eByPrÙo
>::
	`In¡ªû
()

	)

19 #ifdeà
_MP_MODE


22 
	#DEFAULT_MAX_FILE_SIZE
 (1 << 30)

23 
	#DEFAULT_MAX_FILE_NO
 1000

24 
	#MAX_PATH_LEN
 256

25 
	#MAX_LOG_LEN
 4096

26 
	#LOG_FLAG_TIME
 0x01

27 
	#LOG_FLAG_TID
 0x02

28 
	#LOG_FLAG_LEVEL
 0x04

29 
	#ERR_FD_NO
 0x00

30 

	)

31 
Çme¥aû
 
	gtba£


33 
Çme¥aû
 
	gog


37 
	eLOG_TYPE


39 
	gLOG_TYPE_CYCLE
 = 0,

40 
	gLOG_TYPE_DAILY
,

41 
	gLOG_TYPE_HOURLY
,

42 
	gLOG_TYPE_CYCLE_DAILY
,

43 
	gLOG_TYPE_CYCLE_HOURLY


46 
	eLOG_LEVEL


48 
	gLOG_TRACE
 = 0,

49 
	gLOG_DEBUG
,

50 
	gLOG_NORMAL
,

51 
	gLOG_ERROR
,

52 
	gLOG_FATAL
,

53 
	gLOG_NONE


60 (*
	glog_hook
)(cÚ¡ *
	tfmt
, 
	tva_li¡
 
	t­
);

63 şas 
	cCTLog


65 
	gpublic
:

66 
CTLog
();

67 ~
CTLog
();

77 
log_İ’
(
log_Ëv–
, 
log_ty³
, cÚ¡ * 
log_·th
, cÚ¡ * 
Çme_´efix
, 
max_fe_size
, 
max_fe_no
);

81 
log_Ëv–
(
Ëv–
);

83 
log_i
(
æag
, 
log_Ëv–
, cÚ¡ *
fmt
, ...);

84 
log_i_va
(
æag
, 
log_Ëv–
, cÚ¡ * 
fmt
, 
va_li¡
 
va
);

86 
log_i_bš
(
log_Ëv–
, cÚ¡ * 
buf
, 
Ën
);

88 
log_£t_hook
(
log_hook
 
hook
);

95 cÚ¡ * 
to_hex
(cÚ¡ * 
bš
, 
Ën
, * 
buf
, 
size
);

96 
	g´Ùeùed
:

97 
log_Ëv–_
;

98 
	glog_ty³_
;

99 
	glog_·th_
[
MAX_PATH_LEN
];

100 
	gÇme_´efix_
[
MAX_PATH_LEN
];

101 
	gmax_fe_size_
;

102 
	gmax_fe_no_
;

104 
	glog_fd_
;

105 
	gcur_fe_size_
;

106 
	gcur_fe_no_
;

107 
time_t
 
	g´e_time_
;

108 
	gf’ame_
[
MAX_PATH_LEN
];

109 
	gbufãr_
[
MAX_LOG_LEN
];

110 
log_hook
 
	ghook_
;

112 
şo£_fe
();

113 
log_fe_Çme
(* 
f•©h
, * 
f’ame
);

114 
İ’_fe
();

115 
š™_cur_fe_no
();

116 
fÜû_»Çme
(cÚ¡ * 
¤c_·thÇme
, cÚ¡ * 
d¡_·thÇme
);

117 
shiá_fe
();

119 
g‘_time
(& 
buff_Ën
);

120 
g‘_tid
(& 
buff_Ën
);

122 
g‘_Ëv–
(& 
buff_Ën
, 
log_Ëv–
);

123 #ifdeà
_THREAD_SAFE


124 şas 
	cCLogLock


126 
	gpublic
:

127 
CLogLock
()

129 
±h»ad_mu‹x_lock
(&
mu‹x_
);

131 ~
CLogLock
()

133 
±h»ad_mu‹x_uÆock
(&
mu‹x_
);

135 
	g´iv©e
:

136 
±h»ad_mu‹x_t
 
mu‹x_
;

146 
	#LOG_OPEN
 
log_İ’


	)

147 
	#LOG_P
(
lvl
, 
fmt
, 
¬gs
...è
	`log_i
(
LOG_FLAG_TIME
,†vl, fmt, ##¬gs)

	)

148 
	#LOG_P_NOTIME
(
lvl
, 
fmt
, 
¬gs
...è
	`log_i
(0,†vl, fmt, ##¬gs)

	)

149 
	#LOG_P_PID
(
lvl
, 
fmt
, 
¬gs
...è
	`log_i
(
LOG_FLAG_TIME
 | 
LOG_FLAG_TID
,†vl, fmt, ##¬gs)

	)

150 
	#LOG_P_LEVEL
(
lvl
, 
fmt
, 
¬gs
...è
	`log_i
(
LOG_FLAG_TIME
 | 
LOG_FLAG_LEVEL
,†vl, fmt, ##¬gs)

	)

151 
	#LOG_P_FILE
(
lvl
, 
fmt
, 
¬gs
...è
	`log_i
(
LOG_FLAG_TIME
,†vl, "[%-10s][%-4d][%-10s]"fmt, 
__FILE__
, 
__LINE__
, 
__FUNCTION__
, ##¬gs)

	)

152 
	#LOG_P_ALL
(
lvl
, 
fmt
, 
¬gs
...è
	`log_i
(
LOG_FLAG_TIME
 | 
LOG_FLAG_LEVEL
 | 
LOG_FLAG_TID
,†vl, "[%-10s][%-4d][%-10s]"fmt,
__FILE__
, 
__LINE__
, 
__FUNCTION__
, ##¬gs)

	)

153 
	#LOG_P_BIN
 
log_i_bš


	)

154 
	#SET_HOOK
 
log_£t_hook


	)

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/tprocmon.h

1 #iâdeà
_TBASE_TPROCMON_H_


2 
	#_TBASE_TPROCMON_H_


	)

3 
	~<uni¡d.h
>

5 
	~<sys/msg.h
>

6 
	~<”ºo.h
>

7 
	~<¡ršg.h
>

8 
	~<¡dio.h
>

9 
	~<time.h
>

10 
	~<sigÇl.h
>

11 
	~<¡dšt.h
>

12 
	~"li¡.h
"

13 
	~"t¡©.h
"

14 
	~"og.h
"

16 
	#MAX_FILEPATH_LEN
 128

17 
	#BUCKET_SIZE
 10

18 
	#MAX_PROC_GROUP_NUM
 100

19 
	#MAX_MSG_BUFF
 100

20 
	#MSG_EXPIRE_TIME
 120

21 
	#MSG_VERSION
 0x01

22 
	#MSG_ID_SERVER
 0x01

23 
	#MSG_SRC_SERVER
 0x00

24 
	#MSG_SRC_CLIENT
 0x01

25 
	#DEFAULT_MQ_KEY
 0x800100

26 

	)

27 
	#PROCMON_EVENT_PROCDEAD
 1

28 
	#PROCMON_EVENT_OVERLOAD
 (1<<1)

29 
	#PROCMON_EVENT_LOWSRATE
 (1<<2)

30 
	#PROCMON_EVENT_LATENCY
 (1<<3)

31 
	#PROCMON_EVENT_OTFMEM
 (1<<4)

32 
	#PROCMON_EVENT_PROCDOWN
 (1<<5)

33 
	#PROCMON_EVENT_PROCUP
 (1<<6)

34 
	#PROCMON_EVENT_FORKFAIL
 (1<<7)

35 
	#PROCMON_EVENT_MQKEYCONFIGERROR
 (1<<8)

36 
	#PROCMON_EVENT_TASKPAUSE
 (1<<9)

37 
	#PROCMON_EVENT_QSTATNULL
 (1<<10)

38 

	)

39 
	#PROCMON_CMD_KILL
 0x1

40 
	#PROCMON_CMD_LOAD
 0x2

41 
	#PROCMON_CMD_FORK
 0x4

42 

	)

43 
	#PROCMON_STATUS_OK
 0x0

44 
	#PROCMON_STATUS_OVERLOAD
 1

45 
	#PROCMON_STATUS_LOWSRATE
 (1<<1)

46 
	#PROCMON_STATUS_LATENCY
 (1<<2)

47 
	#PROCMON_STATUS_OTFMEM
 (1<<3)

48 

	)

49 
usšg
 
Çme¥aû
 
	g¥p
::
comm
;

50 
usšg
 
Çme¥aû
 
	gtba£
::
og
;

52 
Çme¥aû
 
	gtba£


54 
Çme¥aû
 
	grocmÚ


60 
	ggroupid_
;

61 
time_t
 
	gadju¡_´oc_time
;

62 
	gba£·th_
[
MAX_FILEPATH_LEN
];

63 
	gexefe_
[
MAX_FILEPATH_LEN
];

64 
	g‘cfe_
[
MAX_FILEPATH_LEN
];

65 
	gex™sigÇl_
;

66 
	gmax´oúum_
;

67 
	gmš´oúum_
;

68 
	gh—¹b—t_
;

69 
	gm­fe_
[
MAX_FILEPATH_LEN
];

70 * 
	gq_»cv_p¡©
;

71 
	gty³
;

72 
	g£ndkey
;

73 
	g£ndkeysize
;

74 
	g»cvkey
;

75 
	g»cvkeysize
;

76 
	gmqkey
;

77 
	g»£rve_
[8];

78 
	ggroup_ty³_
;

79 
	gaffš™y_
;

80 } 
	tTGroupInfo
;

84 
	ggroupid_
;

85 
	g´ocid_
;

86 
time_t
 
	gtime¡amp_
;

87 
	g»£rve_
[8];

88 } 
	tTProcInfo
;

92 
	ggroupid_
;

93 
	g´ocid_
;

94 
	gcmd_
;

95 
	g¬g1_
;

96 
	g¬g2_
;

97 
	g»£rve_
[8];

98 } 
	tTProcEv’t
;

102 
	gmsgty³_
;

103 
	gmsgËn_
;

104 
	g¤ùy³_
;

105 
time_t
 
	gtime¡amp_
;

106 
	gmsgcÚ‹Á_
[
MAX_MSG_BUFF
];

107 } 
	tTProcMÚMsg
;

111 şas 
	cCCommu


113 
	gpublic
:

114 
CCommu
() {}

115 
vœtu®
 ~
CCommu
() {}

119 
vœtu®
 
š™
(* 
¬gs
) = 0;

121 
vœtu®
 
fši
() = 0;

126 
vœtu®
 
»cv
(
TProcMÚMsg
* 
msg
, 
msgty³
 = 1) = 0;

130 
vœtu®
 
£nd
(
TProcMÚMsg
* 
msg
) = 0;

133 şas 
	cCMQCommu
 : 
public
 
CCommu


135 
public
:

136 
CMQCommu
();

137 
CMQCommu
(
mqkey
);

138 ~
CMQCommu
();

139 
š™
(* 
¬gs
);

140 
fši
();

141 
»cv
(
TProcMÚMsg
* 
msg
, 
msgty³
 = 0);

142 
£nd
(
TProcMÚMsg
* 
msg
);

143 
	g´Ùeùed
:

144 
mqid_
;

152 
TGroupInfo
 
	ggroupšfo_
;

153 
li¡_h—d_t
 
	gbuck‘_
[
BUCKET_SIZE
];

154 
	gcu½roúum_
;

155 
	g”½roúum_
;

156 } 
	tTProcGroupObj
;

160 
TProcInfo
 
	g´ocšfo_
;

161 
	g¡©us_
;

162 
li¡_h—d_t
 
	gli¡_
;

163 } 
	tTProcObj
;

166 (*
	gmÚ¤v_cb
)(cÚ¡ 
	tTGroupInfo
* 
	tgroupšfo
 ,

167 cÚ¡ 
	tTProcInfo
* 
	t´ocšfo
 ,

168 
	tev’t
 ,

169 * 
	t¬g
 );

172 
TProcGroupObj
* 
	ggroup
;

173 
TProcObj
** 
	g´oc
;

174 } 
	tTProcQu”yObj
;

176 
şass
 
	gtba£
::
t¡©
::
CTSt
;

177 şas 
	cCTProcMÚSrv


179 
	gpublic
:

180 
CTProcMÚSrv
();

181 
	gvœtu®
 ~
CTProcMÚSrv
();

185 
£t_commu
(
CCommu
* 
commu
);

187 
£t_og
(
CTLog
* 
log
);

192 
add_group
(cÚ¡ 
TGroupInfo
* 
groupšfo
);

198 
mod_group
(
groupid
, cÚ¡ 
TGroupInfo
* 
groupšfo
);

201 
run
();

206 
¡©
(* 
buf
, * 
buf_Ën
);

208 
¡©
(
tba£
::
t¡©
::
CTSt
 *stat);

210 
kÏÎ
(
signo
);

212 
qu”y
(
TProcQu”yObj
*& 
»suÉ
, & 
num
);

213 
	g´Ùeùed
:

214 
CTLog
* 
log_
;

215 
CCommu
* 
	gcommu_
;

217 
TProcGroupObj
 
	g´oc_groups_
[
MAX_PROC_GROUP_NUM
];

218 
	gcur_group_
;

219 
TProcMÚMsg
 
	gmsg_
[2];

221 
boŞ
 
do_»cv
(
msgty³
);

222 
boŞ
 
do_check
();

223 
add_´oc
(
groupid
, cÚ¡ 
TProcInfo
* 
´ocšfo
);

224 
TProcObj
* 
fšd_´oc
(
groupid
, 
´ocid
);

225 
d–_´oc
(
groupid
, 
´ocid
);

227 
vœtu®
 
check_group
(
TGroupInfo
* 
group
, 
cu½roúum
);

228 
vœtu®
 
boŞ
 
check_´oc
(
TGroupInfo
* 
group
, 
TProcInfo
* 
´oc
);

229 
vœtu®
 
boŞ
 
do_ev’t
(
ev’t
, * 
¬g1
, * 
¬g2
);

230 
vœtu®
 
do_fÜk
(cÚ¡ * 
ba£·th
, cÚ¡ * 
exefe
, cÚ¡ * 
‘cfe
,

231 
num
, 
group_ty³
, 
mask
);

232 
vœtu®
 
do_kl
(
´ocid
, 
signo
 = 
SIGKILL
);

233 
vœtu®
 
do_Üd”
(
groupid
, 
´ocid
, 
ev’Šo
, 
cmd
, 
¬g1
 = 0, 
¬g2
 = 0);

234 
boŞ
 
check_groupbusy
(
groupid
);

235 
£t_affš™y
(cÚ¡ 
ušt64_t
 
mask
);

241 şas 
	cCTProcMÚCli


243 
	gpublic
:

244 
CTProcMÚCli
();

245 
	gvœtu®
 ~
CTProcMÚCli
();

248 
£t_commu
(
CCommu
* 
commu
);

250 
run
();

251 
TProcMÚMsg
 
	gmsg_
[2];

252 
	g´Ùeùed
:

253 
CCommu
* 
commu_
;

256 
	#CLI_SEND_INFO
(
şi
è((
TProcInfo
*)(şi)->
msg_
[0].
msgcÚ‹Á_
)

257 
	#CLI_RECV_INFO
(
şi
è((
TProcEv’t
*)(şi)->
msg_
[1].
msgcÚ‹Á_
)

258 

	)

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/tstat.h

1 #iâdeà
_TBASE_TSTAT_H_


2 
	#_TBASE_TSTAT_H_


	)

3 
	~<¡dlib.h
>

4 
	~<¡ršg.h
>

6 
	~"t¡©_pŞicy.h
"

8 
	#STAT_TYPE_SUM
 1

9 
	#STAT_TYPE_AVG
 1<<1

10 
	#STAT_TYPE_MAX
 1<<2

11 
	#STAT_TYPE_MIN
 1<<3

12 
	#STAT_TYPE_COUNT
 1<<4

13 
	#STAT_TYPE_SET
 1<<5

14 

	)

15 
	#STAT_TYPE_ALL
 -1

17 
	#STAT_TYPE_NUM
 6

18 

	)

19 
	#TSTAT_MAGICNUM
 83846584

20 
	#TSTAT_VERSION
 0x02

21 
	#BUCKET_NUM
 200

22 
	#DEFAULT_STATOBJ_NUM
 200

23 
	#DEFAULT_STATVAL_NUM
 (
DEFAULT_STATOBJ_NUM
*1)

24 
	#STAT_BUFF_SIZE
 1<<18

25 
	#STAT_MAX_VALSIZE
 10

26 
	#INVALID_HANDLE
 -1

	)

28 
	#ERR_STAT_EXIST
 -2000

29 
	#ERR_STAT_NONE
 -2001

30 
	#ERR_STAT_FULL
 -2010

31 
	#ERR_STAT_OPENFILE
 -2020

32 
	#ERR_STAT_TRUNFILE
 -2021

33 
	#ERR_STAT_MAPFILE
 -2030

34 
	#ERR_STAT_MEMERROR
 -2040

35 
	#ERR_STAT_DEL_FILE
 -2050

36 
	#ERR_STAT_FILE_NULL
 -2060

37 

	)

38 
Çme¥aû
 
	gtba£


40 
Çme¥aû
 
	gt¡©


45 
	gid_
[
STAT_ID_MAX_LEN
];

46 
	gdesc_
[
STAT_ID_MAX_LEN
 * 2];

47 
	gty³_
;

48 
	gv®_size_
;

49 
TStV®
 
	gcouÁ_
;

50 
	gv®_off£t_
;

51 
	gÃxt_
;

52 } 
	tTStObj
;

57 
	gmagic_
;

58 
	glock_
;

59 
	gbufãr_
[
STAT_BUFF_SIZE
];

60 
	gä“li¡_
;

61 
	gbuck‘_
[
BUCKET_NUM
];

62 
	g¡©objs_u£d_
;

63 
TStObj
 
	g¡©objs_
[
DEFAULT_STATOBJ_NUM
];

64 
	g¡©v®s_u£d_
;

65 
TStV®
 
	g¡©v®s_
[
DEFAULT_STATVAL_NUM
];

66 } 
	tTStPoŞ
;

70 şas 
	cCTSt


72 
	gpublic
:

73 
CTSt
();

74 ~
CTSt
();

78 
š™_¡©poŞ
(cÚ¡ * 
m­f•©h
 = 
NULL
);

81 
»ad_¡©poŞ
(cÚ¡ * 
m­f•©h
 = 
NULL
);

86 
š™_¡©pŞicy
(
CTStPŞicy
* 
pŞicy
, 
ty³
);

93 
š™_¡©obj
(cÚ¡ * 
id
, 
ty³
, cÚ¡ * 
desc
 = 
NULL
, 
v®_sz›
 = 1);

100 
¡•
(cÚ¡ ** 
ids
, 
num
, 
v®
, 
v®_idx
 = 1);

106 
¡•0
(cÚ¡ * 
id
, 
v®
, 
v®_idx
 = 1);

112 
»suÉ
(** 
bufãr
, * 
Ën
, 
size
);

115 
»£t
();

120 
qu”y
(cÚ¡ * 
id
, 
TStObjW¿µ”
* 
w¿µ”
);

128 
š™_¡©obj_äame
(cÚ¡ * 
id
, 
ty³
, 
šdex
, cÚ¡ * 
desc
 = 
NULL
, 
v®_sz›
 = 1);

134 
İ
(
šdex
, 
v®
, 
v®_idx
 = 1);

139 
qu”yšdex
(
šdex
, 
TStObjW¿µ”
* 
w¿µ”
);

141 
	g´Ùeùed
:

142 
CTStPŞicy
* 
pŞicy_
[
STAT_TYPE_NUM
];

143 
	gpŞicy_no_
[
STAT_TYPE_NUM
];

144 
	gpŞicy_ty³_
[1 << 
STAT_TYPE_NUM
];

145 
TStPoŞ
* 
	g¡©poŞ_
;

146 
	gpŞicy_num_
;

147 
boŞ
 
	gm­fe_
;

148 
TStObj
* 
	g¡©šdex_
[
DEFAULT_STATOBJ_NUM
];

151 
šlše
 
hashid
(cÚ¡ * 
id
)

153 
	gËn
 = 
¡¾’
(
id
);

154 
	ghash
 = 1315423911;

156 
	gi
 = 0; i < 
	gËn
; ++i)

158 
	ghash
 ^ğ((
hash
 << 5è+ 
id
[
i
] + (hash >> 2));

161  
	ghash
 % 
	gBUCKET_NUM
;

163 
check_¡©poŞ
(cÚ¡ * 
m­f•©h
);

164 
fšd_¡©obj
(cÚ¡ * 
id
, 
ty³
 = 
STAT_TYPE_ALL
, 
TStObj
 **
pobj
 = 
NULL
);

165 
®loc_¡©obj
(
v®_size
);

166 
š£¹_¡©obj
(
choiû
);

167 
š£¹_¡©obj_äame
(
choiû
, 
šdex
);

168 
ouut_¡©poŞ
(* 
bufãr
, * 
Ën
, 
size
);

169 
ouut_¡©obj
(cÚ¡ 
TStObj
* 
obj
, 
couÁ
, cÚ¡ * 
v®ues
, 
v®_size
, * 
bufãr
, * 
Ën
, 
bufãr_size
);

170 
ÃwpoŞ
();

171 (
	gCTSt
::*
	tvis™_func
)(
	tTStObj
*, *);

172 
Œav–
(
vis™_func
 
vis™Ü
, * 
d©a
 = 
NULL
);

173 
do_»£t
(
TStObj
* 
obj
, * 
d©a
 = 
NULL
);

174 
do_»suÉ
(
TStObj
* 
obj
, * 
d©a
 = 
NULL
);

179 
£t_¡©šdex
(
šdex
, 
TStObj
 *
obj
);

184 
TStObj
* 
g‘_¡©šdex
(
šdex
);

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/tstat_policy.h

1 #iâdeà
_TBASE_TSTAT_POLICY_H_


2 
	#_TBASE_TSTAT_POLICY_H_


	)

5 
	~"©omic.h
"

6 
	~<¡dio.h
>

8 
	#STAT_ID_MAX_LEN
 64

11 

	)

21 
	#TStV®
 
©omic_t


	)

22 
	#STATVAL_INC
(
v®
è
	`©omic_šc
(&(v®))

	)

23 
	#STATVAL_DEC
(
v®
è
	`©omic_dec
(&(v®))

	)

24 
	#STATVAL_ADD
(
v®
, 
lv
è
	`©omic_add
Öv, &(v®))

	)

25 
	#STATVAL_SET
(
v®
, 
lv
è
	`©omic_£t
(&(v®),†v)

	)

26 
	#STATVAL_READ
(
v®
è
	`©omic_»ad
(&(v®))

	)

29 
Çme¥aû
 
	gtba£


31 
Çme¥aû
 
	gt¡©


35 * 
	gid_
;

36 * 
	gdesc_
;

37 
	gty³_
;

38 
	gv®_size_
;

39 
TStV®
* 
	gcouÁ_
;

40 
TStV®
* 
	gv®ue_
;

41 } 
	tTStObjW¿µ”
;

45 şas 
	cCTStPŞicy


47 
	gpublic
:

48 
CTStPŞicy
() {}

49 
vœtu®
 ~
CTStPŞicy
() {}

54 
vœtu®
 
__¡•__
(
TStObjW¿µ”
* 
rg‘
, 
v®
, 
v®_idx
) = 0;

60 
vœtu®
 
__»suÉ__
(
TStObjW¿µ”
* 
rg‘
, * 
v®
, * 
v®_size
) {

62 ià(
	grg‘
 =ğ
NULL
 || 
rg‘
->
v®_size_
 <ğ0 || 
v®
 == NULL) {

63 
´štf
("[ERROR]Please check:\n"

67 
rg‘
->
v®_size_


69 
ex™
(-1);

72 *
	gv®_size
 = 
rg‘
->
v®_size_
;

74 
	gi
 = 0; i < *
	gv®_size
; ++i)

75 
	gv®
[
i
] = 
STATVAL_READ
(
rg‘
->
v®ue_
[i]);

77  
STATVAL_READ
(*(
rg‘
->
couÁ_
));;

80 
vœtu®
 
__»£t__
(
TStObjW¿µ”
* 
rg‘
) {

82 ià(
	grg‘
 =ğ
NULL
 || 
rg‘
->
v®_size_
 <= 0) {

83 
´štf
("[ERROR]Please check:\n"

86 
rg‘
->
v®_size_


88 
ex™
(-1);

91 
	gi
 = 0; i < 
	grg‘
->
	gv®_size_
; ++i)

92 
STATVAL_SET
(
rg‘
->
v®ue_
[
i
], 0);

94 
STATVAL_SET
(*(
rg‘
->
couÁ_
), 0);

97 
vœtu®
 cÚ¡ * 
__g__
() = 0;

101 şas 
	cCTStPŞicyS‘
 : 
public
 
CTStPŞicy


103 
public
:

104 
CTStPŞicyS‘
() {}

105 ~
CTStPŞicyS‘
() {}

106 
vœtu®
 
__¡•__
(
TStObjW¿µ”
* 
rg‘
, 
v®
, 
v®_idx
) {

107 ià(
	grg‘
 =ğ
NULL
 || 
rg‘
->
v®_size_
 <= 0) {

108 
´štf
("[ERROR]Please check:\n"

111 
rg‘
->
v®_size_


113 
ex™
(-1);

116 
STATVAL_SET
(
rg‘
->
v®ue_
[
v®_idx
 - 1], 
v®
);

118 ià(
	gv®_idx
 =ğ
rg‘
->
v®_size_
)

119 
STATVAL_INC
(*(
rg‘
->
couÁ_
));

121 
vœtu®
 cÚ¡ * 
__g__
() {

127 şas 
	cCTStPŞicySum
 : 
public
 
CTStPŞicy


129 
public
:

130 
CTStPŞicySum
() {}

131 ~
CTStPŞicySum
() {}

132 
vœtu®
 
__¡•__
(
TStObjW¿µ”
* 
rg‘
, 
v®
, 
v®_idx
) {

134 ià(
	grg‘
 =ğ
NULL
 || 
rg‘
->
v®_size_
 <= 0) {

135 
´štf
("[ERROR]Please check:\n"

138 
rg‘
->
v®_size_


140 
ex™
(-1);

143 
STATVAL_ADD
(
rg‘
->
v®ue_
[
v®_idx
 - 1], 
v®
);

145 ià(
	gv®_idx
 =ğ
rg‘
->
v®_size_
)

146 
STATVAL_INC
(*(
rg‘
->
couÁ_
));

148 
vœtu®
 cÚ¡ * 
__g__
() {

154 şas 
	cCTStPŞicyAvg
 : 
public
 
CTStPŞicy


156 
public
:

157 
CTStPŞicyAvg
() {}

158 ~
CTStPŞicyAvg
() {}

159 
vœtu®
 
__¡•__
(
TStObjW¿µ”
* 
rg‘
, 
v®
, 
v®_idx
) {

161 ià(
	grg‘
 =ğ
NULL
 || 
rg‘
->
v®_size_
 <= 0) {

162 
´štf
("[ERROR]Please check:\n"

165 
rg‘
->
v®_size_


167 
ex™
(-1);

170 
STATVAL_ADD
(
rg‘
->
v®ue_
[
v®_idx
 - 1], 
v®
);

172 ià(
	gv®_idx
 =ğ
rg‘
->
v®_size_
)

173 
STATVAL_INC
(*(
rg‘
->
couÁ_
));

175 
vœtu®
 
__»suÉ__
(
TStObjW¿µ”
* 
rg‘
, * 
v®
, * 
v®_size
) {

177 ià(
	grg‘
 =ğ
NULL
 || 
rg‘
->
v®_size_
 <ğ0 || 
v®
 == NULL) {

178 
´štf
("[ERROR]Please check:\n"

182 
rg‘
->
v®_size_


184 
ex™
(-1);

187 
	g‹mp
 = 
STATVAL_READ
(*(
rg‘
->
couÁ_
));

189 ià(
	g‹mp
 > 0) {

190 *
	gv®_size
 = 
rg‘
->
v®_size_
;

192 
	gi
 = 0; i < *
	gv®_size
; ++i)

193 
	gv®
[
i
] = 
STATVAL_READ
(
rg‘
->
v®ue_
[i]è/ 
‹mp
;

195  
	g‹mp
;

200 
vœtu®
 cÚ¡ * 
__g__
() {

206 şas 
	cCTStPŞicyMax
 : 
public
 
CTStPŞicy


208 
public
:

209 
CTStPŞicyMax
() {}

210 ~
CTStPŞicyMax
() {}

211 
vœtu®
 
__¡•__
(
TStObjW¿µ”
* 
rg‘
, 
v®
, 
v®_idx
) {

213 ià(
	grg‘
 =ğ
NULL
 || 
rg‘
->
v®_size_
 <= 0) {

214 
´štf
("[ERROR]Please check:\n"

217 
rg‘
->
v®_size_


219 
ex™
(-1);

222 
	g‹mp
 = 
STATVAL_READ
(
rg‘
->
v®ue_
[
v®_idx
 - 1]);

224 ià(
	g‹mp
 < 
	gv®
)

225 
STATVAL_SET
(
rg‘
->
v®ue_
[
v®_idx
 - 1], 
v®
);

227 ià(
	gv®_idx
 =ğ
rg‘
->
v®_size_
)

228 
STATVAL_INC
(*(
rg‘
->
couÁ_
));

230 
vœtu®
 cÚ¡ * 
__g__
() {

236 şas 
	cCTStPŞicyMš
 : 
public
 
CTStPŞicy


238 
public
:

239 
CTStPŞicyMš
() {}

240 ~
CTStPŞicyMš
() {}

241 
vœtu®
 
__¡•__
(
TStObjW¿µ”
* 
rg‘
, 
v®
, 
v®_idx
) {

243 ià(
	grg‘
 =ğ
NULL
 || 
rg‘
->
v®_size_
 <= 0) {

244 
´štf
("[ERROR]Please check:\n"

247 
rg‘
->
v®_size_


249 
ex™
(-1);

252 
	g‹mp
 = 
STATVAL_READ
(
rg‘
->
v®ue_
[0]);

254 ià(
	g‹mp
 > 
	gv®
 ||emp == 0)

255 
STATVAL_SET
(
rg‘
->
v®ue_
[0], 
v®
);

257 
STATVAL_INC
(*(
rg‘
->
couÁ_
));

259 
vœtu®
 cÚ¡ * 
__g__
() {

265 şas 
	cCTStPŞicyCouÁ
 : 
public
 
CTStPŞicy


267 
public
:

268 
CTStPŞicyCouÁ
() {}

269 ~
CTStPŞicyCouÁ
() {}

270 
vœtu®
 
__¡•__
(
TStObjW¿µ”
* 
rg‘
, 
v®
, 
v®_idx
) {

272 ià(
	grg‘
 =ğ
NULL
 || 
rg‘
->
v®_size_
 <= 0) {

273 
´štf
("[ERROR]Please check:\n"

276 
rg‘
->
v®_size_


278 
ex™
(-1);

281 
STATVAL_ADD
(
rg‘
->
v®ue_
[
v®_idx
 - 1], 
v®
);

283 ià(
	gv®_idx
 =ğ
rg‘
->
v®_size_
)

284 
STATVAL_INC
(*(
rg‘
->
couÁ_
));

286 
vœtu®
 cÚ¡ * 
__g__
() {

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/sppincl.h

1 #iâdeà
_SPP_INCL_H_


2 
	#_SPP_INCL_H_


	)

3 
	~"¥p_šş/¥p_v”siÚ.h
"

4 
	~"¥p_šş/og.h
"

5 
	~"¥p_šş/t¡©.h
"

6 
	~"¥p_šş/tcommu.h
"

7 
	~"¥p_šş/£rv”ba£.h
"

8 
	~"¥p_šş/asyn_­i.h
"

9 
	~"¥p_šş/¥p_async_š‹rçû.h
"

10 
	~"¥p_šş/CommDef.h
"

11 
	~"¥p_šş/AsyncF¿me.h
"

12 
	~"¥p_šş/IS‹.h
"

13 
	~"¥p_šş/IAùiÚ.h
"

14 
	~"¥p_šş/AùiÚInfo.h
"

15 
	~"¥p_šş/AùiÚS‘.h
"

16 
	~"¥p_šş/SEXIÁ”çû.h
"

18 
	#GROUPID
(
x
è(((x)|1<<31))

	)

19 
usšg
 
Çme¥aû
 
	gtba£
::
og
;

20 
usšg
 
Çme¥aû
 
	gtba£
::
t¡©
;

21 
usšg
 
Çme¥aû
 
	gtba£
::
tcommu
;

22 
usšg
 
Çme¥aû
 
	g¥p
::
comm
;

23 
usšg
 
Çme¥aû
 
	g¥p
::
comm
;

24 
	gUSING_ASYNCFRAME_NS
;

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/GetExtInfo.cpp

19 
	~"G‘ExtInfo.h
"

20 
	~"msg.h
"

21 
	~"¥pšş.h
"

23 
£q
;

26 
	gCG‘ExtInfo
::
	$HªdËEncode
Ğ
CAsyncF¿me
 *
pF¿me
,

27 *
buf
,

28 &
Ën
,

29 
CMsgBa£
 *
pMsg
)

33 
CMsg
 *
msg
 = (CMsg*)
pMsg
;

34 *(*)
buf
 = 
msg
->
uš
;

35 *((*)
buf
+1èğ
£q
;

36 
Ën
 = 2*();

38 
	`S‘Cu¼’tSeq
Ğ
£q
++ );

40 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "CG‘ExtInfo::HªdËEncode. seq: %d\n", *((*)
buf
+1));

42 
	}
}

45 
	gCG‘ExtInfo
::
	$HªdËIÅut
Ğ
CAsyncF¿me
 *
pF¿me
,

46 cÚ¡ *
buf
,

47 
Ën
,

48 
CMsgBa£
 *
pMsg
)

50 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "CG‘ExtInfo::HªdËIÅut. buàËn: %d\n", 
Ën
);

51 ifĞ
Ën
 == ()*4 )

53 
£qno
 = *(*)(
buf
+()*3);

54 
	`S‘Cu¼’tSeq
Ğ
£qno
 );

55  
Ën
;

58 
	}
}

61 
	gCG‘ExtInfo
::
	$HªdËProûss
Ğ
CAsyncF¿me
 *
pF¿me
,

62 cÚ¡ *
buf
,

63 
Ën
,

64 
CMsgBa£
 *
pMsg
)

67 
£q
 = *(*)(
buf
+()*3);

68 
uš
 = *(*)(
buf
);

69 
£ed_num
 = *(*)(
buf
+());

70 
gaš_num
 = *(*)(
buf
+2*());

72 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "CGetExtInfo::HandleProcess. buf†en: %d; seq: %d; uin: %d; seed_num: %d: gain_num: %d\n",

73 
Ën
, 
£q
, 
uš
, 
£ed_num
, 
gaš_num
);

76 
	}
}

79 
	gCG‘ExtInfo
::
	$HªdËE¼Ü
Ğ
CAsyncF¿me
 *
pF¿me
,

80 
”r_no
,

81 
CMsgBa£
 *
pMsg
)

83 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_ERROR
, "CG‘ExtInfo::HªdËE¼Ü.ƒ¼no: %d\n", 
”r_no
);

86 
	}
}

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/GetExtInfo.h

19 #iâdeà
__GETEXTINFO_H__


20 
	#__GETEXTINFO_H__


	)

22 
	~"IAùiÚ.h
"

24 
	gUSING_ASYNCFRAME_NS
;

26 şas 
	cCG‘ExtInfo


27 : 
public
 
IAùiÚ


29 
public
:

31 
vœtu®
 
HªdËEncode
Ğ
CAsyncF¿me
 *
pF¿me
,

32 *
buf
,

33 &
Ën
,

34 
CMsgBa£
 *
pMsg
);

37 
vœtu®
 
HªdËIÅut
Ğ
CAsyncF¿me
 *
pF¿me
,

38 cÚ¡ *
buf
,

39 
Ën
,

40 
CMsgBa£
 *
pMsg
);

43 
vœtu®
 
HªdËProûss
Ğ
CAsyncF¿me
 *
pF¿me
,

44 cÚ¡ *
buf
,

45 
Ën
,

46 
CMsgBa£
 *
pMsg
);

49 
vœtu®
 
HªdËE¼Ü
Ğ
CAsyncF¿me
 *
pF¿me
,

50 
”r_no
,

51 
CMsgBa£
 *
pMsg
);

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/GetInfo.cpp

19 
	~"G‘Info.h
"

20 
	~"msg.h
"

21 
	~"¥pšş.h
"

23 
£q
;

26 
	gCG‘Info
::
	$HªdËEncode
Ğ
CAsyncF¿me
 *
pF¿me
,

27 *
buf
,

28 &
Ën
,

29 
CMsgBa£
 *
pMsg
)

32 ifĞ
Ën
 < 1024 )

37 
CMsg
 *
msg
 = (CMsg*)
pMsg
;

38 *(*)
buf
 = 
msg
->
uš
;

39 *((*)
buf
+1èğ
£q
;

40 
Ën
 = 2*();

42 
	`S‘Cu¼’tSeq
(
£q
++);

44 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "CG‘Info::HªdËEncode. seq: %d\n", *((*)
buf
+1));

46 
	}
}

49 
	gCG‘Info
::
	$HªdËIÅut
Ğ
CAsyncF¿me
 *
pF¿me
,

50 cÚ¡ *
buf
,

51 
Ën
,

52 
CMsgBa£
 *
pMsg
)

54 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "CG‘Info::HªdËIÅut. buàËn: %d\n", 
Ën
);

55 ifĞ
Ën
 == ()*4 )

57 
£qno
 = *(*)(
buf
+()*3);

58 
	`S‘Cu¼’tSeq
Ğ
£qno
 );

59  
Ën
;

62 
	}
}

65 
	gCG‘Info
::
	$HªdËProûss
Ğ
CAsyncF¿me
 *
pF¿me
,

66 cÚ¡ *
buf
,

67 
Ën
,

68 
CMsgBa£
 *
pMsg
)

71 
£q
 = *(*)(
buf
+()*3);

72 
uš
 = *(*)(
buf
);

73 
Ëv–
 = *(*)(
buf
+());

74 
coš
 = *(*)(
buf
+2*());

76 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "CGetInfo::HandleProcess. buf†en: %d; seq: %d; uin: %d;†evel: %d: coin: %d\n",

77 
Ën
, 
£q
, 
uš
, 
Ëv–
, 
coš
);

80 
	}
}

83 
	gCG‘Info
::
	$HªdËE¼Ü
Ğ
CAsyncF¿me
 *
pF¿me
,

84 
”r_no
,

85 
CMsgBa£
 *
pMsg
)

87 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_ERROR
, "CG‘Info::HªdËE¼Ü.ƒ¼no: %d\n", 
”r_no
);

90 
	}
}

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/GetInfo.h

19 #iâdeà
__GETINFO_H__


20 
	#__GETINFO_H__


	)

22 
	~"IAùiÚ.h
"

24 
	gUSING_ASYNCFRAME_NS
;

26 şas 
	cCG‘Info


27 : 
public
 
IAùiÚ


29 
public
:

31 
vœtu®
 
HªdËEncode
Ğ
CAsyncF¿me
 *
pF¿me
,

32 *
buf
,

33 &
Ën
,

34 
CMsgBa£
 *
pMsg
);

37 
vœtu®
 
HªdËIÅut
Ğ
CAsyncF¿me
 *
pF¿me
,

38 cÚ¡ *
buf
,

39 
Ën
,

40 
CMsgBa£
 *
pMsg
);

43 
vœtu®
 
HªdËProûss
Ğ
CAsyncF¿me
 *
pF¿me
,

44 cÚ¡ *
buf
,

45 
Ën
,

46 
CMsgBa£
 *
pMsg
);

49 
vœtu®
 
HªdËE¼Ü
Ğ
CAsyncF¿me
 *
pF¿me
,

50 
”r_no
,

51 
CMsgBa£
 *
pMsg
);

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/GetState.cpp

19 
	~"G‘S‹.h
"

20 
	~"G‘Info.h
"

21 
	~"G‘ExtInfo.h
"

22 
	~"AùiÚInfo.h
"

23 
	~"AsyncF¿me.h
"

24 
	~"CommDef.h
"

25 
	~"msg.h
"

28 
	gCG‘S‹
::
	$HªdËEncode
(
CAsyncF¿me
 *
pF¿me
,

29 
CAùiÚS‘
 *
pAùiÚS‘
,

30 
CMsgBa£
 *
pMsg
)

32 
CG‘Info
 
G‘Info
;

33 
CG‘ExtInfo
 
G‘ExtInfo
;

36 
CAùiÚInfo
 *
pAùiÚ1
 = 
Ãw
 
	`CAùiÚInfo
(512);

37 
pAùiÚ1
->
	`S‘ID
(1);

38 
pAùiÚ1
->
	`S‘De¡Ip
("172.25.0.29");

39 
pAùiÚ1
->
	`S‘De¡PÜt
(5574);

40 
pAùiÚ1
->
	`S‘PrÙo
(
PrÙoTy³_TCP
);

41 
pAùiÚ1
->
	`S‘AùiÚTy³
(
AùiÚTy³_S’dRecv_K“pAlive
);

42 
pAùiÚ1
->
	`S‘Timeout
(200);

43 
pAùiÚ1
->
	`S‘IAùiÚPŒ
((
IAùiÚ
 *)&
G‘Info
);

45 
pAùiÚS‘
->
	`AddAùiÚ
(
pAùiÚ1
);

47 
CAùiÚInfo
 *
pAùiÚ2
 = 
Ãw
 
	`CAùiÚInfo
(512);

48 
pAùiÚ2
->
	`S‘ID
(2);

49 
pAùiÚ2
->
	`S‘De¡Ip
("172.25.0.29");

50 
pAùiÚ2
->
	`S‘De¡PÜt
(5574);

51 
pAùiÚ2
->
	`S‘PrÙo
(
PrÙoTy³_TCP
);

52 
pAùiÚ2
->
	`S‘AùiÚTy³
(
AùiÚTy³_S’dRecv_K“pAliveW™hP’dšg
);

53 
pAùiÚ2
->
	`S‘Timeout
(200);

54 
pAùiÚ2
->
	`S‘IAùiÚPŒ
((
IAùiÚ
 *)&
G‘ExtInfo
);

56 
pAùiÚS‘
->
	`AddAùiÚ
(
pAùiÚ2
);

59 
	}
}

61 
	gCG‘S‹
::
	$HªdËProûss
(
CAsyncF¿me
 *
pF¿me
,

62 
CAùiÚS‘
 *
pAùiÚS‘
,

63 
CMsgBa£
 *
pMsg
)

65 
nNextS‹ID
 = 
STATE_ID_UPDATE
;

67 
CMsg
 *
msg
 = (CMsg *)
pMsg
;

68 
”r1
 = 0, 
”r2
 = 0;

69 
co¡1
 = 0, 
co¡2
 = 0;

70 
size1
 = 0, 
size2
 = 0;

72 
CAùiÚS‘
::
AùiÚS‘
 &
aùiÚ_£t
 = 
pAùiÚS‘
->
	`G‘AùiÚS‘
();

73 
CAùiÚS‘
::
AùiÚS‘
::
™”©Ü
 
™
 = 
aùiÚ_£t
.
	`begš
();

74 ; 
™
 !ğ
aùiÚ_£t
.
	`’d
(); it++ )

76 
CAùiÚInfo
 *
pInfo
 = *
™
;

77 *
buf
 = 
NULL
;

79 
id
;

80 
pInfo
->
	`G‘ID
(
id
);

82 ifĞ
id
 == 1 )

84 
pInfo
->
	`G‘E¼no
(
”r1
);

85 
pInfo
->
	`G‘Bufãr
Ğ&
buf
, 
size1
);

86 ifĞ
”r1
 == 0 )

88 ifĞ
size1
 == 16

89 && 
msg
->
uš
 =ğ*(*)
buf
 )

91 
msg
->
Ëv–
 = *(*)(
buf
+());

92 
msg
->
coš
 = *(*)(
buf
+()*2);

97 
msg
->
Ëv–
 = -1;

98 
msg
->
coš
 = -1;

100 
nNextS‹ID
 = -1;

104 
pInfo
->
	`G‘TimeCo¡
Ğ
co¡1
 );

107 ifĞ
id
 == 2 )

109 
pInfo
->
	`G‘E¼no
(
”r2
);

110 
pInfo
->
	`G‘Bufãr
Ğ&
buf
, 
size2
);

111 ifĞ
”r2
 == 0 )

113 ifĞ
size2
 == 16

114 && 
msg
->
uš
 =ğ*(*)
buf
 )

116 
msg
->
£ed_num
 = *(*)(
buf
+());

117 
msg
->
gaš_num
 = *(*)(
buf
+()*2);

122 
msg
->
Ëv–
 = -2;

123 
msg
->
coš
 = -2;

125 
nNextS‹ID
 = -1;

129 
pInfo
->
	`G‘TimeCo¡
Ğ
co¡2
 );

144  
STATE_ID_UPDATE
;

145 
	}
}

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/GetState.h

19 #iâdeà
__GETSTATE_H__


20 
	#__GETSTATE_H__


	)

21 
	~"IS‹.h
"

23 
	gUSING_ASYNCFRAME_NS
;

25 şas 
	cCG‘S‹


26 : 
public
 
IS‹


28 
public
:

29 
vœtu®
 
HªdËEncode
(
CAsyncF¿me
 *
pF¿me
,

30 
CAùiÚS‘
 *
pAùiÚS‘
,

31 
CMsgBa£
 *
pMsg
) ;

33 
vœtu®
 
HªdËProûss
(
CAsyncF¿me
 *
pF¿me
,

34 
CAùiÚS‘
 *
pAùiÚS‘
,

35 
CMsgBa£
 *
pMsg
) ;

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/GetState2.cpp

19 
	~"G‘S‹2.h
"

20 
	~"G‘Info.h
"

21 
	~"G‘ExtInfo.h
"

22 
	~"AùiÚInfo.h
"

23 
	~"NÚS‹AùiÚInfo.h
"

24 
	~"S‹AùiÚInfo.h
"

25 
	~"AÁiP¬®AùiÚInfo.h
"

26 
	~"AsyncF¿me.h
"

27 
	~"CommDef.h
"

28 
	~"msg.h
"

31 
	gCG‘S‹2
::
	$HªdËEncode
(
CAsyncF¿me
 *
pF¿me
,

32 
CAùiÚS‘
 *
pAùiÚS‘
,

33 
CMsgBa£
 *
pMsg
)

35 
CG‘Info
 
G‘Info
;

36 
CG‘ExtInfo
 
G‘ExtInfo
;

39 
CNÚS‹AùiÚInfo
 *
pAùiÚ1
 = 
Ãw
 
	`CNÚS‹AùiÚInfo
(512);

40 
pAùiÚ1
->
	`S‘Rou‹ID
(1000, 500);

63 
pAùiÚ1
->
	`S‘ID
(1);

64 
pAùiÚ1
->
	`S‘PrÙo
(
PrÙoTy³_TCP
);

65 
pAùiÚ1
->
	`S‘AùiÚTy³
(
AùiÚTy³_S’dRecv_K“pAlive
);

66 
pAùiÚ1
->
	`S‘Timeout
(400);

67 
pAùiÚ1
->
	`S‘IAùiÚPŒ
((
IAùiÚ
 *)&
G‘Info
);

69 
pAùiÚS‘
->
	`AddAùiÚ
(
pAùiÚ1
);

83 
	}
}

85 
	gCG‘S‹2
::
	$HªdËProûss
(
CAsyncF¿me
 *
pF¿me
,

86 
CAùiÚS‘
 *
pAùiÚS‘
,

87 
CMsgBa£
 *
pMsg
)

89 
nNextS‹ID
 = 0;

91 
CMsg
 *
msg
 = (CMsg *)
pMsg
;

92 
”r1
 = 0, 
”r2
 = 0;

93 
co¡1
 = 0, 
co¡2
 = 0;

94 
size1
 = 0, 
size2
 = 0;

96 
CAùiÚS‘
::
AùiÚS‘
 &
aùiÚ_£t
 = 
pAùiÚS‘
->
	`G‘AùiÚS‘
();

97 
CAùiÚS‘
::
AùiÚS‘
::
™”©Ü
 
™
 = 
aùiÚ_£t
.
	`begš
();

98 ; 
™
 !ğ
aùiÚ_£t
.
	`’d
(); it++ )

100 
CAùiÚInfo
 *
pInfo
 = *
™
;

101 *
buf
 = 
NULL
;

103 
id
;

104 
pInfo
->
	`G‘ID
(
id
);

106 ifĞ
id
 == 1 )

108 
Rou‹Ty³
 
ty³
 = 
pInfo
->
	`G‘Rou‹Ty³
();

109 ifĞ
ty³
 =ğ
L5AÁiP¬®Rou‹
 )

111 
¡d
::
¡ršg
 

;

112 
pÜt
 = 0;

113 
pInfo
->
	`G‘De¡Ip
Ğ

 );

114 
pInfo
->
	`G‘De¡PÜt
Ğ
pÜt
 );

115 
CAÁiP¬®AùiÚInfo
 *
pAÁiP¬®Info
 = (CAÁiP¬®AùiÚInfØ*)
pInfo
;

116 
modid
 = 0, 
cmdid
 = 0;

117 
št64_t
 
key
 = -1;

118 
pAÁiP¬®Info
->
	`G‘Rou‹Key
Ğ
modid
, 
cmdid
, 
key
 );

120 
¡d
::
¡ršg
 
id—l_
;

121 
id—l_pÜt
 = 0;

122 
pAÁiP¬®Info
->
	`G‘Id—lHo¡
(
id—l_
, 
id—l_pÜt
);

124 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_ERROR
, "modid: %d, cmdid: %d, key: %lld, ip: %s,…ort: %d, ideal_ip: %s, ideal_port: %d\n",

125 
modid
, 
cmdid
, 
key
, 

.
	`c_¡r
(), 
pÜt
, 
id—l_
.c_¡r(), 
id—l_pÜt
);

128 
pInfo
->
	`G‘E¼no
(
”r1
);

129 
pInfo
->
	`G‘Bufãr
Ğ&
buf
, 
size1
);

130 
pInfo
->
	`G‘TimeCo¡
Ğ
co¡1
 );

131 ifĞ
”r1
 == -5 )

133 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_ERROR
, "ECode: %d, Co¡: %d\n", 
”r1
, 
co¡1
);

136 ifĞ
”r1
 == 0 )

138 ifĞ
size1
 == 16

139 && 
msg
->
uš
 =ğ*(*)
buf
 )

141 
msg
->
Ëv–
 = *(*)(
buf
+());

142 
msg
->
coš
 = *(*)(
buf
+()*2);

147 
msg
->
Ëv–
 = -1;

148 
msg
->
coš
 = -1;

150 
nNextS‹ID
 = -1;

155 ifĞ
id
 == 2 )

157 
pInfo
->
	`G‘E¼no
(
”r2
);

158 
pInfo
->
	`G‘Bufãr
Ğ&
buf
, 
size2
);

159 ifĞ
”r2
 == 0 )

161 ifĞ
size2
 == 16

162 && 
msg
->
uš
 =ğ*(*)
buf
 )

164 
msg
->
£ed_num
 = *(*)(
buf
+());

165 
msg
->
gaš_num
 = *(*)(
buf
+()*2);

170 
msg
->
Ëv–
 = -2;

171 
msg
->
coš
 = -2;

173 
nNextS‹ID
 = -1;

177 
pInfo
->
	`G‘TimeCo¡
Ğ
co¡2
 );

191  
nNextS‹ID
;

192 
	}
}

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/GetState2.h

19 #iâdeà
__GETSTATE2_H__


20 
	#__GETSTATE2_H__


	)

21 
	~"IS‹.h
"

23 
	gUSING_ASYNCFRAME_NS
;

25 şas 
	cCG‘S‹2


26 : 
public
 
IS‹


28 
public
:

29 
vœtu®
 
HªdËEncode
(
CAsyncF¿me
 *
pF¿me
,

30 
CAùiÚS‘
 *
pAùiÚS‘
,

31 
CMsgBa£
 *
pMsg
) ;

33 
vœtu®
 
HªdËProûss
(
CAsyncF¿me
 *
pF¿me
,

34 
CAùiÚS‘
 *
pAùiÚS‘
,

35 
CMsgBa£
 *
pMsg
) ;

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/UpdateData.cpp

19 
	~"Upd©eD©a.h
"

20 
	~"msg.h
"

21 
	~"¥pšş.h
"

23 
£q
;

26 
	gCUpd©eD©a
::
	$HªdËEncode
Ğ
CAsyncF¿me
 *
pF¿me
,

27 *
buf
,

28 &
Ën
,

29 
CMsgBa£
 *
pMsg
)

31 
CMsg
 *
msg
 = (CMsg*)
pMsg
;

32 *(*)
buf
 = 
msg
->
uš
;

33 *((*)
buf
+1èğ
£q
;

34 *((*)
buf
+2èğ
msg
->
Ëv–
;

35 *((*)
buf
+3èğ
msg
->
coš
;

36 *((*)
buf
+4èğ
msg
->
£ed_num
;

37 *((*)
buf
+5èğ
msg
->
gaš_num
;

38 
Ën
 = 6*();

40 
	`S‘Cu¼’tSeq
Ğ
£q
++ );

42 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "CUpd©eD©a::HªdËEncode. seq: %d\n", *((*)
buf
+1));

44 
	}
}

47 
	gCUpd©eD©a
::
	$HªdËIÅut
Ğ
CAsyncF¿me
 *
pF¿me
,

48 cÚ¡ *
buf
,

49 
Ën
,

50 
CMsgBa£
 *
pMsg
)

52 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "CUpd©eD©a::HªdËIÅut. buàËn: %d\n", 
Ën
);

53 ifĞ
Ën
 == ()*3 )

55 
£qno
 = *(*)(
buf
+());

56 
	`S‘Cu¼’tSeq
Ğ
£qno
 );

57  
Ën
;

60 
	}
}

63 
	gCUpd©eD©a
::
	$HªdËProûss
Ğ
CAsyncF¿me
 *
pF¿me
,

64 cÚ¡ *
buf
,

65 
Ën
,

66 
CMsgBa£
 *
pMsg
)

69 
uš
 = *(*)(
buf
);

70 
£q
 = *(*)(
buf
+());

71 
»suÉ
 = *(*)(
buf
+()*2);

73 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "CUpdateData::HandleProcess. buf†en: %d; seq: %d; uin: %d;„esult: %d\n",

74 
Ën
, 
£q
, 
uš
, 
»suÉ
);

77 
	}
}

80 
	gCUpd©eD©a
::
	$HªdËE¼Ü
Ğ
CAsyncF¿me
 *
pF¿me
,

81 
”r_no
,

82 
CMsgBa£
 *
pMsg
)

84 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_ERROR
, "CUpd©eD©a::HªdËE¼Ü.ƒ¼no: %d\n", 
”r_no
);

87 
	}
}

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/UpdateData.h

19 #iâdeà
__UPDATEDATA_H__


20 
	#__UPDATEDATA_H__


	)

22 
	~"IAùiÚ.h
"

24 
	gUSING_ASYNCFRAME_NS
;

26 şas 
	cCUpd©eD©a


27 : 
public
 
IAùiÚ


29 
public
:

31 
vœtu®
 
HªdËEncode
Ğ
CAsyncF¿me
 *
pF¿me
,

32 *
buf
,

33 &
Ën
,

34 
CMsgBa£
 *
pMsg
);

37 
vœtu®
 
HªdËIÅut
Ğ
CAsyncF¿me
 *
pF¿me
,

38 cÚ¡ *
buf
,

39 
Ën
,

40 
CMsgBa£
 *
pMsg
);

43 
vœtu®
 
HªdËProûss
Ğ
CAsyncF¿me
 *
pF¿me
,

44 cÚ¡ *
buf
,

45 
Ën
,

46 
CMsgBa£
 *
pMsg
);

49 
vœtu®
 
HªdËE¼Ü
Ğ
CAsyncF¿me
 *
pF¿me
,

50 
”r_no
,

51 
CMsgBa£
 *
pMsg
);

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/UpdateState.cpp

19 
	~"Upd©eS‹.h
"

20 
	~"Upd©eD©a.h
"

21 
	~"AùiÚInfo.h
"

22 
	~"AsyncF¿me.h
"

23 
	~"CommDef.h
"

24 
	~"msg.h
"

27 
	gCUpd©eS‹
::
	$HªdËEncode
(
CAsyncF¿me
 *
pF¿me
,

28 
CAùiÚS‘
 *
pAùiÚS‘
,

29 
CMsgBa£
 *
pMsg
)

31 
CUpd©eD©a
 
Upd©eD©a
;

33 
CAùiÚInfo
 *
pAùiÚ1
 = 
Ãw
 
	`CAùiÚInfo
(512);

34 
pAùiÚ1
->
	`S‘ID
(3);

35 
pAùiÚ1
->
	`S‘De¡Ip
("172.25.0.29");

36 
pAùiÚ1
->
	`S‘De¡PÜt
(5575);

37 
pAùiÚ1
->
	`S‘PrÙo
(
PrÙoTy³_TCP
);

38 
pAùiÚ1
->
	`S‘AùiÚTy³
(
AùiÚTy³_S’dRecv_K“pAliveW™hP’dšg
);

39 
pAùiÚ1
->
	`S‘Timeout
(200);

40 
pAùiÚ1
->
	`S‘IAùiÚPŒ
((
IAùiÚ
 *)&
Upd©eD©a
);

42 
pAùiÚS‘
->
	`AddAùiÚ
(
pAùiÚ1
);

45 
	}
}

47 
	gCUpd©eS‹
::
	$HªdËProûss
(
CAsyncF¿me
 *
pF¿me
,

48 
CAùiÚS‘
 *
pAùiÚS‘
,

49 
CMsgBa£
 *
pMsg
)

51 
CMsg
 *
msg
 = (CMsg *)
pMsg
;

52 
”r1
 = 0 ;

53 
co¡1
 = 0;

54 
size1
 = 0;

56 
CAùiÚS‘
::
AùiÚS‘
 &
aùiÚ_£t
 = 
pAùiÚS‘
->
	`G‘AùiÚS‘
();

57 
CAùiÚS‘
::
AùiÚS‘
::
™”©Ü
 
™
 = 
aùiÚ_£t
.
	`begš
();

58 ; 
™
 !ğ
aùiÚ_£t
.
	`’d
(); it++ )

60 
CAùiÚInfo
 *
pInfo
 = *
™
;

61 *
buf
 = 
NULL
;

63 
id
;

64 
pInfo
->
	`G‘ID
(
id
);

66 ifĞ
id
 == 3 )

68 
pInfo
->
	`G‘E¼no
(
”r1
);

69 
pInfo
->
	`G‘Bufãr
Ğ&
buf
, 
size1
);

70 ifĞ
”r1
 == 0 )

72 ifĞ
size1
 == ()*3

73 && 
msg
->
uš
 =ğ*(*)
buf
 )

75 
msg
->
»suÉ
 = *(*)(
buf
+()*2);

80 
msg
->
»suÉ
 = -1;

81 
msg
->
Ëv–
 = -3;

82 
msg
->
coš
 = -3;

87 
pInfo
->
	`G‘TimeCo¡
Ğ
co¡1
 );

97  
STATE_ID_FINISHED
;

98 
	}
}

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/UpdateState.h

19 #iâdeà
__UPDATESTATE_H__


20 
	#__UPDATESTATE_H__


	)

21 
	~"IS‹.h
"

23 
	gUSING_ASYNCFRAME_NS
;

25 şas 
	cCUpd©eS‹


26 : 
public
 
IS‹


28 
public
:

29 
vœtu®
 
HªdËEncode
(
CAsyncF¿me
 *
pF¿me
,

30 
CAùiÚS‘
 *
pAùiÚS‘
,

31 
CMsgBa£
 *
pMsg
) ;

33 
vœtu®
 
HªdËProûss
(
CAsyncF¿me
 *
pF¿me
,

34 
CAùiÚS‘
 *
pAùiÚS‘
,

35 
CMsgBa£
 *
pMsg
) ;

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/echo_example.cpp

2 
	~"¥pšş.h
"

3 
	~<sys/sock‘.h
>

4 
	~<Ãtš‘/š.h
>

5 
	~<¬·/š‘.h
>

8 *
fÜm©_time
Ğ
time_t
 
tm
);

14 "C" 
	$¥p_hªdË_š™
(* 
¬g1
, * 
¬g2
)

17 cÚ¡ * 
‘c
 = (cÚ¡ *)
¬g1
;

19 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

21 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_DEBUG
, "¥p_hªdË_š™, cÚfig:%s, s”v”ty³:%d\n", 
‘c
, ba£->
	`£rv”ty³
());

24 
	}
}

33 "C" 
	$¥p_hªdË_šput
(
æow
, * 
¬g1
, * 
¬g2
)

36 
blob_ty³
* 
blob
 = (blob_ty³*)
¬g1
;

38 
TCÚnExtInfo
* 
extšfo
 = (TCÚnExtInfo*)
blob
->
extd©a
;

40 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

42 
ba£
->
log_
.
	`LOG_P
(
LOG_DEBUG
, "spp_handle_input[recvime:%s] flow:%d, buffer†en:%d, client ip:%s\n",

43 
	`fÜm©_time
(
extšfo
->
»cvtime_
),

44 
æow
,

45 
blob
->
Ën
,

46 
	`š‘_Áß
(*(
š_addr
*)&
extšfo
->
»mÙe_
));

48  
blob
->
Ën
;

49 
	}
}

56 "C" 
	$¥p_hªdË_rou‹
(
æow
, * 
¬g1
, * 
¬g2
)

59 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

60 
ba£
->
log_
.
	`LOG_P_FILE
(
LOG_DEBUG
, "¥p_hªdË_rou‹, flow:%d\n", 
æow
);

62 
	}
}

69 "C" 
	$¥p_hªdË_´oûss
(
æow
, * 
¬g1
, * 
¬g2
)

72 
blob_ty³
* 
blob
 = (blob_ty³*)
¬g1
;

74 
CTCommu
* 
commu
 = (CTCommu*)
blob
->
owÃr
;

76 
TCÚnExtInfo
* 
extšfo
 = (TCÚnExtInfo*)
blob
->
extd©a
;

78 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

80 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_DEBUG
, "spp_handle_process[recvime:%s] flow:%d, buffer†en:%d, client ip:%s\n",

81 
	`fÜm©_time
(
extšfo
->
»cvtime_
),

82 
æow
,

83 
blob
->
Ën
,

84 
	`š‘_Áß
(*(
š_addr
*)&
extšfo
->
»mÙe_
));

87 
»t
 = 
commu
->
	`£ndto
(
æow
, 
¬g1
, 
¬g2
 );

88 ià(
»t
 != 0)

90 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_ERROR
, "£nd„e¥Ú£ƒ¼Ü,„‘:%d\n", 
»t
);

91  
»t
;

101 
	}
}

106 "C" 
	$¥p_hªdË_fši
(* 
¬g1
, * 
¬g2
)

109 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

111 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_DEBUG
, "spp_handle_fini\n");

112 
	}
}

114 *
	$fÜm©_time
Ğ
time_t
 
tm
)

116 
¡r_tm
[1024];

117 
tm
 
tmm
;

118 
	`mem£t
(&
tmm
, 0, (tmm) );

119 
	`loÿÉime_r
((
time_t
 *)&
tm
, &
tmm
);

121 
	`¢´štf
(
¡r_tm
, (str_tm), "[%04d-%02d-%02d %02d:%02d:%02d]",

122 
tmm
.
tm_y—r
 + 1900,mm.
tm_mÚ
 + 1,mm.
tm_mday
,

123 
tmm
.
tm_hour
,mm.
tm_mš
,mm.
tm_£c
);

125  
¡r_tm
;

126 
	}
}

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/msg.cpp

19 
	~"msg.h
"

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/msg.h

19 #iâdeà
__MSG_H__


20 
	#__MSG_H__


	)

21 
	~"MsgBa£.h
"

23 
	gUSING_ASYNCFRAME_NS
;

25 
	#STATE_ID_FINISHED
 0

	)

26 
	#STATE_ID_GET
 1

	)

27 
	#STATE_ID_UPDATE
 2

	)

28 
	#STATE_ID_GET2
 3

	)

30 şas 
	cCMsg


31 : 
public
 
CMsgBa£


33 
public
:

34 
uš
;

35 
	mËv–
;

36 
	mcoš
;

37 
	m£ed_num
;

38 
	mgaš_num
;

39 
	m»suÉ
;

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/service.cpp

2 
	~"¥pšş.h
"

3 
	~<sys/sock‘.h
>

4 
	~<Ãtš‘/š.h
>

5 
	~<¬·/š‘.h
>

7 
	~"msg.h
"

8 
	~"G‘S‹.h
"

9 
	~"G‘S‹2.h
"

10 
	~"Upd©eS‹.h
"

12 
	#MODULE_PROC_NUM
 "moduË_´oc_num"

	)

15 
št32_t
 
	g£q
 = 0;

17 *
fÜm©_time
Ğ
time_t
 
tm
);

19 
	$In™
(
CAsyncF¿me
* 
pF¿me
, 
CMsgBa£
* 
pMsg
)

23  
STATE_ID_GET
;

25 
	}
}

27 
	sr¥_pkg


29 
	muš
;

30 
	mËv–
;

31 
	mcoš
;

32 } 
	tr¥_pkg_t
;

34 
	$Fši
(
CAsyncF¿me
* 
pF¿me
, 
CMsgBa£
* 
pMsg
)

37 
CMsg
 *
msg
 = (CMsg *è
pMsg
;

39 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
,

41 
msg
->
uš
, msg->
Ëv–
, msg->
coš
, msg->
£ed_num
, msg->
gaš_num
, msg->
»suÉ
);

42 
¡d
::
¡ršg
 
šfo
;

43 
pMsg
->
	`G‘D‘aInfo
(
šfo
);

44 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "%s\n", 
šfo
.
	`c_¡r
());

46 
r¥_pkg_t
 
pkg
;

47 
pkg
.
uš
 = 
msg
->uin;

48 
pkg
.
Ëv–
 = 
msg
->level;

49 
pkg
.
coš
 = 
msg
->coin;

51 
blob_ty³
 
r¥blob
;

52 
r¥blob
.
d©a
 = (*)&
pkg
;

53 
r¥blob
.
Ën
 = (
pkg
);

54 
pMsg
->
	`S’dToCl›Á
(
r¥blob
);

57 
	}
}

59 
	$Ov”lßdProûss
(
CAsyncF¿me
* 
pF¿me
, 
CMsgBa£
* 
pMsg
)

64 
pF¿me
->
	`FRAME_LOG
Ğ
LOG_DEBUG
, "Overload.\n" );

66 
r¥_pkg_t
 
pkg
;

67 
pkg
.
uš
 = -1000;

68 
pkg
.
Ëv–
 = -999;

69 
pkg
.
coš
 = -888;

71 
blob_ty³
 
r¥blob
;

72 
r¥blob
.
d©a
 = (*)&
pkg
;

73 
r¥blob
.
Ën
 = (
pkg
);

74 
pMsg
->
	`S’dToCl›Á
(
r¥blob
);

77 
	}
}

82 "C" 
	$¥p_hªdË_š™
(* 
¬g1
, * 
¬g2
)

85 cÚ¡ * 
‘c
 = (cÚ¡ *)
¬g1
;

87 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

88 
ba£
->
log_
.
	`LOG_P
(
LOG_DEBUG
, "¥p_hªdË_š™, %s, %d\n", 
‘c
, ba£->
	`£rv”ty³
());

92 iàĞ
ba£
->
	`£rv”ty³
(è=ğ
SERVER_TYPE_WORKER
 )

103 
CAsyncF¿me
::
	`In¡ªû
()->
	`In™F¿me2
(
ba£
, 100, 0);

105 
CAsyncF¿me
::
	`In¡ªû
()->
	`RegC®lback
(CAsyncF¿me::
CBTy³_In™
, 
In™
);

106 
CAsyncF¿me
::
	`In¡ªû
()->
	`RegC®lback
(CAsyncF¿me::
CBTy³_Fši
, 
Fši
);

107 
CAsyncF¿me
::
	`In¡ªû
()->
	`RegC®lback
(CAsyncF¿me::
CBTy³_Ov”lßd
, 
Ov”lßdProûss
);

109 
CAsyncF¿me
::
	`In¡ªû
()->
	`AddS‹
(
STATE_ID_GET
, 
Ãw
 
CG‘S‹
);

110 
CAsyncF¿me
::
	`In¡ªû
()->
	`AddS‹
(
STATE_ID_UPDATE
, 
Ãw
 
CUpd©eS‹
);

111 
CAsyncF¿me
::
	`In¡ªû
()->
	`AddS‹
(
STATE_ID_GET2
, 
Ãw
 
CG‘S‹2
);

120 
	}
}

126 "C" 
	$¥p_hªdË_šput
(
æow
, * 
¬g1
, * 
¬g2
)

129 
blob_ty³
* 
blob
 = (blob_ty³*)
¬g1
;

131 
TCÚnExtInfo
* 
extšfo
 = (TCÚnExtInfo*)
blob
->
extd©a
;

133 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

134 
ba£
->
log_
.
	`LOG_P
(
LOG_DEBUG
, "spp_handle_input, %d, %d, %s, %s\n",

135 
æow
,

136 
blob
->
Ën
,

137 
	`š‘_Áß
(*(
š_addr
*)&
extšfo
->
»mÙe_
),

138 
	`fÜm©_time
(
extšfo
->
»cvtime_
));

140 iàĞ
blob
->
Ën
 >= ()() )

145 
	}
}

152 "C" 
	$¥p_hªdË_rou‹
(
æow
, * 
¬g1
, * 
¬g2
)

155 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

156 
ba£
->
log_
.
	`LOG_P
(
LOG_DEBUG
, "¥p_hªdË_rou‹, %d\n", 
æow
);

160 
	}
}

167 "C" 
	$¥p_hªdË_´oûss
(
æow
, * 
¬g1
, * 
¬g2
)

170 
blob_ty³
* 
blob
 = (blob_ty³*)
¬g1
;

171 
TCÚnExtInfo
* 
extšfo
 = (TCÚnExtInfo*)
blob
->
extd©a
;

174 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

176 
CTCommu
* 
commu
 = (CTCommu*)
blob
->
owÃr
;

180 
ba£
->
log_
.
	`LOG_P_PID
(
LOG_DEBUG
, "spp_handle_process, %d, %d, %s, %s\n",

181 
æow
,

182 
blob
->
Ën
,

183 
	`š‘_Áß
(*(
š_addr
*)&
extšfo
->
»mÙe_
),

184 
	`fÜm©_time
(
extšfo
->
»cvtime_
));

198 
CMsg
 *
msg
 = 
Ãw
 CMsg;

199 
msg
->
	`S‘S”v”Ba£
(
ba£
);

200 
msg
->
	`S‘TCommu
(
commu
);

201 
msg
->
	`S‘Flow
(
æow
);

202 
msg
->
	`S‘InfoFÏg
(
Œue
);

203 
msg
->
	`S‘MsgTimeout
(0);

204 
msg
->
uš
 = *(*)
blob
->
d©a
;

205 
msg
->
Ëv–
 = 0;

206 
msg
->
coš
 = 0;

207 
CAsyncF¿me
::
	`In¡ªû
()->
	`Proûss
Ğ
msg
 );

210 
	}
}

214 "C" 
	$¥p_hªdË_fši
(* 
¬g1
, * 
¬g2
)

217 
CS”v”Ba£
* 
ba£
 = (CS”v”Ba£*)
¬g2
;

218 
ba£
->
log_
.
	`LOG_P
(
LOG_DEBUG
, "spp_handle_fini\n");

220 iàĞ
ba£
->
	`£rv”ty³
(è=ğ
SERVER_TYPE_WORKER
 )

222 
CAsyncF¿me
::
	`In¡ªû
()->
	`FšiF¿me
();

223 
CAsyncF¿me
::
	`De¡roy
();

225 
	}
}

227 *
	$fÜm©_time
Ğ
time_t
 
tm
)

229 
¡r_tm
[1024];

230 
tm
 
tmm
;

231 
	`mem£t
(&
tmm
, 0, (tmm) );

232 
	`loÿÉime_r
((
time_t
 *)&
tm
, &
tmm
);

234 
	`¢´štf
(
¡r_tm
, (str_tm), "[%04d-%02d-%02d %02d:%02d:%02d]",

235 
tmm
.
tm_y—r
 + 1900,mm.
tm_mÚ
 + 1,mm.
tm_mday
,

236 
tmm
.
tm_hour
,mm.
tm_mš
,mm.
tm_£c
);

238  
¡r_tm
;

239 
	}
}

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/ActionInfo.h

19 #iâdeà
__ACTION_INFO_H__


20 
	#__ACTION_INFO_H__


	)

22 
	~"CommDef.h
"

23 
	~<¡ršg
>

25 
BEGIN_ASYNCFRAME_NS


27 
şass
 
	gIAùiÚ
;

28 
şass
 
	gCN‘HªdËr
;

29 
şass
 
	gCP¬®ËlN‘HªdËr
;

30 
şass
 
	gCAsyncF¿me
;

31 
şass
 
	gCAùiÚS‘
;

32 
şass
 
	gCMsgBa£
;

34 şas 
	cCAùiÚInfo


36 
	mpublic
:

37 
ä›nd
 
şass
 
CN‘HªdËr
;

38 
ä›nd
 
şass
 
	mCP¬®ËlN‘HªdËr
;

39 
ä›nd
 
şass
 
	mCAùiÚS‘
;

41 
	mpublic
:

47 
CAùiÚInfo
(
š™_buf_size
);

48 
	mvœtu®
 ~
CAùiÚInfo
();

55 
šlše
 
	$S‘IAùiÚPŒ
Ğ
IAùiÚ
 *
pAùiÚ
 )

57 ifĞ
NULL
 =ğ
pAùiÚ
 ) {

61 
_pAùiÚ
 = 
pAùiÚ
;

72 
šlše
 
	$S‘De¡Ip
(cÚ¡ *

)

74 ifĞ
NULL
 =ğ

 ) {

78 
	`¡ºıy
Ğ
_
, 

, (_ip)-1 );

81 
	}
}

89 
šlše
 
	$G‘De¡Ip
(
¡d
::
¡ršg
 &

)

91 

 = 
_
;

92 
	}
}

100 
šlše
 
	$S‘De¡PÜt
Ğ
PÜtTy³
 
pÜt
 )

102 
_pÜt
 = 
pÜt
;

103 
	}
}

111 
šlše
 
	$G‘De¡PÜt
Ğ
PÜtTy³
 &
pÜt
 )

113 
pÜt
 = 
_pÜt
;

114 
	}
}

121 
šlše
 
	$S‘PrÙo
Ğ
PrÙoTy³
 
´Ùo
 )

123 
_´Ùo
 = 
´Ùo
;

124 
	}
}

131 
šlše
 
	$G‘PrÙo
Ğ
PrÙoTy³
 &
´Ùo
 )

133 
´Ùo
 = 
_´Ùo
;

134 
	}
}

149 
šlše
 
	$S‘AùiÚTy³
Ğ
AùiÚTy³
 
ty³
)

151 
_ty³
 = 
ty³
;

152 
	}
}

160 
šlše
 
	$G‘AùiÚTy³
Ğ
AùiÚTy³
 &
ty³
)

162 
ty³
 = 
_ty³
;

163 
	}
}

171 
šlše
 
	$S‘ID
Ğ
id
 )

173 
_id
 = 
id
;

174 
	}
}

182 
šlše
 
	$G‘ID
Ğ&
id
 )

184 
id
 = 
_id
 ;

185 
	}
}

193 
šlše
 
	$S‘Timeout
Ğ
timeout
 )

195 
_timeout
 = 
timeout
;

196 
	}
}

204 
šlše
 
	$G‘Timeout
Ğ&
timeout
 )

206 
timeout
 = 
_timeout
;

207 
	}
}

214 
šlše
 
	$S‘E¼no
Ğ
”r_no
 )

216 
_”ºo
 = 
”r_no
;

217 
	}
}

240 
šlše
 
	$G‘E¼no
Ğ&
”r_no
 )

242 
”r_no
 = 
_”ºo
;

243 
	}
}

250 
šlše
 
	$S‘TimeCo¡
Ğ
co¡
 )

252 
_time_co¡
 = 
co¡
;

253 
	}
}

260 
šlše
 
	$G‘TimeCo¡
Ğ&
co¡
 )

262 
co¡
 = 
_time_co¡
;

263 
	}
}

273 
G‘Bufãr
Ğ**
buf
, &
size
 );

280 
šlše
 
Rou‹Ty³
 
	$G‘Rou‹Ty³
()

282  
_rou‹_ty³
;

283 
	}
}

289 
HªdËS¹
();

290 
HªdËE¼Ü
Ğ
”r_no
 );

291 
	g´Ùeùed
:

297 
šlše
 
	$S‘F¿mePŒ
Ğ
CAsyncF¿me
 *
pF¿me
)

299 
_pF¿me
 = 
pF¿me
;

300 
	}
}

307 
šlše
 
	$S‘AùiÚS‘PŒ
Ğ
CAùiÚS‘
 *
pAùiÚS‘
 )

309 
_pAùiÚS‘
 = 
pAùiÚS‘
;

310 
	}
}

317 
šlše
 
	$S‘MsgPŒ
Ğ
CMsgBa£
 *
pMsg
 )

319 
_pMsg
 = 
pMsg
;

320 
	}
}

327 
šlše
 
	$S‘N‘HªdËr
(
CN‘HªdËr
 *
pHªdËr
)

329 
_pHªdËr
 = 
pHªdËr
;

330 
	}
}

336 
šlše
 
CN‘HªdËr
 *
	$G‘N‘HªdËr
()

338  
_pHªdËr
;

339 
	}
}

342 
	g´Ùeùed
:

347 
Re£tBufãr
();

354 
Ex‹ndBufãr
Ğ
Ãed_size
 );

356 
	g´Ùeùed
:

357 
HªdËEncode
();

358 
HªdËIÅut
ĞcÚ¡ *
buf
, 
Ën
);

359 
HªdËProûss
ĞcÚ¡ *
buf
, 
Ën
);

361 
HªdËS’dFšished
();

363 
boŞ
 
S’dOÆy
();

365 
	g´Ùeùed
:

366 
Rou‹Ty³
 
_rou‹_ty³
;

368 
CAùiÚS‘
 *
	g_pAùiÚS‘
;

369 
IAùiÚ
 *
	g_pAùiÚ
;

370 
CAsyncF¿me
 *
	g_pF¿me
;

371 
CMsgBa£
 *
	g_pMsg
;

372 
CN‘HªdËr
 *
	g_pHªdËr
;

374 
	g_
[
IP_BUF_SIZE
];

375 
PÜtTy³
 
	g_pÜt
;

377 
PrÙoTy³
 
	g_´Ùo
;

378 
AùiÚTy³
 
	g_ty³
;

380 
	g_id
;

381 
	g_timeout
;

382 
	g_”ºo
;

383 
	g_time_co¡
;

385 *
	g_buf
;

386 
	g_buf_size
;

387 
	g_»®_d©a_Ën
;

391 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/ActionSet.h

19 #iâdeà
__ACTION_SET_H__


20 
	#__ACTION_SET_H__


	)

22 
	~"CommDef.h
"

23 
	~<£t
>

25 
BEGIN_ASYNCFRAME_NS


27 
şass
 
	gIS‹
;

28 
şass
 
	gCAùiÚInfo
;

29 
şass
 
	gCAsyncF¿me
;

30 
şass
 
	gCMsgBa£
;

32 şas 
	cCAùiÚS‘


34 
	mpublic
:

35 
ä›nd
 
şass
 
CAùiÚInfo
;

36 
ä›nd
 
şass
 
	mCAsyncF¿me
;

38 
	m¡d
::
	t£t
< 
	tCAùiÚInfo
* > 
	tAùiÚS‘
;

39 
	mpublic
:

40 
CAùiÚS‘
(
CAsyncF¿me
 *
pF¿me
,

41 
IS‹
 *
pS‹
,

42 
CMsgBa£
 *
pMsg
);

43 ~
CAùiÚS‘
();

53 
AddAùiÚ
Ğ
CAùiÚInfo
 *
ai
 );

61 
šlše
 
	$G‘AùiÚNum
()

63  
_AùiÚS‘
.
	`size
();

72 
šlše
 
AùiÚS‘
 & 
	$G‘AùiÚS‘
()

74  
_AùiÚS‘
;

75 
	}
}

80 
CË¬AùiÚ
();

82 
	g´Ùeùed
:

83 
S¹AùiÚ
();

84 
HªdËFšished
Ğ
CAùiÚInfo
 * 
ai
 );

86 
IS‹
 *
G‘IS‹
();

87 
CMsgBa£
 *
G‘Msg
();

89 
	g´Ùeùed
:

90 
CAsyncF¿me
 *
_pF¿me
;

91 
IS‹
 *
	g_pS‹
;

92 
CMsgBa£
 *
	g_pMsg
;

93 
AùiÚS‘
 
	g_AùiÚS‘
;

94 
	g_fšished_couÁ
;

96 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/AntiParalActionInfo.h

19 #iâdeà
__ANTI_PARAL_ACTION_INFO_H__


20 
	#__ANTI_PARAL_ACTION_INFO_H__


	)

23 
	~<¡dšt.h
>

24 
	~"AùiÚInfo.h
"

27 
BEGIN_ASYNCFRAME_NS


29 şas 
	cCAÁiP¬®AùiÚInfo


30 : 
public
 
CAùiÚInfo


32 
public
:

38 
CAÁiP¬®AùiÚInfo
(
š™_buf_size
);

39 
	mvœtu®
 ~
CAÁiP¬®AùiÚInfo
();

49 
S‘Rou‹Key
(
modid
, 
cmdid
, 
št64_t
 
key
);

54 
G‘Rou‹Key
(&
modid
, &
cmdid
, 
št64_t
 &
key
);

60 
G‘Rou‹ID
Ğ&
modid
, &
cmdid
 );

71 
S‘Id—lHo¡
ĞcÚ¡ 
¡d
::
¡ršg
 &
id—l_
, 
PÜtTy³
 
id—l_pÜt
 );

83 
G‘Id—lHo¡
Ğ
¡d
::
¡ršg
 &
id—l_
, 
PÜtTy³
 &
id—l_pÜt
 );

85 
	m´Ùeùed
:

86 
_modid
;

87 
št64_t
 
	m_key
;

89 
	m_cmdid
;

91 
	m¡d
::
¡ršg
 
_id—l_
;

92 
PÜtTy³
 
	m_id—l_pÜt
;

96 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/AsyncFrame.h

19 #iâdeà
__ASYNC_FRAME_H__


20 
	#__ASYNC_FRAME_H__


	)

21 
	~"£rv”ba£.h
"

22 
	~<m­
>

24 
şass
 
	gCPŞËrUn™
;

25 
şass
 
	gCTim”Un™
;

27 
	~"PŒMgr.h
"

29 
BEGIN_ASYNCFRAME_NS


31 
şass
 
	gIS‹
;

32 
şass
 
	gCAùiÚS‘
;

33 
şass
 
	gCAùiÚInfo
;

34 
şass
 
	gCMsgBa£
;

35 
usšg
 
Çme¥aû
 
	g¥p
::
comm
;

37 
	#FRAME_LOG
 
	`G‘S”v”Ba£
()->
log_
.
LOG_P_ALL


	)

39 şas 
	cCAsyncF¿me


41 
	mpublic
:

42 
	eCBTy³
 {

43 
CBTy³_In™
 = 0,

44 
	mCBTy³_Fši
,

45 
	mCBTy³_Ov”lßd
,

46 
	mCBTy³_Num
 = 10,

49 (*
	tCBFunc
)(
	tCAsyncF¿me
*, 
	tCMsgBa£
*);

50 
¡d
::
	tm­
<, 
	tIS‹
*> 
	tS‹M­
;

52 
ä›nd
 
şass
 
CAùiÚS‘
;

53 
ä›nd
 
şass
 
CAùiÚInfo
;

55 
public
:

56 
CAsyncF¿me
* 
	`In¡ªû
 ();

57 
	`De¡roy
 ();

59 
	`CAsyncF¿me
();

60 ~
	`CAsyncF¿me
();

73 
	`In™F¿me
(
CS”v”Ba£
 *
pS”vBa£
,

74 
CPŞËrUn™
 *
pPŞËrUn™
,

75 
CTim”Un™
 *
pTim”Un™
,

76 
nP’dšgCÚnNum
 = 100);

92 
	`In™F¿me2
(
CS”v”Ba£
 *
pS”vBa£
,

93 
nP’dšgCÚnNum
 = 100,

94 
nOv”lßdLim™
 = 0,

95 
nL5Timeout
 = 100,

96 
nL5PÜt
 = 8888);

101 
	`FšiF¿me
();

115 
	`RegC®lback
(
CBTy³
 
ty³
, 
CBFunc
 
func
);

125 
	`AddS‹
Ğ
id
, 
IS‹
 *
pS‹
);

135 
	`Proûss
(
CMsgBa£
 *
pMsg
);

143 
šlše
 
CS”v”Ba£
 *
	$G‘S”v”Ba£
()

145  
_pS”vBa£
;

146 
	}
}

148 
	g´Ùeùed
:

150 
HªdËEncode
(
id
, 
CMsgBa£
 *
pMsgBa£
);

153 
HªdËProûss
(
IS‹
 *
pS‹
, 
CAùiÚS‘
 *
pAùiÚS‘
, 
CMsgBa£
 *
pMsg
);

156 
CË¬S‹M­
();

158 
	g´Ùeùed
:

159 
CAsyncF¿me
 *
_s_š¡ªû
;

160 
CS”v”Ba£
 *
	g_pS”vBa£
;

161 
	gCPŒMgr
<
	gCAùiÚS‘
, 
	gPŒTy³_New
> *
	g_a¥Œ_mgr
;

162 
	gCPŒMgr
<
	gCMsgBa£
, 
	gPŒTy³_New
> *
	g_msg±r_mgr
;

164 
CBFunc
 
	g_cbFunc
[
CBTy³_Num
];

166 
S‹M­
 
	g_m­S‹
;

168 
	g_nOv”lßdLim™
;

169 
	g_nReque¡CouÁ
;

171 
CAùiÚS‘
 *
	g_pN“dD–‘eAS
;

175 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/CommDef.h

20 #iâdeà
__COMMDEF_H__


21 
	#__COMMDEF_H__


	)

23 
	#BEGIN_ASYNCFRAME_NS
 
Çme¥aû
 
SPP_ASYNCFRAME
 {

	)

24 
	#END_ASYNCFRAME_NS
 }

	)

25 
	#USING_ASYNCFRAME_NS
 
usšg
 
Çme¥aû
 
SPP_ASYNCFRAME


	)

27 
	gBEGIN_ASYNCFRAME_NS


29 
	#IP_BUF_SIZE
 16

	)

30 
	#MIN_BUF_SIZE
 32

	)

38 
	mNoG‘Rou‹
,

39 
	mL5NÚS‹Rou‹
,

40 
	mL5S‹Rou‹
,

41 
	mL5AÁiP¬®Rou‹
,

42 }
	tRou‹Ty³
;

46 
	tPÜtTy³
;

49 
	e’umPrÙoTy³


51 
	mPrÙoTy³_Inv®id
 = -1,

52 
	mPrÙoTy³_TCP
,

53 
	mPrÙoTy³_UDP
,

54 }
	tPrÙoTy³
;

57 
	e’umCÚnTy³


59 
	mCÚnTy³_ShÜt
 = 0,

60 
	mCÚnTy³_LÚg
,

61 
	mCÚnTy³_LÚgW™hP’dšg
,

62 }
	tCÚnTy³
;

65 
	e’umAùiÚTy³


67 
	mAùiÚTy³_Inv®id
 = -1,

68 
	mAùiÚTy³_S’dRecv
,

69 
	mAùiÚTy³_S’dRecv_K“pAlive
,

70 
	mAùiÚTy³_S’dRecv_K“pAliveW™hP’dšg
,

71 
	mAùiÚTy³_S’dOÆy
,

72 
	mAùiÚTy³_S’dOÆy_K“pAlive
,

73 
	mAùiÚTy³_S’dOÆy_K“pAliveW™hP’dšg
,

74 
	mAùiÚTy³_S’dRecv_P¬®Ël
,

75 }
	tAùiÚTy³
;

77 
šlše
 cÚ¡ *
	$PrÙoTy³ToSŒ
(
PrÙoTy³
 
ty³
)

79 ifĞ
ty³
 =ğ
PrÙoTy³_TCP
 )

83 iàĞ
ty³
 =ğ
PrÙoTy³_UDP
 )

90 
	}
}

92 
šlše
 cÚ¡ *
	$CÚnTy³ToSŒ
(
CÚnTy³
 
ty³
)

94 ifĞ
ty³
 =ğ
CÚnTy³_ShÜt
 )

98 iàĞ
ty³
 =ğ
CÚnTy³_LÚg
 )

102 iàĞ
ty³
 =ğ
CÚnTy³_LÚgW™hP’dšg
 )

109 
	}
}

112 
šlše
 cÚ¡ *
	$AùiÚTy³ToSŒ
(
AùiÚTy³
 
ty³
)

114 ifĞ
ty³
 =ğ
AùiÚTy³_S’dRecv
 )

118 iàĞ
ty³
 =ğ
AùiÚTy³_S’dRecv_K“pAlive
 )

122 iàĞ
ty³
 =ğ
AùiÚTy³_S’dRecv_K“pAliveW™hP’dšg
 )

126 iàĞ
ty³
 =ğ
AùiÚTy³_S’dOÆy
 )

130 iàĞ
ty³
 =ğ
AùiÚTy³_S’dOÆy_K“pAlive
 )

134 iàĞ
ty³
 =ğ
AùiÚTy³_S’dOÆy_K“pAliveW™hP’dšg
 )

138 iàĞ
ty³
 =ğ
AùiÚTy³_S’dRecv_P¬®Ël
 )

145 
	}
}

148 
	eE¼ÜNo


150 
	mESucûss
 = 0,

151 
	mECÚÃù
 = -1,

152 
	mES’d
 = -2,

153 
	mERecv
 = -3,

154 
	mECheckPkg
 = -4,

155 
	mETimeout
 = -5,

156 
	mEC»©eSock
 = -6,

157 
	mEA‰achPŞËr
 = -7,

158 
	mEInv®idS‹
 = -8,

159 
	mEHªgup
 = -9,

160 
	mEShutdown
 = -10,

161 
	mEEncodeFa
 = -11,

162 
	mEInv®idRou‹Ty³
 = -12,

163 
	mEMsgTimeout
 = -13,

164 
	mEG‘Rou‹Fa
 = -14,

167 
šlše
 cÚ¡ * 
	$¥³¼ToSŒ
(
”r
)

169 cÚ¡ * 
”r¡r
[] =

188 
”r
 =ƒrr < 0 ? -err :ƒrr;

189 iàĞ
”r
 > ()(
”r¡r
) -1 )

194  
”r¡r
[
”r
];

195 
	}
}

197 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/IAction.h

20 #iâdeà
__IACTION_H__


21 
	#__IACTION_H__


	)

23 
	~"CommDef.h
"

25 
BEGIN_ASYNCFRAME_NS


27 
şass
 
	gCAsyncF¿me
;

28 
şass
 
	gCMsgBa£
;

30 şas 
	cIAùiÚ


32 
	mpublic
:

33 
vœtu®
 ~
	$IAùiÚ
() {}

49 
vœtu®
 
	`HªdËEncode
Ğ
CAsyncF¿me
 *
pF¿me
,

50 *
buf
,

51 &
Ën
,

52 
CMsgBa£
 *
pMsgBa£
) = 0;

64 
vœtu®
 
	`HªdËIÅut
Ğ
CAsyncF¿me
 *
pF¿me
,

65 cÚ¡ *
buf
,

66 
Ën
,

67 
CMsgBa£
 *
pMsgBa£
) = 0;

80 
vœtu®
 
	$HªdËProûss
Ğ
CAsyncF¿me
 *
pF¿me
,

81 cÚ¡ *
buf
,

82 
Ën
,

83 
CMsgBa£
 *
pMsgBa£
)

86 
	}
}

113 
vœtu®
 
	$HªdËE¼Ü
Ğ
CAsyncF¿me
 *
pF¿me
,

114 
”r_no
,

115 
CMsgBa£
 *
pMsgBa£
)

118 
	}
}

122 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/IState.h

19 #iâdeà
__ISTATE_H__


20 
	#__ISTATE_H__


	)

21 
	~"AùiÚS‘.h
"

24 
BEGIN_ASYNCFRAME_NS


26 
şass
 
	gCAsyncF¿me
;

27 
şass
 
	gCMsgBa£
;

29 şas 
	cIS‹


31 
	mpublic
:

32 
vœtu®
 ~
	$IS‹
() {}

47 
vœtu®
 
	`HªdËEncode
(
CAsyncF¿me
 *
pF¿me
,

48 
CAùiÚS‘
 *
pAùiÚS‘
,

49 
CMsgBa£
 *
pMsgBa£
) = 0;

62 
vœtu®
 
	`HªdËProûss
(
CAsyncF¿me
 *
pF¿me
,

63 
CAùiÚS‘
 *
pAùiÚS‘
,

64 
CMsgBa£
 *
pMsgBa£
) = 0;

65 
	}
};

67 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/MsgBase.h

19 #iâdeà
__MSGBASE_H__


20 
	#__MSGBASE_H__


	)

22 
	~<£rv”ba£.h
>

23 
	~<tcommu.h
>

24 
	~<¡ršg
>

25 
	~<s¡»am
>

26 
	~"CommDef.h
"

27 
	~<sys/time.h
>

29 
BEGIN_ASYNCFRAME_NS


32 
usšg
 
Çme¥aû
 
	g¥p
::
comm
;

33 
usšg
 
Çme¥aû
 
	gtba£
::
tcommu
;

36 şas 
	cCMsgBa£


38 
	mpublic
:

40 
public
:

41 
CMsgBa£
();

42 
	mvœtu®
 ~
CMsgBa£
();

47 
šlše
 
	$S‘S”v”Ba£
(
CS”v”Ba£
* 
¤vba£
)

49 
_¤vba£
 = 
¤vba£
;

55 
šlše
 
CS”v”Ba£
* 
	$G‘S”v”Ba£
()

57  
_¤vba£
;

58 
	}
}

64 
šlše
 
	$S‘TCommu
(
CTCommu
* 
commu
)

66 
_commu
 = 
commu
;

67 
	}
}

72 
šlše
 
CTCommu
* 
	$G‘TCommu
()

74  
_commu
;

75 
	}
}

80 
šlše
 
	$S‘Flow
(
æow
)

82 
_æow
 = 
æow
;

83 
	}
}

88 
šlše
 
	$G‘Flow
()

90  
_æow
;

91 
	}
}

99 
šlše
 
	$S‘InfoFÏg
(
boŞ
 
æag
)

101 
_šfo_æag
 = 
æag
;

102 
	}
}

110 
šlše
 
boŞ
 
	$G‘InfoFÏg
()

112  
_šfo_æag
;

113 
	}
}

120 
šlše
 
	$G‘D‘aInfo
(
¡d
::
¡ršg
 &
šfo
)

122 
šfo
 = 
_šfo
.
	`¡r
();

123 
	}
}

130 
Aµ’dInfo
(cÚ¡ *
¡r
);

137 
S’dToCl›Á
(
blob_ty³
 &
blob
);

147 
S‘MsgTimeout
(
timeout
);

155 
G‘MsgTimeout
();

165 
boŞ
 
CheckMsgTimeout
();

173 
G‘MsgCo¡
();

175 
	g´Ùeùed
:

176 
CS”v”Ba£
* 
_¤vba£
;

177 
CTCommu
* 
	g_commu
;

178 
	g_æow
;

180 
boŞ
 
	g_šfo_æag
;

181 
	g¡d
::
¡ršg¡»am
 
_šfo
;

183 
	g_msg_timeout
;

184 
timev®
 
	g_¡¬t_tv
;

187 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/NonStateActionInfo.h

19 #iâdeà
__NONSTATE_ACTION_INFO_H__


20 
	#__NONSTATE_ACTION_INFO_H__


	)

22 
	~"AùiÚInfo.h
"

25 
BEGIN_ASYNCFRAME_NS


27 şas 
	cCNÚS‹AùiÚInfo


28 : 
public
 
CAùiÚInfo


30 
public
:

36 
CNÚS‹AùiÚInfo
(
š™_buf_size
);

37 
	mvœtu®
 ~
CNÚS‹AùiÚInfo
();

46 
S‘Rou‹ID
(
modid
, 
cmdid
);

52 
G‘Rou‹ID
(&
modid
, &
cmdid
);

54 
	m´Ùeùed
:

55 
_modid
;

56 
	m_cmdid
;

60 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/PtrMgr.h

19 #iâdeà
__PTRMGR_H__


20 
	#__PTRMGR_H__


	)

21 
	~<£t
>

22 
	~"CommDef.h
"

24 
BEGIN_ASYNCFRAME_NS


28 
	mPŒTy³_New
 = 0,

29 
	mPŒTy³_M®loc
,

30 
	mPŒTy³_NewA¼ay
,

31 }
	tPŒTy³
;

37 
	g‹m¶©e
< 
ty³Çme
 
	gT
, 
PŒTy³
 
	gty³
>

38 şas 
	cCPŒMgr


40 
	mpublic
:

41 
ty³Çme
 
	t¡d
::
	t£t
<
	tT
*> 
	tPŒS‘
;

42 
ty³Çme
 
	tPŒS‘
::
	t™”©Ü
 
	tPŒS‘I‹r
;

43 
	mpublic
:

44 ~
	$CPŒMgr
()

46 
PŒS‘I‹r
 
™
 = 
_±r_£t
.
	`begš
();

47 ; 
™
 !ğ
_±r_£t
.
	`’d
(); it++ )

49 
	`R–—£
Ğ*
™
 );

52 
_±r_£t
.
	`ş—r
();

55 
	$Regi¡”
Ğ
T
* 
±r
 )

65 
_±r_£t
.
	`š£¹
(
±r
);

66 
	}
}

68 
	$Recyşe
Ğ
T
* 
±r
 , 
boŞ
 
Ãed_»Ëa£
 = 
Œue
)

70 ifĞ
Ãed_»Ëa£
 )

72 
	`R–—£
Ğ
±r
 );

74 
_±r_£t
.
	`”a£
Ğ
±r
 );

75 
	}
}

77 
	g´iv©e
:

78 
	$R–—£
Ğ
T
* 
±r
 )

80 ifĞ
ty³
 =ğ
PŒTy³_New
 )

82 
d–‘e
 
±r
;

84 ifĞ
ty³
 =ğ
PŒTy³_M®loc
 )

86 
	`ä“
(
±r
);

88 ifĞ
ty³
 =ğ
PŒTy³_NewA¼ay
 )

90 
d–‘e
 [] 
±r
;

93 
	}
}

95 
	g´iv©e
:

96 
PŒS‘
 
_±r_£t
;

100 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/SEXInterface.h

8 #iâdeà
__SEX_INTERFACE_H__


9 
	#__SEX_INTERFACE_H__


	)

11 
BEGIN_ASYNCFRAME_NS


20 
In™CÚnNumLim™
(cÚ¡ 
¡d
::
¡ršg
& 

, cÚ¡ 
pÜt
, cÚ¡ 
lim™
);

30 
In™CÚnNumLim™
(cÚ¡ 
modid
, cÚ¡ 
cmdid
, cÚ¡ 
lim™
);

33 * 
G‘Cu¼’tAùiÚInfo
();

36 
S‘Cu¼’tSeq
(
ušt64_t
 
£q
);

37 
ušt64_t
 
G‘Cu¼’tSeq
();

39 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/StateActionInfo.h

19 #iâdeà
__STATE_ACTION_INFO_H__


20 
	#__STATE_ACTION_INFO_H__


	)

22 
	~<¡dšt.h
>

23 
	~"AùiÚInfo.h
"

26 
BEGIN_ASYNCFRAME_NS


28 şas 
	cCS‹AùiÚInfo


29 : 
public
 
CAùiÚInfo


31 
public
:

37 
CS‹AùiÚInfo
(
š™_buf_size
);

38 
	mvœtu®
 ~
CS‹AùiÚInfo
();

48 
S‘Rou‹Key
(
modid
, 
št64_t
 
key
, 
št32_t
 
funid
);

53 
G‘Rou‹Key
(&
modid
, 
št64_t
 &
key
, 
št32_t
 &
funid
);

60 
S‘CmdID
Ğ
cmdid
 );

66 
G‘Rou‹ID
Ğ&
modid
, &
cmdid
 );

68 
	m´Ùeùed
:

69 
_modid
;

70 
št64_t
 
	m_key
;

71 
št32_t
 
	m_funid
;

73 
	m_cmdid
;

77 
	gEND_ASYNCFRAME_NS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/asyn_api.h

1 #iâdeà
_ASYN_API_H


2 
	#_ASYN_API_H


	)

5 
	#RESERVED_SESSION_ID_SUP
 500

	)

7 
	#RESERVED_SESSION_ID_INF
 1

	)

11 
	eSESSION_EVENT


13 
EVENT_NORMAL
 = 1,

14 
EVENT_DEFAULT_PROC
 = 2,

15 
EVENT_SPECIAL_TASK_PROC
 = 3,

16 
EVENT_SHUTDOWN_COM
 = 4,

17 
EVENT_TIMEOUT
 = 5,

18 
EVENT_INPUT_ERR
 = 6,

19 
EVENT_DETACH
 = 7,

20 
EVENT_SYS_QUIT
 = 8,

21 
EVENT_OVERACCESS
 = 9,

22 
EVENT_SEND_FAIL
 = 10,

23 
EVENT_SEND_SUCC
 = 11

26 
	eINIT_CONSTANT


28 
NO_COUNTER_LIMIT
 = -1,

29 
NO_TIME_LIMIT
 = -1

32 
	eADDR_CMP_ENUM


34 
ADDR_EQ
 = 1,

35 
ADDR_LT
 = 2,

36 
ADDR_GT
 = 3,

37 
ADDR_LE
 = 4,

38 
ADDR_GE
 = 5,

39 
ADDR_TYPE_MISMATCH
 = 6

42 
	eADDR_TYPE


44 
ADDR_CHAR
 = 1,

45 
ADDR_INT
 = 2,

46 
ADDR_SHORT
 = 3,

47 
ADDR_STRING
 = 4

51 
	saddrun™
 {

52 
ty³
;

53 
İt
;

54 
Ën
;

56 
ch1
;

57 
s1
;

58 
™1
;

59 
buf
[0];

60 } 
v®
;

62 } 
__©Œibu‹__
((
®igÃd
(4)));

67 
	#ADDR_BUF_PAD
 ((*)((
addrun™
))-(×ddrun™*)0)->
v®
.
buf
)

	)

69 
	saddr£t
 {

70 
couÁ
;

71 
addrun™
 **
un™
;

75 
	eAPI_RET_CODE


77 
API_RET_SUCCESS
 = 0,

78 
API_RET_ERR
 = -1,

79 
API_ILLEGAL_PARA
 = -2,

80 
API_REG_FAIL
 = -3,

81 
API_RET_SUCCESS_AND_DETACH
 = -4

86 (*
»cv_func
)(
	tev’t
, 
	t£ssiÚId
, * 
	tcomm_·¿m
, * 
	tbuf
, 
	tËn
);

88 (*
šput_func
)(* 
	tšput_·¿m
, 
	t£ssiÚId
 , * 
	tblob
, * 
	t£rv”
);

90 (*
´oûss_func
)(
	tev’t
, 
	t£ssiÚId
, * 
	t´oc_·¿m
, * 
	td©a_blob
, * 
	t£rv”
);

92 (*
·ck_cb_func
)(
	tev’t
, 
	t£ssiÚId
, * 
	tglob®_·¿m
, * 
	t·ckage_·¿m
, * 
	td©a_blob
, * 
	t£rv”
);

95 (*
¿w_hªdË_func
)(
	t£ssiÚId
, * 
	tfd
, * 
	t·¿m
, * 
	t£rv”
);

97 (*
time_sk_func
)(
	t£ssiÚId
, * 
	tsk_·¿
, * 
	t£rv”
);

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/atomic.h

1 #iâdeà
__ATOMIC__T


2 
	#__ATOMIC__T


	)

4 
	~<¡dšt.h
>

6 #ià
__GNUC__
 < 4

7 
	~"©omic_asm.h
"

9 
	~"©omic_gcc.h
"

12 #ià
__WORDSIZE
==64

13 
	#HAS_ATOMIC8
 1

	)

14 
	~"©omic_gcc8.h
"

15 
	~"my©omic_gcc8.h
"

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/atomic_asm.h

1 #iâdeà
__ARCH_I386_ATOMIC__


2 
	#__ARCH_I386_ATOMIC__


	)

4 
	~<sys/cdefs.h
>

5 
__BEGIN_DECLS


15 vŞ©
	mcouÁ”
;

16 } 
	t©omic_t
;

18 
	#ATOMIC_INIT
(
i
è{ (iè}

	)

26 
	#©omic_»ad
(
v
è((v)->
couÁ”
)

	)

35 
	#©omic_£t
(
v
,
i
è(((v)->
couÁ”
èğ(i))

	)

37 
__šlše__
 
	$©omic_ş—r
(
©omic_t
 *
v
)

39 
i
;

40 
__asm__
 
	`__vŞ©e__
(

43 : "=&r"(
i
)

44 : "m"(
v
->
couÁ”
));

45  
i
;

46 
	}
}

55 
__šlše__
 
	$©omic_add
(
i
, 
©omic_t
 *
v
)

57 
__i
 = 
i
;

58 
__asm__
 
	`__vŞ©e__
(

60 : "ô"(
i
)

61 : "m"(
v
->
couÁ”
), "0"(
i
));

62  
__i
;

63 
	}
}

72 
__šlše__
 
	$©omic_sub
(
i
, 
©omic_t
 *
v
)

74  
	`©omic_add
(-
i
, 
v
);

75 
	}
}

86 
__šlše__
 
	$©omic_sub_ªd_‹¡
(
i
, 
©omic_t
 *
v
)

88 
c
;

90 
__asm__
 
	`__vŞ©e__
(

92 : "=m"(
v
->
couÁ”
), "=qm"(
c
)

93 : "œ"(
i
), "m"(
v
->
couÁ”
) : "memory");

94  
c
;

95 
	}
}

103 
__šlše__
 
	$©omic_šc
(
©omic_t
 *
v
)

105 
__asm__
 
	`__vŞ©e__
(

107 : "=m"(
v
->
couÁ”
)

108 : "m"(
v
->
couÁ”
));

109 
	}
}

117 
__šlše__
 
	$©omic_dec
(
©omic_t
 *
v
)

119 
__asm__
 
	`__vŞ©e__
(

121 : "=m"(
v
->
couÁ”
)

122 : "m"(
v
->
couÁ”
));

123 
	}
}

133 
__šlše__
 
	$©omic_dec_ªd_‹¡
(
©omic_t
 *
v
)

135 
c
;

137 
__asm__
 
	`__vŞ©e__
(

139 : "=m"(
v
->
couÁ”
), "=qm"(
c
)

140 : "m"(
v
->
couÁ”
) : "memory");

141  
c
 != 0;

142 
	}
}

152 
__šlše__
 
	$©omic_šc_ªd_‹¡
(
©omic_t
 *
v
)

154 
c
;

156 
__asm__
 
	`__vŞ©e__
(

158 : "=m"(
v
->
couÁ”
), "=qm"(
c
)

159 : "m"(
v
->
couÁ”
) : "memory");

160  
c
 != 0;

161 
	}
}

172 
__šlše__
 
	$©omic_add_Ãg©ive
(
i
, 
©omic_t
 *
v
)

174 
c
;

176 
__asm__
 
	`__vŞ©e__
(

178 : "=m"(
v
->
couÁ”
), "=qm"(
c
)

179 : "œ"(
i
), "m"(
v
->
couÁ”
) : "memory");

180  
c
;

181 
	}
}

190 
__šlše__
 
	$©omic_add_»tuº
(
i
, 
©omic_t
 *
v
)

192 
__i
 = 
i
;

193 
__asm__
 
	`__vŞ©e__
(

195 : "ô"(
i
)

196 : "m"(
v
->
couÁ”
), "0"(
i
));

197  
i
 + 
__i
;

198 
	}
}

200 
__šlše__
 
	$©omic_sub_»tuº
(
i
, 
©omic_t
 *
v
)

202  
	`©omic_add_»tuº
(-
i
, 
v
);

203 
	}
}

205 
	#©omic_šc_»tuº
(
v
è(
	`©omic_add_»tuº
(1,v))

	)

206 
	#©omic_dec_»tuº
(
v
è(
	`©omic_sub_»tuº
(1,v))

	)

209 
	#©omic_ş—r_mask
(
mask
, 
addr
) \

210 
__asm__
 
	`__vŞ©e__
("lock;‡ndl %0,%1" \

211 : : "r" (~(
mask
)),"m" (*
addr
è: "memÜy")

	)

213 
	#©omic_£t_mask
(
mask
, 
addr
) \

214 
__asm__
 
	`__vŞ©e__
("lock; orl %0,%1" \

215 : : "r" (
mask
),"m" (*(
addr
)è: "memÜy")

	)

217 
	g__END_DECLS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/atomic_asm8.h

1 #iâdeà
__ARCH_I386_ATOMIC8__


2 
	#__ARCH_I386_ATOMIC8__


	)

4 
	~<sys/cdefs.h
>

5 
__BEGIN_DECLS


15 vŞ©
št64_t
 
	mcouÁ”
;

16 } 
	t©omic8_t
;

18 
	#ATOMIC_INIT
(
i
è{ (iè}

	)

26 
__šlše__
 
št64_t
 
	$©omic8_»ad
(
©omic8_t
 *
v
)

28 
št64_t
 
r
;

29 
__asm__
 
	`__vŞ©e__
(

35 : "=A"(
r
)

36 : "o"(
v
->
couÁ”
)

38  
r
;

39 
	}
}

48 
__šlše__
 
	$©omic8_£t
(
©omic8_t
 *
v
, 
št64_t
 
i
)

50 

 = 
i
 & 0xFFFFFFFF;

51 
ih
 = 
i
 >> 32;

53 *
v2
 = (*)
v
;

54 
__asm__
 
	`__vŞ©e__
(

59 : "+o"(
v2
[0]), "+o"(v2[1])

60 : "b"(

), "c"(
ih
)

63 
__asm__
 
	`__vŞ©e__
(

67 : "+o"(
v
->
couÁ”
)

68 : "A"(
v
->
couÁ”
), "b"(

), "c"(
ih
)

71 
	}
}

80 
__šlše__
 
št64_t
 
	$©omic8_ş—r
(
©omic8_t
 *
v
)

82 
št64_t
 
r
;

83 
__asm__
 
	`__vŞ©e__
(

88 : "+o"(
v
->
couÁ”
), "=A"(
r
)

89 : "A"(
v
->
couÁ”
)

91  
r
;

92 
	}
}

101 
__šlše__
 
št64_t
 
	$©omic8_add
(
št64_t
 
i
, 
©omic8_t
 *
v
)

103 

 = 
i
 & 0xFFFFFFFF;

104 
ih
 = 
i
 >> 32;

106 *
v2
 = (*)
v
;

107 
__asm__
 
	`__vŞ©e__
(

116 : "+o"(
v2
[0]), "+o"(v2[1])

117 : "g"(

), "g"(
ih
)

120 
št64_t
 
r
;

121 
__asm__
 
	`__vŞ©e__
(

128 : "+o"(
v
->
couÁ”
), "=A"(
r
)

129 : "A"(
v
->
couÁ”
), "g"(

), "g"(
ih
)

131  
r
;

133 
	}
}

142 
__šlše__
 
št64_t
 
	$©omic8_add_»tuº
(
št64_t
 
i
, 
©omic8_t
 *
v
)

144 
št64_t
 
r
;

145 

 = 
i
 & 0xFFFFFFFF;

146 
ih
 = 
i
 >> 32;

149 *
v2
 = (*)
v
;

150 
__asm__
 
	`__vŞ©e__
(

161 : "+o"(
v2
[0]), "+o"(v2[1]), "=&A"(
r
)

162 : "g"(

), "g"(
ih
)

165 
__asm__
 
	`__vŞ©e__
(

174 : "+o"(
v
->
couÁ”
), "=A"(
r
)

175 : "A"(
v
->
couÁ”
), "g"(

), "g"(
ih
)

178  
r
;

179 
	}
}

188 
__šlše__
 
št64_t
 
	$©omic8_sub
(
št64_t
 
i
, 
©omic8_t
 *
v
)

190  
	`©omic8_add
(-
i
, 
v
);

191 
	}
}

202 
__šlše__
 
	$©omic8_sub_ªd_‹¡
(
i
, 
©omic8_t
 *
v
)

204  
	`©omic8_add_»tuº
(-
i
, 
v
) == 0;

205 
	}
}

213 
__šlše__
 
št64_t
 
	$©omic8_šc
(
©omic8_t
 *
v
)

215  
	`©omic8_add
(1, 
v
);

216 
	}
}

224 
__šlše__
 
št64_t
 
	$©omic8_dec
(
©omic8_t
 *
v
)

226  
	`©omic8_add
(-1, 
v
);

227 
	}
}

237 
__šlše__
 
	$©omic8_dec_ªd_‹¡
(
©omic8_t
 *
v
)

239  
	`©omic8_add_»tuº
(-1, 
v
) == 0;

240 
	}
}

250 
__šlše__
 
	$©omic8_šc_ªd_‹¡
(
©omic8_t
 *
v
)

252  
	`©omic8_add_»tuº
(1, 
v
) == 0;

253 
	}
}

264 
__šlše__
 
	$©omic8_add_Ãg©ive
(
št64_t
 
i
, 
©omic8_t
 *
v
)

266  
	`©omic8_add_»tuº
(
i
, 
v
) < 0;

267 
	}
}

269 
__šlše__
 
št64_t
 
	$©omic8_sub_»tuº
(
št64_t
 
i
, 
©omic8_t
 *
v
)

271  
	`©omic8_add_»tuº
(-
i
, 
v
);

272 
	}
}

274 
	#©omic8_šc_»tuº
(
v
è(
	`©omic8_add_»tuº
(1,v))

	)

275 
	#©omic8_dec_»tuº
(
v
è(
	`©omic8_sub_»tuº
(1,v))

	)

277 
	g__END_DECLS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/atomic_gcc.h

1 #iâdeà
__ARCH_I386_ATOMIC__


2 
	#__ARCH_I386_ATOMIC__


	)

4 
	~<sys/cdefs.h
>

5 
__BEGIN_DECLS


12 vŞ©
	t©omic_t
;

14 
	#ATOMIC_INIT
(
i
è{ (iè}

	)

22 
	#©omic_»ad
(
v
è(*(v))

	)

31 
	#©omic_£t
(
v
,
i
è(*(vèğ(i))

	)

33 
__šlše__
 
	$©omic_ş—r
(
©omic_t
 *
v
)

35  
	`__sync_ãtch_ªd_ªd
(
v
, 0);

36 
	}
}

45 
__šlše__
 
	$©omic_add
(
i
, 
©omic_t
 *
v
)

47  
	`__sync_ãtch_ªd_add
(
v
, 
i
);

48 
	}
}

57 
__šlše__
 
	$©omic_sub
(
i
, 
©omic_t
 *
v
)

59  
	`__sync_ãtch_ªd_sub
(
v
, 
i
);

60 
	}
}

71 
__šlše__
 
	$©omic_sub_ªd_‹¡
(
i
, 
©omic_t
 *
v
)

73  
	`__sync_sub_ªd_ãtch
(
v
, 
i
) == 0;

74 
	}
}

82 
__šlše__
 
	$©omic_šc
(
©omic_t
 *
v
)

84  
	`__sync_ãtch_ªd_add
(
v
, 1);

85 
	}
}

93 
__šlše__
 
	$©omic_dec
(
©omic_t
 *
v
)

95  
	`__sync_ãtch_ªd_sub
(
v
, 1);

96 
	}
}

106 
__šlše__
 
	$©omic_dec_ªd_‹¡
(
©omic_t
 *
v
)

108  
	`__sync_sub_ªd_ãtch
(
v
, 1) == 0;

109 
	}
}

119 
__šlše__
 
	$©omic_šc_ªd_‹¡
(
©omic_t
 *
v
)

121  
	`__sync_add_ªd_ãtch
(
v
, 1) == 0;

122 
	}
}

133 
__šlše__
 
	$©omic_add_Ãg©ive
(
i
, 
©omic_t
 *
v
)

135  
	`__sync_add_ªd_ãtch
(
v
, 
i
) < 0;

136 
	}
}

145 
__šlše__
 
	$©omic_add_»tuº
(
i
, 
©omic_t
 *
v
)

147  
	`__sync_add_ªd_ãtch
(
v
, 
i
);

148 
	}
}

150 
__šlše__
 
	$©omic_sub_»tuº
(
i
, 
©omic_t
 *
v
)

152  
	`__sync_sub_ªd_ãtch
(
v
, 
i
);

153 
	}
}

155 
	#©omic_šc_»tuº
(
v
è(
	`©omic_add_»tuº
(1,v))

	)

156 
	#©omic_dec_»tuº
(
v
è(
	`©omic_sub_»tuº
(1,v))

	)

158 
	g__END_DECLS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/atomic_gcc8.h

1 #iâdeà
__ARCH_I386_ATOMIC8__


2 
	#__ARCH_I386_ATOMIC8__


	)

4 
	#HAS_ATOMIC8
 1

	)

6 
	~<sys/cdefs.h
>

7 
__BEGIN_DECLS


14 vŞ©
	tšt64_t
 
	t©omic8_t
;

16 
	#ATOMIC_INIT
(
i
è{ (iè}

	)

24 #ià
__WORDSIZE
==64

25 
	#©omic8_»ad
(
v
è(*(v))

	)

27 
	#©omic8_»ad
(
v
è
	`©omic8_add_»tuº
(0,v)

	)

37 #ià
__WORDSIZE
==64

38 
	#©omic8_£t
(
v
,
i
è(*(vèğ(i))

	)

40 
	#©omic8_£t
(
v
,
i
è(*(vèğ(i))

	)

43 
__šlše__
 
št64_t
 
	$©omic8_ş—r
(
©omic8_t
 *
v
)

45  
	`__sync_ãtch_ªd_ªd
(
v
, 0);

46 
	}
}

54 
__šlše__
 
št64_t
 
	$©omic8_add
(
št64_t
 
i
, 
©omic8_t
 *
v
)

56  
	`__sync_ãtch_ªd_add
(
v
, 
i
);

57 
	}
}

66 
__šlše__
 
št64_t
 
	$©omic8_sub
(
št64_t
 
i
, 
©omic8_t
 *
v
)

68  
	`__sync_ãtch_ªd_sub
(
v
, 
i
);

69 
	}
}

80 
__šlše__
 
	$©omic8_sub_ªd_‹¡
(
št64_t
 
i
, 
©omic8_t
 *
v
)

82  
	`__sync_sub_ªd_ãtch
(
v
, 
i
) == 0;

83 
	}
}

91 
__šlše__
 
št64_t
 
	$©omic8_šc
(
©omic8_t
 *
v
)

93  
	`__sync_ãtch_ªd_add
(
v
, 1);

94 
	}
}

102 
__šlše__
 
št64_t
 
	$©omic8_dec
(
©omic8_t
 *
v
)

104  
	`__sync_ãtch_ªd_sub
(
v
, 1);

105 
	}
}

115 
__šlše__
 
	$©omic8_dec_ªd_‹¡
(
©omic8_t
 *
v
)

117  
	`__sync_sub_ªd_ãtch
(
v
, 1) == 0;

118 
	}
}

128 
__šlše__
 
	$©omic8_šc_ªd_‹¡
(
©omic8_t
 *
v
)

130  
	`__sync_add_ªd_ãtch
(
v
, 1) == 0;

131 
	}
}

142 
__šlše__
 
	$©omic8_add_Ãg©ive
(
št64_t
 
i
, 
©omic8_t
 *
v
)

144  
	`__sync_add_ªd_ãtch
(
v
, 
i
) < 0;

145 
	}
}

154 
__šlše__
 
št64_t
 
	$©omic8_add_»tuº
(
št64_t
 
i
, 
©omic8_t
 *
v
)

156  
	`__sync_add_ªd_ãtch
(
v
, 
i
);

157 
	}
}

159 
__šlše__
 
št64_t
 
	$©omic8_sub_»tuº
(
št64_t
 
i
, 
©omic8_t
 *
v
)

161  
	`__sync_sub_ªd_ãtch
(
v
, 
i
);

162 
	}
}

164 
	#©omic8_šc_»tuº
(
v
è(
	`©omic8_add_»tuº
(1,v))

	)

165 
	#©omic8_dec_»tuº
(
v
è(
	`©omic8_sub_»tuº
(1,v))

	)

167 
	g__END_DECLS


	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/list.h

1 #iâdeà
_H_OBJLIST_H_


2 
	#_H_OBJLIST_H_


	)

3 
	~<sys/cdefs.h
>

4 
	~<¡ddef.h
>

6 
Çme¥aû
 
	g¥p
 {

7 
Çme¥aû
 
	gcomm
 {

9 
	g__BEGIN_DECLS


19 
	#__butš_´eãtch
(
x
,
y
,
z
è()1

	)

20 
	sli¡_h—d
 {

21 
li¡_h—d
 *
	gÃxt
, *
	g´ev
;

23 
li¡_h—d
 
	tli¡_h—d_t
;

25 
	#LIST_HEAD_INIT
(
Çme
è{ &Òame), &Òameè}

	)

27 
	#LIST_HEAD
(
Çme
) \

28 
li¡_h—d
 
Çme
 = 
	`LIST_HEAD_INIT
Òame)

	)

30 
	#INIT_LIST_HEAD
(
±r
) do { \

31 (
±r
)->
Ãxt
 = (±r); (±r)->
´ev
 = (ptr); \

32 } 0)

	)

40 
šlše
 
__li¡_add
(
li¡_h—d
 *
p
,

41 
li¡_h—d
 *
´ev
,

42 
li¡_h—d
 *
Ãxt
)

44 
	gÃxt
->
	g´ev
 = 
p
;

45 
	gp
->
	gÃxt
 = 
Ãxt
;

46 
	gp
->
	g´ev
 = 
´ev
;

47 
	g´ev
->
	gÃxt
 = 
p
;

58 
šlše
 
li¡_add
(
li¡_h—d
 *
p
, li¡_h—d *
h—d
)

60 
__li¡_add
(
p
, 
h—d
, h—d->
Ãxt
);

70 
šlše
 
li¡_add_
(
li¡_h—d
 *
p
, li¡_h—d *
h—d
)

72 
__li¡_add
(
p
, 
h—d
->
´ev
, head);

82 
šlše
 
__li¡_d–
(
li¡_h—d
 *
´ev
, li¡_h—d *
Ãxt
)

84 
	gÃxt
->
	g´ev
 = 
´ev
;

85 
	g´ev
->
	gÃxt
 = 
Ãxt
;

93 
šlše
 
li¡_d–
(
li¡_h—d
 *
’Œy
)

95 
__li¡_d–
(
’Œy
->
´ev
,ƒÁry->
Ãxt
);

96 
	g’Œy
->
	gÃxt
 = 0;

97 
	g’Œy
->
	g´ev
 = 0;

104 
šlše
 
li¡_d–_š™
(
li¡_h—d
 *
’Œy
)

106 
__li¡_d–
(
’Œy
->
´ev
,ƒÁry->
Ãxt
);

107 
INIT_LIST_HEAD
(
’Œy
);

115 
šlše
 
li¡_move
(
li¡_h—d
 *
li¡
, li¡_h—d *
h—d
)

117 
__li¡_d–
(
li¡
->
´ev
,†i¡->
Ãxt
);

118 
li¡_add
(
li¡
, 
h—d
);

125 
šlše
 
li¡_move_
(
li¡_h—d
 *
li¡
,

126 
li¡_h—d
 *
h—d
)

128 
__li¡_d–
(
li¡
->
´ev
,†i¡->
Ãxt
);

129 
li¡_add_
(
li¡
, 
h—d
);

136 
šlše
 
li¡_em±y
(cÚ¡ 
li¡_h—d
 *
h—d
)

138  
	gh—d
->
	gÃxt
 =ğ
h—d
;

141 
šlše
 
__li¡_¥liû
(
li¡_h—d
 *
li¡
,

142 
li¡_h—d
 *
h—d
)

144 
li¡_h—d
 *
	gfœ¡
 = 
li¡
->
Ãxt
;

145 
li¡_h—d
 *
	gÏ¡
 = 
li¡
->
´ev
;

146 
li¡_h—d
 *
	g©
 = 
h—d
->
Ãxt
;

148 
	gfœ¡
->
	g´ev
 = 
h—d
;

149 
	gh—d
->
	gÃxt
 = 
fœ¡
;

151 
	gÏ¡
->
	gÃxt
 = 
©
;

152 
	g©
->
	g´ev
 = 
Ï¡
;

160 
šlše
 
li¡_¥liû
(
li¡_h—d
 *
li¡
, li¡_h—d *
h—d
)

162 ià(!
li¡_em±y
(
li¡
))

163 
__li¡_¥liû
(
li¡
, 
h—d
);

173 
šlše
 
li¡_¥liû_š™
(
li¡_h—d
 *
li¡
,

174 
li¡_h—d
 *
h—d
)

176 ià(!
li¡_em±y
(
li¡
)) {

177 
__li¡_¥liû
(
li¡
, 
h—d
);

178 
INIT_LIST_HEAD
(
li¡
);

182 #iâdeà
off£tof


183 #ià
__GNUC__
 >= 4

184 
	#off£tof
(
ty³
, 
memb”
è
	`__butš_off£tof
 (ty³, memb”)

	)

186 
	#off£tof
(
ty³
, 
memb”
è()(&(Ñy³ *)0)->memb”)

	)

196 
	#li¡_’Œy
(
±r
, 
ty³
, 
memb”
) \

197 ((
ty³
 *)((*)(
±r
)-
	`off£tof
Ñy³, 
memb”
)))

	)

204 
	#li¡_fÜ_—ch
(
pos
, 
h—d
) \

205 
pos
 = (
h—d
)->
Ãxt
, 
	`__butš_´eãtch
(pos->next,0,1); \

206 
pos
 !ğ(
h—d
); \

207 
pos
 =…os->
Ãxt
, 
	`__butš_´eãtch
(pos->next,0,1)) \

208 

	)

209 
	#__li¡_fÜ_—ch
(
pos
, 
h—d
) \

210 
pos
 = (
h—d
)->
Ãxt
;…o !ğ(h—d);…o ğpos->Ãxt)

	)

216 
	#li¡_fÜ_—ch_´ev
(
pos
, 
h—d
) \

217 
pos
 = (
h—d
)->
´ev
, 
	`__butš_´eãtch
(pos->prev,0,1); \

218 
pos
 !ğ(
h—d
); \

219 
pos
 =…os->
´ev
, 
	`__butš_´eãtch
Õos->´ev,0,1))

	)

221 
	#__li¡_fÜ_—ch_´ev
(
pos
, 
h—d
) \

222 
pos
 = (
h—d
)->
´ev
;…os != (head); \

223 
pos
 =…os->
´ev
)

	)

231 
	#li¡_fÜ_—ch_§ã
(
pos
, 
n
, 
h—d
) \

232 
pos
 = (
h—d
)->
Ãxt
, 
n
 =…os->next;…os != (head); \

233 
pos
 = 
n
,‚ =…os->
Ãxt
)

	)

241 
	#li¡_fÜ_—ch_’Œy
(
pos
, 
h—d
, 
memb”
) \

242 
pos
 = 
	`li¡_’Œy
((
h—d
)->
Ãxt
, 
	`ty³of
(*pos), 
memb”
), \

243 
	`__butš_´eãtch
(
pos
->
memb”
.
Ãxt
,0,1); \

244 &
pos
->
memb”
 !ğ(
h—d
); \

245 
pos
 = 
	`li¡_’Œy
Õos->
memb”
.
Ãxt
, 
	`ty³of
(*pos), member), \

246 
	`__butš_´eãtch
(
pos
->
memb”
.
Ãxt
,0,1))

	)

249 
__END_DECLS


252 şas 
	cCLi¡H—d


254 
	gpublic
:

255 
li¡_h—d
 
objli¡
;

257 
In™Li¡
() {

258 
INIT_LIST_HEAD
(&
objli¡
);

260 
Re£tLi¡
() {

261 
li¡_d–_š™
(&
objli¡
);

263 
Li¡Em±y
() const {

264  
li¡_em±y
(&
objli¡
);

266 
CLi¡H—d
 *
Li¡Next
() {

267  
li¡_’Œy
(
objli¡
.
Ãxt
, 
CLi¡H—d
, objlist);

269 
CLi¡H—d
 *
Li¡P»v
() {

270  
li¡_’Œy
(
objli¡
.
´ev
, 
CLi¡H—d
, objlist);

273 
Li¡Add
(
CLi¡H—d
 &
n
) {

274 
li¡_add
(&
objli¡
, &
n
.objlist);

276 
Li¡Add
(
CLi¡H—d
 *
n
) {

277 
li¡_add
(&
objli¡
, &
n
->objlist);

279 
Li¡AddTa
(
CLi¡H—d
 &
n
) {

280 
li¡_add_
(&
objli¡
, &
n
.objlist);

282 
Li¡AddTa
(
CLi¡H—d
 *
n
) {

283 
li¡_add_
(&
objli¡
, &
n
->objlist);

285 
Li¡D–
() {

286 
Re£tLi¡
();

288 
Li¡Move
(
CLi¡H—d
 &
n
) {

289 
li¡_move
(&
objli¡
, &
n
.objlist);

291 
Li¡Move
(
CLi¡H—d
 *
n
) {

292 
li¡_move
(&
objli¡
, &
n
->objlist);

294 
Li¡MoveTa
(
CLi¡H—d
 &
n
) {

295 
li¡_move_
(&
objli¡
, &
n
.objlist);

297 
Li¡MoveTa
(
CLi¡H—d
 *
n
) {

298 
li¡_move_
(&
objli¡
, &
n
->objlist);

300 
F»eLi¡
() {

301 !
Li¡Em±y
())

302 
Li¡Next
()->
Re£tLi¡
();

306 
	g‹m¶©e
<
şass
 
	gT
>

307 şas 
	cCLi¡Objeù
: 
public
 
CLi¡H—d


309 
public
:

310 
CLi¡Objeù
() {

311 
In™Li¡
();

313 ~
CLi¡Objeù
() {

314 
Re£tLi¡
();

316 
	gCLi¡Objeù
<
	gT
> *
Li¡Next
() {

317  (
	gCLi¡Objeù
<
	gT
>*)
	gCLi¡H—d
::
Li¡Next
();

319 
	gCLi¡Objeù
<
	gT
> *
Li¡P»v
() {

320  (
	gCLi¡Objeù
<
	gT
>*)
	gCLi¡H—d
::
Li¡P»v
();

323 
T
 *
Li¡OwÃr
() {

324  (
	gT
 *)
	gthis
;

326 
T
 *
NextOwÃr
() {

327  
Li¡Next
()->
Li¡OwÃr
();

329 
T
 *
P»vOwÃr
() {

330  
Li¡P»v
()->
Li¡OwÃr
();

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/myatomic_gcc8.h

19 #iâdeà
_MYATOMIC_GCC8_h


20 
	#_MYATOMIC_GCC8_h


	)

22 
	#©omic64_t
 
©omic8_t


	)

23 
	#©omic64_»ad
 
©omic8_»ad


	)

24 
	#©omic64_£t
 
©omic8_£t


	)

25 
	#©omic64_šc
 
©omic8_šc


	)

26 
	#©omic64_add
 
©omic8_add


	)

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/serverbase.h

1 #iâdeà
_SPP_COMM_SERVERBASE_H_


2 
	#_SPP_COMM_SERVERBASE_H_


	)

3 
	~<sys/»sourû.h
>

4 
	~<uni¡d.h
>

5 
	~<sigÇl.h
>

6 
	~"og.h
"

7 
	~"t¡©.h
"

8 
	~"rocmÚ.h
"

10 #ià!
__GLIBC_PREREQ
(2, 3)

11 
	#__butš_ex³ù
(
x
, 
ex³ùed_v®ue
è(x)

	)

13 #iâdeà
lik–y


14 
	#lik–y
(
x
è
	`__butš_ex³ù
(!!(x), 1)

	)

16 #iâdeà
uÆik–y


17 
	#uÆik–y
(
x
è
	`__butš_ex³ù
(!!(x), 0)

	)

20 
	#RUN_FLAG_QUIT
 0x01

	)

21 
	#RUN_FLAG_RELOAD
 0x02

	)

23 
	#SERVER_TYPE_UNKNOWN
 0x00

	)

24 
	#SERVER_TYPE_PROXY
 0x01

	)

25 
	#SERVER_TYPE_WORKER
 0x02

	)

26 
	#SERVER_TYPE_CTRL
 0x04

	)

28 
usšg
 
Çme¥aû
 
	gtba£
::
og
;

29 
usšg
 
Çme¥aû
 
	gtba£
::
t¡©
;

30 
usšg
 
Çme¥aû
 
	gtba£
::
rocmÚ
;

32 
Çme¥aû
 
	g¥p


34 
Çme¥aû
 
	gcomm


37 şas 
	cCS”v”Ba£


39 
	gpublic
:

40 
CS”v”Ba£
();

41 
	gvœtu®
 ~
CS”v”Ba£
();

42 
vœtu®
 
run
(
¬gc
, * 
¬gv
[]);

43 
vœtu®
 
¡¬tup
(
boŞ
 
bg_run
 = 
Œue
);

45 
vœtu®
 
»®run
(
¬gc
, * 
¬gv
[]) {}

47 
vœtu®
 
£rv”ty³
()

49  
	gSERVER_TYPE_UNKNOWN
;

53 
CTLog
 
	glog_
;

55 
CTSt
 
	g¡©_
;

57 
CTProcMÚCli
 
	gmÚşi_
;

60 
	g´Ùeùed
:

61 
	sTIÁ”Çl


64 
¬gc_
;

65 ** 
	g¬gv_
;

67 
	gmÚi_š‹r_time_
;

69 
	gf¡©_š‹r_time_
;

71 
	g¡©_š‹r_time_
;

73 
TIÁ”Çl
* 
	gix_
;

74 
	gpublic
:

76 
boŞ
 
»lßd
();

77 
boŞ
 
qu™
();

78 
sigu¤1_hªdË
(
signo
);

79 
sigu¤2_hªdË
(
signo
);

80 
	gæag_
;

81 
	gv”siÚ_desc
[64];

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/spp_async_interface.h

1 #iâdeà
SPP_ASYNC_INTERFACE


2 
	#SPP_ASYNC_INTERFACE


	)

4 
	#RESERVED_SESSION_ID_SUP
 500

	)

5 
	#RESERVED_SESSION_ID_INF
 1

	)

7 
	#DEFAULT_MULTI_CON_INF
 10

	)

8 
	#DEFAULT_MULTI_CON_SUP
 50

	)

10 
şass
 
	gCPŞËrUn™
;

11 
şass
 
	gCTim”Un™
;

13 şas 
	cSPP_ASYNC


15 
	mpublic
:

16 
	tSID
;

17 
	tCONID
;

19 
	eSPP_ASYNC_RET_ENUM
 {

20 
	mASYNC_SUCC
 = 0,

21 
	mASYNC_REG_ID_OVERLAP
 = -1,

22 
	mASYNC_SESSION_NONE_EXIST
 = -2,

23 
	mASYNC_SEND_FAILED
 = -3,

24 
	mASYNC_GENERAL_ERR
 = -4,

25 
	mASYNC_REG_SESSION_ERR
 = -5,

26 
	mASYNC_PARAM_ERR
 = -6 ,

27 
	mASYNC_CONNECT_ERR
 = -7,

28 
	mASYNC_FATAL_ERR
 = -13

31 
SID
 
C»©eSessiÚ
(cÚ¡ 
sid
,

32 cÚ¡ * 
ty³
,

33 cÚ¡ * 
subty³
,

34 cÚ¡ * 

,

35 cÚ¡ 
pÜt
,

36 cÚ¡ 
»cv_út
,

37 cÚ¡ 
timeout
,

38 cÚ¡ 
šf
 = 
DEFAULT_MULTI_CON_INF
,

39 cÚ¡ 
sup
 = 
DEFAULT_MULTI_CON_SUP
);

41 
SID
 
C»©eTmSessiÚ
(cÚ¡ 
tm_sid
,

42 cÚ¡ 
time_š‹rv®
,

43 
time_sk_func
 
func
,

44 * 
sk_·¿
);

47 
SID
 
C»©eSessiÚ
(cÚ¡ 
sid
,

48 
fd
,

49 
¿w_hªdË_func
 
šput_f
 = 
NULL
,

50 * 
šput_·¿m
 = 
NULL
,

51 
¿w_hªdË_func
 
ouut_f
 = 
NULL
,

52 * 
ouut_·¿m
 = 
NULL
,

53 
¿w_hªdË_func
 
exû±iÚ_f
 = 
NULL
,

54 * 
exû±iÚ_·¿m
 = 
NULL
);

57 
SPP_ASYNC_RET_ENUM
 
De¡roySessiÚ
(
SID
 
sid
);

59 
SPP_ASYNC_RET_ENUM
 
De¡royTmSessiÚ
(
SID
 
tm_sid
);

61 
SPP_ASYNC_RET_ENUM
 
RegSessiÚC®lBack
(
SID
 
id
,

62 
´oûss_func
 
´oc
,

63 * 
´oc_·¿m
,

64 
šput_func
 
šput_f
,

65 * 
šput_·¿m
);

68 
SPP_ASYNC_RET_ENUM
 
RegSessiÚC®lBack
(cÚ¡ 
sid
,

69 
¿w_hªdË_func
 
šput_f
,

70 * 
šput_·¿m
,

71 
¿w_hªdË_func
 
ouut_f
,

72 * 
ouut_·¿m
,

73 
¿w_hªdË_func
 
exû±iÚ_f
,

74 * 
exû±iÚ_·¿m
);

76 
EÇbËIÅut
(cÚ¡ 
sid
);

78 
Di§bËIÅut
(cÚ¡ 
sid
);

80 
EÇbËOuut
(cÚ¡ 
sid
);

82 
Di§bËOuut
(cÚ¡ 
sid
);

85 
SPP_ASYNC_RET_ENUM
 
RegPackC®lBack
(
SID
 
id
,

86 
·ck_cb_func
 
´oc
,

87 * 
glob®_·¿m
);

90 
SPP_ASYNC_RET_ENUM
 
S’dD©a
(
SID
 
sid
, * 
buf
, 
buæ’
);

92 
SPP_ASYNC_RET_ENUM
 
S’dD©a
(
SID
 
sid
, * 
buf
, 
buæ’
,

93 * 
šput_·¿m
, * 
´oc_·¿m
);

95 
SPP_ASYNC_RET_ENUM
 
S’dD©a
(
SID
 
sid
, * 
buf
, 
buæ’
, * 
·ck_šfo
);

97 
SPP_ASYNC_RET_ENUM
 
S’dD©a
(
SID
 
sid
, * 
buf
, 
buæ’
,

98 * 
šput_·¿m
, * 
´oc_·¿m
, * 
·ck_šfo
);

100 
SPP_ASYNC_RET_ENUM
 
RecyşeCÚ
(
SID
 
sid
 = -1, 
CONID
 
cÚid
 = -1);

102 
S‘CÚÃùR‘ryIÁ”v®
();

104 
S‘IdËTimeout
(
timeout
,
sid
=-1);

106 
S‘U£rD©a
(
æow
, * 
d©a
);

108 * 
G‘U£rD©a
(
æow
);

110 
CPŞËrUn™
* 
G‘PŞËrUn™
();

111 
CTim”Un™
* 
G‘Tim”Un™
();

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/spp_version.h

1 #iâdeà
__SPP_VERSION_H__


2 
	#__SPP_VERSION_H__


	)

4 
__©Œibu‹__
((
w—k
)è
	gSPP_VERSION
[64] = "spp version: spp 2.7.1„elease 0001";

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/tcommu.h

1 #iâdeà
_TBASE_TCOMMU_H_


2 
	#_TBASE_TCOMMU_H_


	)

3 
	~<uni¡d.h
>

4 
	~<¡ršg.h
>

5 
	~<sys/time.h
>

8 
	#COMMU_ERR_OVERLOAD_PKG
 -100

	)

9 
	#COMMU_ERR_OVERLOAD_CONN
 -200

	)

12 
	#SOCK_TYPE_TCP
 0x1

	)

13 
	#SOCK_TYPE_UDP
 0x2

	)

14 
	#SOCK_TYPE_UNIX
 0x4

	)

15 
	#SOCK_TYPE_NOTIFY
 0x8

	)

16 
	#SOCK_MAX_BIND
 100

	)

18 
Çme¥aû
 
	gtba£


20 
Çme¥aû
 
	gtcommu


25 
	gCB_CONNECTED
 = 0,

26 
	gCB_DISCONNECT
,

27 
	gCB_RECVDATA
,

28 
	gCB_RECVERROR
,

29 
	gCB_RECVDONE
,

30 
	gCB_SENDDATA
,

31 
	gCB_SENDERROR
,

32 
	gCB_SENDDONE
,

33 
	gCB_HANGUP
,

34 
	gCB_OVERLOAD
,

35 
	gCB_TIMEOUT
,

36 } 
	tcb_ty³
;

40 
	gCT_DISCONNECT
 = 0,

41 
	gCT_CLOSE
,

42 
	gCT_STAT
,

43 } 
	tù¾_ty³
;

49 (*
	gcb_func
)(
	tæow
, * 
	t¬g1
, * 
	t¬g2
);

53 
	gËn
;

54 * 
	gd©a
;

55 * 
	gowÃr
;

56 * 
	gextd©a
;

57 } 
	tblob_ty³
;

61 
	gfd_
;

62 
	gty³_
;

63 
	gloÿl_
;

64 
	gloÿÍÜt_
;

65 
	g»mÙe_
;

66 
	g»mÙ•Üt_
;

67 
time_t
 
	g»cvtime_
;

68 
su£cÚds_t
 
	gtv_u£c
;

69 } 
	tTCÚnExtInfo
;

72 şas 
	cCTCommu


74 
	gpublic
:

75 
CTCommu
() {

76 
mem£t
(
func_li¡_
, 0, (
cb_func
è*(
CB_TIMEOUT
 + 1));

77 
mem£t
(
func_¬gs_
, 0, (*è*(
CB_TIMEOUT
 + 1));

79 
	gvœtu®
 ~
CTCommu
() {}

83 
vœtu®
 
š™
(cÚ¡ * 
cÚfig
) = 0;

87 
vœtu®
 
pŞl
(
boŞ
 
block
 = 
çl£
) = 0;

93 
vœtu®
 
£ndto
(
æow
, * 
¬g1
, * 
¬g2
) = 0;

100 
vœtu®
 
ù¾
(
æow
, 
ù¾_ty³
 
ty³
, * 
¬g1
, * 
¬g2
) = 0;

106 
vœtu®
 
»g_cb
(
cb_ty³
 
ty³
, 
cb_func
 
func
, * 
¬gs
 = 
NULL
) {

107 ià(
ty³
 <ğ
CB_TIMEOUT
) {

108 
func_li¡_
[
ty³
] = 
func
;

109 
	gfunc_¬gs_
[
ty³
] = 
¬gs
;

117 
vœtu®
 
ş—r
() = 0;

119 
	g´Ùeùed
:

120 
cb_func
 
func_li¡_
[
CB_TIMEOUT
 + 1];

121 * 
	gfunc_¬gs_
[
CB_TIMEOUT
 + 1];

124 
vœtu®
 
fši
() = 0;

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/tlog.h

1 #iâdeà
_TBASE_TLOG_H_


2 
	#_TBASE_TLOG_H_


	)

3 
	~<time.h
>

4 
	~<¡d¬g.h
>

9 #ifdeà
_THREAD_SAFE


10 
	~<±h»ad.h
>

13 
	#INTERNAL_LOG
 
SšgËTÚ
<
CTLog
, 
C»©eByPrÙo
>::
	`In¡ªû
()

	)

19 #ifdeà
_MP_MODE


22 
	#DEFAULT_MAX_FILE_SIZE
 (1 << 30)

23 
	#DEFAULT_MAX_FILE_NO
 1000

24 
	#MAX_PATH_LEN
 256

25 
	#MAX_LOG_LEN
 4096

26 
	#LOG_FLAG_TIME
 0x01

27 
	#LOG_FLAG_TID
 0x02

28 
	#LOG_FLAG_LEVEL
 0x04

29 
	#ERR_FD_NO
 0x00

30 

	)

31 
Çme¥aû
 
	gtba£


33 
Çme¥aû
 
	gog


37 
	eLOG_TYPE


39 
	gLOG_TYPE_CYCLE
 = 0,

40 
	gLOG_TYPE_DAILY
,

41 
	gLOG_TYPE_HOURLY
,

42 
	gLOG_TYPE_CYCLE_DAILY
,

43 
	gLOG_TYPE_CYCLE_HOURLY


46 
	eLOG_LEVEL


48 
	gLOG_TRACE
 = 0,

49 
	gLOG_DEBUG
,

50 
	gLOG_NORMAL
,

51 
	gLOG_ERROR
,

52 
	gLOG_FATAL
,

53 
	gLOG_NONE


60 (*
	glog_hook
)(cÚ¡ *
	tfmt
, 
	tva_li¡
 
	t­
);

63 şas 
	cCTLog


65 
	gpublic
:

66 
CTLog
();

67 ~
CTLog
();

77 
log_İ’
(
log_Ëv–
, 
log_ty³
, cÚ¡ * 
log_·th
, cÚ¡ * 
Çme_´efix
, 
max_fe_size
, 
max_fe_no
);

81 
log_Ëv–
(
Ëv–
);

83 
log_i
(
æag
, 
log_Ëv–
, cÚ¡ *
fmt
, ...);

84 
log_i_va
(
æag
, 
log_Ëv–
, cÚ¡ * 
fmt
, 
va_li¡
 
va
);

86 
log_i_bš
(
log_Ëv–
, cÚ¡ * 
buf
, 
Ën
);

88 
log_£t_hook
(
log_hook
 
hook
);

95 cÚ¡ * 
to_hex
(cÚ¡ * 
bš
, 
Ën
, * 
buf
, 
size
);

96 
	g´Ùeùed
:

97 
log_Ëv–_
;

98 
	glog_ty³_
;

99 
	glog_·th_
[
MAX_PATH_LEN
];

100 
	gÇme_´efix_
[
MAX_PATH_LEN
];

101 
	gmax_fe_size_
;

102 
	gmax_fe_no_
;

104 
	glog_fd_
;

105 
	gcur_fe_size_
;

106 
	gcur_fe_no_
;

107 
time_t
 
	g´e_time_
;

108 
	gf’ame_
[
MAX_PATH_LEN
];

109 
	gbufãr_
[
MAX_LOG_LEN
];

110 
log_hook
 
	ghook_
;

112 
şo£_fe
();

113 
log_fe_Çme
(* 
f•©h
, * 
f’ame
);

114 
İ’_fe
();

115 
š™_cur_fe_no
();

116 
fÜû_»Çme
(cÚ¡ * 
¤c_·thÇme
, cÚ¡ * 
d¡_·thÇme
);

117 
shiá_fe
();

119 
g‘_time
(& 
buff_Ën
);

120 
g‘_tid
(& 
buff_Ën
);

122 
g‘_Ëv–
(& 
buff_Ën
, 
log_Ëv–
);

123 #ifdeà
_THREAD_SAFE


124 şas 
	cCLogLock


126 
	gpublic
:

127 
CLogLock
()

129 
±h»ad_mu‹x_lock
(&
mu‹x_
);

131 ~
CLogLock
()

133 
±h»ad_mu‹x_uÆock
(&
mu‹x_
);

135 
	g´iv©e
:

136 
±h»ad_mu‹x_t
 
mu‹x_
;

146 
	#LOG_OPEN
 
log_İ’


	)

147 
	#LOG_P
(
lvl
, 
fmt
, 
¬gs
...è
	`log_i
(
LOG_FLAG_TIME
,†vl, fmt, ##¬gs)

	)

148 
	#LOG_P_NOTIME
(
lvl
, 
fmt
, 
¬gs
...è
	`log_i
(0,†vl, fmt, ##¬gs)

	)

149 
	#LOG_P_PID
(
lvl
, 
fmt
, 
¬gs
...è
	`log_i
(
LOG_FLAG_TIME
 | 
LOG_FLAG_TID
,†vl, fmt, ##¬gs)

	)

150 
	#LOG_P_LEVEL
(
lvl
, 
fmt
, 
¬gs
...è
	`log_i
(
LOG_FLAG_TIME
 | 
LOG_FLAG_LEVEL
,†vl, fmt, ##¬gs)

	)

151 
	#LOG_P_FILE
(
lvl
, 
fmt
, 
¬gs
...è
	`log_i
(
LOG_FLAG_TIME
,†vl, "[%-10s][%-4d][%-10s]"fmt, 
__FILE__
, 
__LINE__
, 
__FUNCTION__
, ##¬gs)

	)

152 
	#LOG_P_ALL
(
lvl
, 
fmt
, 
¬gs
...è
	`log_i
(
LOG_FLAG_TIME
 | 
LOG_FLAG_LEVEL
 | 
LOG_FLAG_TID
,†vl, "[%-10s][%-4d][%-10s]"fmt,
__FILE__
, 
__LINE__
, 
__FUNCTION__
, ##¬gs)

	)

153 
	#LOG_P_BIN
 
log_i_bš


	)

154 
	#SET_HOOK
 
log_£t_hook


	)

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/tprocmon.h

1 #iâdeà
_TBASE_TPROCMON_H_


2 
	#_TBASE_TPROCMON_H_


	)

3 
	~<uni¡d.h
>

5 
	~<sys/msg.h
>

6 
	~<”ºo.h
>

7 
	~<¡ršg.h
>

8 
	~<¡dio.h
>

9 
	~<time.h
>

10 
	~<sigÇl.h
>

11 
	~<¡dšt.h
>

12 
	~"li¡.h
"

13 
	~"t¡©.h
"

14 
	~"og.h
"

16 
	#MAX_FILEPATH_LEN
 128

17 
	#BUCKET_SIZE
 10

18 
	#MAX_PROC_GROUP_NUM
 100

19 
	#MAX_MSG_BUFF
 100

20 
	#MSG_EXPIRE_TIME
 120

21 
	#MSG_VERSION
 0x01

22 
	#MSG_ID_SERVER
 0x01

23 
	#MSG_SRC_SERVER
 0x00

24 
	#MSG_SRC_CLIENT
 0x01

25 
	#DEFAULT_MQ_KEY
 0x800100

26 

	)

27 
	#PROCMON_EVENT_PROCDEAD
 1

28 
	#PROCMON_EVENT_OVERLOAD
 (1<<1)

29 
	#PROCMON_EVENT_LOWSRATE
 (1<<2)

30 
	#PROCMON_EVENT_LATENCY
 (1<<3)

31 
	#PROCMON_EVENT_OTFMEM
 (1<<4)

32 
	#PROCMON_EVENT_PROCDOWN
 (1<<5)

33 
	#PROCMON_EVENT_PROCUP
 (1<<6)

34 
	#PROCMON_EVENT_FORKFAIL
 (1<<7)

35 
	#PROCMON_EVENT_MQKEYCONFIGERROR
 (1<<8)

36 
	#PROCMON_EVENT_TASKPAUSE
 (1<<9)

37 
	#PROCMON_EVENT_QSTATNULL
 (1<<10)

38 

	)

39 
	#PROCMON_CMD_KILL
 0x1

40 
	#PROCMON_CMD_LOAD
 0x2

41 
	#PROCMON_CMD_FORK
 0x4

42 

	)

43 
	#PROCMON_STATUS_OK
 0x0

44 
	#PROCMON_STATUS_OVERLOAD
 1

45 
	#PROCMON_STATUS_LOWSRATE
 (1<<1)

46 
	#PROCMON_STATUS_LATENCY
 (1<<2)

47 
	#PROCMON_STATUS_OTFMEM
 (1<<3)

48 

	)

49 
usšg
 
Çme¥aû
 
	g¥p
::
comm
;

50 
usšg
 
Çme¥aû
 
	gtba£
::
og
;

52 
Çme¥aû
 
	gtba£


54 
Çme¥aû
 
	grocmÚ


60 
	ggroupid_
;

61 
time_t
 
	gadju¡_´oc_time
;

62 
	gba£·th_
[
MAX_FILEPATH_LEN
];

63 
	gexefe_
[
MAX_FILEPATH_LEN
];

64 
	g‘cfe_
[
MAX_FILEPATH_LEN
];

65 
	gex™sigÇl_
;

66 
	gmax´oúum_
;

67 
	gmš´oúum_
;

68 
	gh—¹b—t_
;

69 
	gm­fe_
[
MAX_FILEPATH_LEN
];

70 * 
	gq_»cv_p¡©
;

71 
	gty³
;

72 
	g£ndkey
;

73 
	g£ndkeysize
;

74 
	g»cvkey
;

75 
	g»cvkeysize
;

76 
	gmqkey
;

77 
	g»£rve_
[8];

78 
	ggroup_ty³_
;

79 
	gaffš™y_
;

80 } 
	tTGroupInfo
;

84 
	ggroupid_
;

85 
	g´ocid_
;

86 
time_t
 
	gtime¡amp_
;

87 
	g»£rve_
[8];

88 } 
	tTProcInfo
;

92 
	ggroupid_
;

93 
	g´ocid_
;

94 
	gcmd_
;

95 
	g¬g1_
;

96 
	g¬g2_
;

97 
	g»£rve_
[8];

98 } 
	tTProcEv’t
;

102 
	gmsgty³_
;

103 
	gmsgËn_
;

104 
	g¤ùy³_
;

105 
time_t
 
	gtime¡amp_
;

106 
	gmsgcÚ‹Á_
[
MAX_MSG_BUFF
];

107 } 
	tTProcMÚMsg
;

111 şas 
	cCCommu


113 
	gpublic
:

114 
CCommu
() {}

115 
vœtu®
 ~
CCommu
() {}

119 
vœtu®
 
š™
(* 
¬gs
) = 0;

121 
vœtu®
 
fši
() = 0;

126 
vœtu®
 
»cv
(
TProcMÚMsg
* 
msg
, 
msgty³
 = 1) = 0;

130 
vœtu®
 
£nd
(
TProcMÚMsg
* 
msg
) = 0;

133 şas 
	cCMQCommu
 : 
public
 
CCommu


135 
public
:

136 
CMQCommu
();

137 
CMQCommu
(
mqkey
);

138 ~
CMQCommu
();

139 
š™
(* 
¬gs
);

140 
fši
();

141 
»cv
(
TProcMÚMsg
* 
msg
, 
msgty³
 = 0);

142 
£nd
(
TProcMÚMsg
* 
msg
);

143 
	g´Ùeùed
:

144 
mqid_
;

152 
TGroupInfo
 
	ggroupšfo_
;

153 
li¡_h—d_t
 
	gbuck‘_
[
BUCKET_SIZE
];

154 
	gcu½roúum_
;

155 
	g”½roúum_
;

156 } 
	tTProcGroupObj
;

160 
TProcInfo
 
	g´ocšfo_
;

161 
	g¡©us_
;

162 
li¡_h—d_t
 
	gli¡_
;

163 } 
	tTProcObj
;

166 (*
	gmÚ¤v_cb
)(cÚ¡ 
	tTGroupInfo
* 
	tgroupšfo
 ,

167 cÚ¡ 
	tTProcInfo
* 
	t´ocšfo
 ,

168 
	tev’t
 ,

169 * 
	t¬g
 );

172 
TProcGroupObj
* 
	ggroup
;

173 
TProcObj
** 
	g´oc
;

174 } 
	tTProcQu”yObj
;

176 
şass
 
	gtba£
::
t¡©
::
CTSt
;

177 şas 
	cCTProcMÚSrv


179 
	gpublic
:

180 
CTProcMÚSrv
();

181 
	gvœtu®
 ~
CTProcMÚSrv
();

185 
£t_commu
(
CCommu
* 
commu
);

187 
£t_og
(
CTLog
* 
log
);

192 
add_group
(cÚ¡ 
TGroupInfo
* 
groupšfo
);

198 
mod_group
(
groupid
, cÚ¡ 
TGroupInfo
* 
groupšfo
);

201 
run
();

206 
¡©
(* 
buf
, * 
buf_Ën
);

208 
¡©
(
tba£
::
t¡©
::
CTSt
 *stat);

210 
kÏÎ
(
signo
);

212 
qu”y
(
TProcQu”yObj
*& 
»suÉ
, & 
num
);

213 
	g´Ùeùed
:

214 
CTLog
* 
log_
;

215 
CCommu
* 
	gcommu_
;

217 
TProcGroupObj
 
	g´oc_groups_
[
MAX_PROC_GROUP_NUM
];

218 
	gcur_group_
;

219 
TProcMÚMsg
 
	gmsg_
[2];

221 
boŞ
 
do_»cv
(
msgty³
);

222 
boŞ
 
do_check
();

223 
add_´oc
(
groupid
, cÚ¡ 
TProcInfo
* 
´ocšfo
);

224 
TProcObj
* 
fšd_´oc
(
groupid
, 
´ocid
);

225 
d–_´oc
(
groupid
, 
´ocid
);

227 
vœtu®
 
check_group
(
TGroupInfo
* 
group
, 
cu½roúum
);

228 
vœtu®
 
boŞ
 
check_´oc
(
TGroupInfo
* 
group
, 
TProcInfo
* 
´oc
);

229 
vœtu®
 
boŞ
 
do_ev’t
(
ev’t
, * 
¬g1
, * 
¬g2
);

230 
vœtu®
 
do_fÜk
(cÚ¡ * 
ba£·th
, cÚ¡ * 
exefe
, cÚ¡ * 
‘cfe
,

231 
num
, 
group_ty³
, 
mask
);

232 
vœtu®
 
do_kl
(
´ocid
, 
signo
 = 
SIGKILL
);

233 
vœtu®
 
do_Üd”
(
groupid
, 
´ocid
, 
ev’Šo
, 
cmd
, 
¬g1
 = 0, 
¬g2
 = 0);

234 
boŞ
 
check_groupbusy
(
groupid
);

235 
£t_affš™y
(cÚ¡ 
ušt64_t
 
mask
);

241 şas 
	cCTProcMÚCli


243 
	gpublic
:

244 
CTProcMÚCli
();

245 
	gvœtu®
 ~
CTProcMÚCli
();

248 
£t_commu
(
CCommu
* 
commu
);

250 
run
();

251 
TProcMÚMsg
 
	gmsg_
[2];

252 
	g´Ùeùed
:

253 
CCommu
* 
commu_
;

256 
	#CLI_SEND_INFO
(
şi
è((
TProcInfo
*)(şi)->
msg_
[0].
msgcÚ‹Á_
)

257 
	#CLI_RECV_INFO
(
şi
è((
TProcEv’t
*)(şi)->
msg_
[1].
msgcÚ‹Á_
)

258 

	)

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/tstat.h

1 #iâdeà
_TBASE_TSTAT_H_


2 
	#_TBASE_TSTAT_H_


	)

3 
	~<¡dlib.h
>

4 
	~<¡ršg.h
>

6 
	~"t¡©_pŞicy.h
"

8 
	#STAT_TYPE_SUM
 1

9 
	#STAT_TYPE_AVG
 1<<1

10 
	#STAT_TYPE_MAX
 1<<2

11 
	#STAT_TYPE_MIN
 1<<3

12 
	#STAT_TYPE_COUNT
 1<<4

13 
	#STAT_TYPE_SET
 1<<5

14 

	)

15 
	#STAT_TYPE_ALL
 -1

17 
	#STAT_TYPE_NUM
 6

18 

	)

19 
	#TSTAT_MAGICNUM
 83846584

20 
	#TSTAT_VERSION
 0x02

21 
	#BUCKET_NUM
 200

22 
	#DEFAULT_STATOBJ_NUM
 200

23 
	#DEFAULT_STATVAL_NUM
 (
DEFAULT_STATOBJ_NUM
*1)

24 
	#STAT_BUFF_SIZE
 1<<18

25 
	#STAT_MAX_VALSIZE
 10

26 
	#INVALID_HANDLE
 -1

	)

28 
	#ERR_STAT_EXIST
 -2000

29 
	#ERR_STAT_NONE
 -2001

30 
	#ERR_STAT_FULL
 -2010

31 
	#ERR_STAT_OPENFILE
 -2020

32 
	#ERR_STAT_TRUNFILE
 -2021

33 
	#ERR_STAT_MAPFILE
 -2030

34 
	#ERR_STAT_MEMERROR
 -2040

35 
	#ERR_STAT_DEL_FILE
 -2050

36 
	#ERR_STAT_FILE_NULL
 -2060

37 

	)

38 
Çme¥aû
 
	gtba£


40 
Çme¥aû
 
	gt¡©


45 
	gid_
[
STAT_ID_MAX_LEN
];

46 
	gdesc_
[
STAT_ID_MAX_LEN
 * 2];

47 
	gty³_
;

48 
	gv®_size_
;

49 
TStV®
 
	gcouÁ_
;

50 
	gv®_off£t_
;

51 
	gÃxt_
;

52 } 
	tTStObj
;

57 
	gmagic_
;

58 
	glock_
;

59 
	gbufãr_
[
STAT_BUFF_SIZE
];

60 
	gä“li¡_
;

61 
	gbuck‘_
[
BUCKET_NUM
];

62 
	g¡©objs_u£d_
;

63 
TStObj
 
	g¡©objs_
[
DEFAULT_STATOBJ_NUM
];

64 
	g¡©v®s_u£d_
;

65 
TStV®
 
	g¡©v®s_
[
DEFAULT_STATVAL_NUM
];

66 } 
	tTStPoŞ
;

70 şas 
	cCTSt


72 
	gpublic
:

73 
CTSt
();

74 ~
CTSt
();

78 
š™_¡©poŞ
(cÚ¡ * 
m­f•©h
 = 
NULL
);

81 
»ad_¡©poŞ
(cÚ¡ * 
m­f•©h
 = 
NULL
);

86 
š™_¡©pŞicy
(
CTStPŞicy
* 
pŞicy
, 
ty³
);

93 
š™_¡©obj
(cÚ¡ * 
id
, 
ty³
, cÚ¡ * 
desc
 = 
NULL
, 
v®_sz›
 = 1);

100 
¡•
(cÚ¡ ** 
ids
, 
num
, 
v®
, 
v®_idx
 = 1);

106 
¡•0
(cÚ¡ * 
id
, 
v®
, 
v®_idx
 = 1);

112 
»suÉ
(** 
bufãr
, * 
Ën
, 
size
);

115 
»£t
();

120 
qu”y
(cÚ¡ * 
id
, 
TStObjW¿µ”
* 
w¿µ”
);

128 
š™_¡©obj_äame
(cÚ¡ * 
id
, 
ty³
, 
šdex
, cÚ¡ * 
desc
 = 
NULL
, 
v®_sz›
 = 1);

134 
İ
(
šdex
, 
v®
, 
v®_idx
 = 1);

139 
qu”yšdex
(
šdex
, 
TStObjW¿µ”
* 
w¿µ”
);

141 
	g´Ùeùed
:

142 
CTStPŞicy
* 
pŞicy_
[
STAT_TYPE_NUM
];

143 
	gpŞicy_no_
[
STAT_TYPE_NUM
];

144 
	gpŞicy_ty³_
[1 << 
STAT_TYPE_NUM
];

145 
TStPoŞ
* 
	g¡©poŞ_
;

146 
	gpŞicy_num_
;

147 
boŞ
 
	gm­fe_
;

148 
TStObj
* 
	g¡©šdex_
[
DEFAULT_STATOBJ_NUM
];

151 
šlše
 
hashid
(cÚ¡ * 
id
)

153 
	gËn
 = 
¡¾’
(
id
);

154 
	ghash
 = 1315423911;

156 
	gi
 = 0; i < 
	gËn
; ++i)

158 
	ghash
 ^ğ((
hash
 << 5è+ 
id
[
i
] + (hash >> 2));

161  
	ghash
 % 
	gBUCKET_NUM
;

163 
check_¡©poŞ
(cÚ¡ * 
m­f•©h
);

164 
fšd_¡©obj
(cÚ¡ * 
id
, 
ty³
 = 
STAT_TYPE_ALL
, 
TStObj
 **
pobj
 = 
NULL
);

165 
®loc_¡©obj
(
v®_size
);

166 
š£¹_¡©obj
(
choiû
);

167 
š£¹_¡©obj_äame
(
choiû
, 
šdex
);

168 
ouut_¡©poŞ
(* 
bufãr
, * 
Ën
, 
size
);

169 
ouut_¡©obj
(cÚ¡ 
TStObj
* 
obj
, 
couÁ
, cÚ¡ * 
v®ues
, 
v®_size
, * 
bufãr
, * 
Ën
, 
bufãr_size
);

170 
ÃwpoŞ
();

171 (
	gCTSt
::*
	tvis™_func
)(
	tTStObj
*, *);

172 
Œav–
(
vis™_func
 
vis™Ü
, * 
d©a
 = 
NULL
);

173 
do_»£t
(
TStObj
* 
obj
, * 
d©a
 = 
NULL
);

174 
do_»suÉ
(
TStObj
* 
obj
, * 
d©a
 = 
NULL
);

179 
£t_¡©šdex
(
šdex
, 
TStObj
 *
obj
);

184 
TStObj
* 
g‘_¡©šdex
(
šdex
);

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/tstat_policy.h

1 #iâdeà
_TBASE_TSTAT_POLICY_H_


2 
	#_TBASE_TSTAT_POLICY_H_


	)

5 
	~"©omic.h
"

6 
	~<¡dio.h
>

8 
	#STAT_ID_MAX_LEN
 64

11 

	)

21 
	#TStV®
 
©omic_t


	)

22 
	#STATVAL_INC
(
v®
è
	`©omic_šc
(&(v®))

	)

23 
	#STATVAL_DEC
(
v®
è
	`©omic_dec
(&(v®))

	)

24 
	#STATVAL_ADD
(
v®
, 
lv
è
	`©omic_add
Öv, &(v®))

	)

25 
	#STATVAL_SET
(
v®
, 
lv
è
	`©omic_£t
(&(v®),†v)

	)

26 
	#STATVAL_READ
(
v®
è
	`©omic_»ad
(&(v®))

	)

29 
Çme¥aû
 
	gtba£


31 
Çme¥aû
 
	gt¡©


35 * 
	gid_
;

36 * 
	gdesc_
;

37 
	gty³_
;

38 
	gv®_size_
;

39 
TStV®
* 
	gcouÁ_
;

40 
TStV®
* 
	gv®ue_
;

41 } 
	tTStObjW¿µ”
;

45 şas 
	cCTStPŞicy


47 
	gpublic
:

48 
CTStPŞicy
() {}

49 
vœtu®
 ~
CTStPŞicy
() {}

54 
vœtu®
 
__¡•__
(
TStObjW¿µ”
* 
rg‘
, 
v®
, 
v®_idx
) = 0;

60 
vœtu®
 
__»suÉ__
(
TStObjW¿µ”
* 
rg‘
, * 
v®
, * 
v®_size
) {

62 ià(
	grg‘
 =ğ
NULL
 || 
rg‘
->
v®_size_
 <ğ0 || 
v®
 == NULL) {

63 
´štf
("[ERROR]Please check:\n"

67 
rg‘
->
v®_size_


69 
ex™
(-1);

72 *
	gv®_size
 = 
rg‘
->
v®_size_
;

74 
	gi
 = 0; i < *
	gv®_size
; ++i)

75 
	gv®
[
i
] = 
STATVAL_READ
(
rg‘
->
v®ue_
[i]);

77  
STATVAL_READ
(*(
rg‘
->
couÁ_
));;

80 
vœtu®
 
__»£t__
(
TStObjW¿µ”
* 
rg‘
) {

82 ià(
	grg‘
 =ğ
NULL
 || 
rg‘
->
v®_size_
 <= 0) {

83 
´štf
("[ERROR]Please check:\n"

86 
rg‘
->
v®_size_


88 
ex™
(-1);

91 
	gi
 = 0; i < 
	grg‘
->
	gv®_size_
; ++i)

92 
STATVAL_SET
(
rg‘
->
v®ue_
[
i
], 0);

94 
STATVAL_SET
(*(
rg‘
->
couÁ_
), 0);

97 
vœtu®
 cÚ¡ * 
__g__
() = 0;

101 şas 
	cCTStPŞicyS‘
 : 
public
 
CTStPŞicy


103 
public
:

104 
CTStPŞicyS‘
() {}

105 ~
CTStPŞicyS‘
() {}

106 
vœtu®
 
__¡•__
(
TStObjW¿µ”
* 
rg‘
, 
v®
, 
v®_idx
) {

107 ià(
	grg‘
 =ğ
NULL
 || 
rg‘
->
v®_size_
 <= 0) {

108 
´štf
("[ERROR]Please check:\n"

111 
rg‘
->
v®_size_


113 
ex™
(-1);

116 
STATVAL_SET
(
rg‘
->
v®ue_
[
v®_idx
 - 1], 
v®
);

118 ià(
	gv®_idx
 =ğ
rg‘
->
v®_size_
)

119 
STATVAL_INC
(*(
rg‘
->
couÁ_
));

121 
vœtu®
 cÚ¡ * 
__g__
() {

127 şas 
	cCTStPŞicySum
 : 
public
 
CTStPŞicy


129 
public
:

130 
CTStPŞicySum
() {}

131 ~
CTStPŞicySum
() {}

132 
vœtu®
 
__¡•__
(
TStObjW¿µ”
* 
rg‘
, 
v®
, 
v®_idx
) {

134 ià(
	grg‘
 =ğ
NULL
 || 
rg‘
->
v®_size_
 <= 0) {

135 
´štf
("[ERROR]Please check:\n"

138 
rg‘
->
v®_size_


140 
ex™
(-1);

143 
STATVAL_ADD
(
rg‘
->
v®ue_
[
v®_idx
 - 1], 
v®
);

145 ià(
	gv®_idx
 =ğ
rg‘
->
v®_size_
)

146 
STATVAL_INC
(*(
rg‘
->
couÁ_
));

148 
vœtu®
 cÚ¡ * 
__g__
() {

154 şas 
	cCTStPŞicyAvg
 : 
public
 
CTStPŞicy


156 
public
:

157 
CTStPŞicyAvg
() {}

158 ~
CTStPŞicyAvg
() {}

159 
vœtu®
 
__¡•__
(
TStObjW¿µ”
* 
rg‘
, 
v®
, 
v®_idx
) {

161 ià(
	grg‘
 =ğ
NULL
 || 
rg‘
->
v®_size_
 <= 0) {

162 
´štf
("[ERROR]Please check:\n"

165 
rg‘
->
v®_size_


167 
ex™
(-1);

170 
STATVAL_ADD
(
rg‘
->
v®ue_
[
v®_idx
 - 1], 
v®
);

172 ià(
	gv®_idx
 =ğ
rg‘
->
v®_size_
)

173 
STATVAL_INC
(*(
rg‘
->
couÁ_
));

175 
vœtu®
 
__»suÉ__
(
TStObjW¿µ”
* 
rg‘
, * 
v®
, * 
v®_size
) {

177 ià(
	grg‘
 =ğ
NULL
 || 
rg‘
->
v®_size_
 <ğ0 || 
v®
 == NULL) {

178 
´štf
("[ERROR]Please check:\n"

182 
rg‘
->
v®_size_


184 
ex™
(-1);

187 
	g‹mp
 = 
STATVAL_READ
(*(
rg‘
->
couÁ_
));

189 ià(
	g‹mp
 > 0) {

190 *
	gv®_size
 = 
rg‘
->
v®_size_
;

192 
	gi
 = 0; i < *
	gv®_size
; ++i)

193 
	gv®
[
i
] = 
STATVAL_READ
(
rg‘
->
v®ue_
[i]è/ 
‹mp
;

195  
	g‹mp
;

200 
vœtu®
 cÚ¡ * 
__g__
() {

206 şas 
	cCTStPŞicyMax
 : 
public
 
CTStPŞicy


208 
public
:

209 
CTStPŞicyMax
() {}

210 ~
CTStPŞicyMax
() {}

211 
vœtu®
 
__¡•__
(
TStObjW¿µ”
* 
rg‘
, 
v®
, 
v®_idx
) {

213 ià(
	grg‘
 =ğ
NULL
 || 
rg‘
->
v®_size_
 <= 0) {

214 
´štf
("[ERROR]Please check:\n"

217 
rg‘
->
v®_size_


219 
ex™
(-1);

222 
	g‹mp
 = 
STATVAL_READ
(
rg‘
->
v®ue_
[
v®_idx
 - 1]);

224 ià(
	g‹mp
 < 
	gv®
)

225 
STATVAL_SET
(
rg‘
->
v®ue_
[
v®_idx
 - 1], 
v®
);

227 ià(
	gv®_idx
 =ğ
rg‘
->
v®_size_
)

228 
STATVAL_INC
(*(
rg‘
->
couÁ_
));

230 
vœtu®
 cÚ¡ * 
__g__
() {

236 şas 
	cCTStPŞicyMš
 : 
public
 
CTStPŞicy


238 
public
:

239 
CTStPŞicyMš
() {}

240 ~
CTStPŞicyMš
() {}

241 
vœtu®
 
__¡•__
(
TStObjW¿µ”
* 
rg‘
, 
v®
, 
v®_idx
) {

243 ià(
	grg‘
 =ğ
NULL
 || 
rg‘
->
v®_size_
 <= 0) {

244 
´štf
("[ERROR]Please check:\n"

247 
rg‘
->
v®_size_


249 
ex™
(-1);

252 
	g‹mp
 = 
STATVAL_READ
(
rg‘
->
v®ue_
[0]);

254 ià(
	g‹mp
 > 
	gv®
 ||emp == 0)

255 
STATVAL_SET
(
rg‘
->
v®ue_
[0], 
v®
);

257 
STATVAL_INC
(*(
rg‘
->
couÁ_
));

259 
vœtu®
 cÚ¡ * 
__g__
() {

265 şas 
	cCTStPŞicyCouÁ
 : 
public
 
CTStPŞicy


267 
public
:

268 
CTStPŞicyCouÁ
() {}

269 ~
CTStPŞicyCouÁ
() {}

270 
vœtu®
 
__¡•__
(
TStObjW¿µ”
* 
rg‘
, 
v®
, 
v®_idx
) {

272 ià(
	grg‘
 =ğ
NULL
 || 
rg‘
->
v®_size_
 <= 0) {

273 
´štf
("[ERROR]Please check:\n"

276 
rg‘
->
v®_size_


278 
ex™
(-1);

281 
STATVAL_ADD
(
rg‘
->
v®ue_
[
v®_idx
 - 1], 
v®
);

283 ià(
	gv®_idx
 =ğ
rg‘
->
v®_size_
)

284 
STATVAL_INC
(*(
rg‘
->
couÁ_
));

286 
vœtu®
 cÚ¡ * 
__g__
() {

	@protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/sppincl.h

1 #iâdeà
_SPP_INCL_H_


2 
	#_SPP_INCL_H_


	)

3 
	~"¥p_šş/¥p_v”siÚ.h
"

4 
	~"¥p_šş/og.h
"

5 
	~"¥p_šş/t¡©.h
"

6 
	~"¥p_šş/tcommu.h
"

7 
	~"¥p_šş/£rv”ba£.h
"

8 
	~"¥p_šş/asyn_­i.h
"

9 
	~"¥p_šş/¥p_async_š‹rçû.h
"

10 
	~"¥p_šş/CommDef.h
"

11 
	~"¥p_šş/AsyncF¿me.h
"

12 
	~"¥p_šş/IS‹.h
"

13 
	~"¥p_šş/IAùiÚ.h
"

14 
	~"¥p_šş/AùiÚInfo.h
"

15 
	~"¥p_šş/AùiÚS‘.h
"

16 
	~"¥p_šş/SEXIÁ”çû.h
"

18 
	#GROUPID
(
x
è(((x)|1<<31))

	)

19 
usšg
 
Çme¥aû
 
	gtba£
::
og
;

20 
usšg
 
Çme¥aû
 
	gtba£
::
t¡©
;

21 
usšg
 
Çme¥aû
 
	gtba£
::
tcommu
;

22 
usšg
 
Çme¥aû
 
	g¥p
::
comm
;

23 
usšg
 
Çme¥aû
 
	g¥p
::
comm
;

24 
	gUSING_ASYNCFRAME_NS
;

	@protobuf_cpp_service/pkg_resource/cpp/src/vrpc/base/CApiBase.cc

8 
	~<¡dio.h
>

9 
	~<”ºo.h
>

10 
	~<¡ršg
>

11 
	~"CApiBa£.h
"

12 
	~"mem_toŞs.h
"

13 
	~"”rÜ_def.h
"

14 
	~"v½c/´ÙocŞ/´ÙocŞ.h
"

15 
	~"v½c/´ÙocŞ/v½c_h—d.pb.h
"

16 
	~"şib_sock_l5.h
"

18 
usšg
 
	g¡d
::
¡ršg
;

20 
Çme¥aû
 
	gv½c


22 
Çme¥aû
 
	gba£


25 
ušt32_t
 
	gCApiBa£
::
m_uiSeq
 = 0;

27 
	gCApiBa£
::
CApiBa£
()

29 
m_pcSock
 = 
Ãw
 
şib_sock_l5
;

32 
	gCApiBa£
::~
CApiBa£
()

34 
d–‘e
 
m_pcSock
;

37 
št32_t
 
	gCApiBa£
::
In™
Ğ
iL5ModId
, 
iL5CmdId
, 
iLÚgCÚn
, 
iTimeOut
, 
iCÚnPrÙo
 )

39 
št32_t
 
	giR‘
 = 0;

41 
	giR‘
 = 
m_pcSock
->
š™
Ğ
iL5ModId
, 
iL5CmdId
, 
iLÚgCÚn
, 
iTimeOut
, 
iCÚnPrÙo
 );

42 ifĞ
	giR‘
 != 0 )

44 
S‘E¼ÜMes§ge
Ğ"m_pcSock->š™ƒ¼Ü.»t:%d", 
iR‘
 );

45  
	gAPI_SOCKINIT_ERR
;

51 
št32_t
 
	gCApiBa£
::
S‘DeçuÉS”v”
ĞcÚ¡ * 
pchIp
, 
iPÜt
 )

53  
	gm_pcSock
->
£t_deçuÉ_£rv”
Ğ
pchIp
, 
iPÜt
 );

56 
št32_t
 
	gCApiBa£
::
C®lS”v”
Ğšt32_ˆ
iCmd
, cÚ¡ 
googË
::
´Ùobuf
::
Mes§ge
& 
cReqBody
,

57 
googË
::
´Ùobuf
::
Mes§ge
& 
cRe¥Body
 )

59 
v½c
::
´ÙocŞ
::
h—d
 
cReqH—d
;

61 
	gcReqH—d
.
£t_v”
Ğ
v½c
::
´ÙocŞ
::
VRPC_VER_1
 );

62 
	gcReqH—d
.
£t_cmd
Ğ
iCmd
 );

63 
	gcReqH—d
.
£t_£q
Ğ
m_uiSeq
++ );

65 
	gv½c
::
´ÙocŞ
::
h—d
 
cRe¥H—d
;

66 
	giR‘
 = 
S’dAndRecvPb
Ğ
cReqH—d
, 
cReqBody
, 
cRe¥H—d
, 
cRe¥Body
 );

67 ifĞ
	giR‘
 != 0 )

69  
iR‘
;

75 
št32_t
 
	gCApiBa£
::
S’dAndRecvPb
ĞcÚ¡ 
v½c
::
´ÙocŞ
::
h—d
& 
cReqH—d
,

76 cÚ¡ 
googË
::
´Ùobuf
::
Mes§ge
& 
cReqBody
,

77 
v½c
::
´ÙocŞ
::
h—d
& 
cRe¥H—d
,

78 
googË
::
´Ùobuf
::
Mes§ge
& 
cRe¥Body
 )

80 
¡ršg
 
¡rReq
;

81 
¡ršg
 
	g¡rRe¥
;

82 
¡ršg
 
	g¡¾5tmp
;

84 * 
	gpcBuf
 = 
NULL
;

85 
	giBufL’
 = 0;

86 
	gv½c
::
´ÙocŞ
::
·ck_mes§ge
Ğ
cReqH—d
, 
cReqBody
, 
pcBuf
, 
iBufL’
 );

87 
CScİePŒGu¬dC
 
cBufGu¬d
(
pcBuf
);

88 
	giR‘
 = 
S’dAndRecvPbSŒ
Ğ
pcBuf
, 
iBufL’
, 
¡rRe¥
 );

89 ifĞ
	giR‘
 != 0 )

91 
¡¾5tmp
 = "SendAndRecvPbStr is failure";

92 
	gm_pcSock
->
upd©e_»suÉ
(
L5_ERROR
, 
¡¾5tmp
);

93  
	giR‘
;

96 
	g¡¾5tmp
 = "SendAndRecvPbStr is ok";

97 
	gm_pcSock
->
upd©e_»suÉ
(
L5_OK
, 
¡¾5tmp
);

99 
	giR‘
 = 
v½c
::
´ÙocŞ
::
uÅack_mes§ge
Ğ
¡rRe¥
, 
cRe¥H—d
, 
cRe¥Body
 );

100 ifĞ
	giR‘
 != 0 )

102 
m_pcSock
->
şo£
();

103 
S‘E¼ÜMes§ge
Ğ"uÅack_mes§g”rÜ.»t[%d]", 
iR‘
 );

104  
	gv½c
::
ba£
::
API_PARSERESP_ERR
;

107 ifĞ
	gcRe¥H—d
.
v”
()!=
cReqH—d
.ver() ||

108 
cRe¥H—d
.
cmd
()!=
cReqH—d
.cmd() ||

109 
cRe¥H—d
.
£q
()!=
cReqH—d
.seq() )

111 
S‘E¼ÜMes§ge
( "resp headƒrr.„eq[ver:%u cmd:%u seq:%u]„esp[ver:%u cmd:%u seq:%u]",

112 
cReqH—d
.
v”
(), cReqH—d.
cmd
(), cReqH—d.
£q
(),

113 
cRe¥H—d
.
v”
(), cRe¥H—d.
cmd
(), cRe¥H—d.
£q
() );

114 
	gm_pcSock
->
şo£
();

115  
	gv½c
::
ba£
::
API_RESPHEAD_ERR
;

121 
št32_t
 
	gCApiBa£
::
S’dAndRecvPbSŒ
ĞcÚ¡ * 
pcBuf
, 
iBufL’
, 
¡ršg
& 
¡rRe¥
 )

123 
	giR‘
 = 
m_pcSock
->
£nd
Ğ
pcBuf
, 
iBufL’
 );

124 ifĞ
	giR‘
 !ğ
iBufL’
 )

126 
S‘E¼ÜMes§ge
( "m_pcSock->sendƒrror.ret[%d] should[%d]ƒrr[%s]",

127 
iR‘
, 
iBufL’
, 
m_pcSock
->
g‘_”r_msg
() );

128 
	gm_pcSock
->
şo£
();

129  
	gv½c
::
ba£
::
API_SOCKSEND_ERR
;

133 
	gszBuf
[65535];

134 
	giR‘
 = 
m_pcSock
->
»cv
Ğ
szBuf
, 
v½c
::
´ÙocŞ
::
PKG_LENGTH_LEN
 );

135 ifĞ
	giR‘
 !ğ
v½c
::
´ÙocŞ
::
PKG_LENGTH_LEN
 )

137 
S‘E¼ÜMes§ge
( "m_pcSock->recv…kglenƒrror.ret[%d] should[%d]ƒrr[%s]",

138 
iR‘
, 
v½c
::
´ÙocŞ
::
PKG_LENGTH_LEN
, 
m_pcSock
->
g‘_”r_msg
() );

139 
	gm_pcSock
->
şo£
();

140  
	gv½c
::
ba£
::
API_SOCKRECVLEN_ERR
;

143 
ušt32_t
 
	guiPkgL’
 = 
Áohl
(*(ušt32_t*)
szBuf
);

144 
ušt32_t
 
	guiLeáL’
 = 
uiPkgL’
-(uint32_t);

147 ifĞ
	guiPkgL’
 > (
	gszBuf
) )

149 
	gm_pcSock
->
şo£
();

150 
S‘E¼ÜMes§ge
( "recv buf isoo small. buflen[%u]…kglen[%u]",

151 (
szBuf
), 
uiPkgL’
 );

152  
	gv½c
::
ba£
::
API_BUFOVERFLOW_ERR
;

156 
	giR‘
 = 
m_pcSock
->
»cv
Ğ
szBuf
+
v½c
::
´ÙocŞ
::
PKG_LENGTH_LEN
, 
uiLeáL’
 );

157 ifĞ
	giR‘
 !ğ()
uiLeáL’
 )

159 
S‘E¼ÜMes§ge
( "m_pcSock->recv bodyƒrror.ret[%d] should[%d]ƒrr[%s]",

160 
iR‘
, 
uiLeáL’
, 
m_pcSock
->
g‘_”r_msg
() );

161 
	gm_pcSock
->
şo£
();

162  
	gv½c
::
ba£
::
API_SOCKRECVBODY_ERR
;

165 
	g¡rRe¥
.
assign
Ğ
szBuf
, 
uiPkgL’
 );

	@protobuf_cpp_service/pkg_resource/cpp/src/vrpc/base/CApiBase.h

8 #iâdeà
CAPIBASE_H_


9 
	#CAPIBASE_H_


	)

11 
	~<¡ršg
>

12 
	~<sys/sock‘.h
>

13 
	~"v½c/ba£/CObjeù.h
"

15 
usšg
 
Çme¥aû
 
	g¡d
;

18 
şass
 
	gşib_sock_l5
;

19 
Çme¥aû
 
	ggoogË


21 
Çme¥aû
 
	g´Ùobuf


23 
şass
 
	gMes§ge
;

26 
Çme¥aû
 
	gv½c


28 
Çme¥aû
 
	g´ÙocŞ


30 
şass
 
	gh—d
;

34 
Çme¥aû
 
	gv½c


36 
Çme¥aû
 
	gba£


39 şas 
	cCApiBa£
 : 
public
 
CObjeù


41 
public
:

42 
CApiBa£
();

43 
	gvœtu®


44 ~
CApiBa£
();

46 
št32_t
 
In™
Ğ
iL5ModId
, 
iL5CmdId
, 
iLÚgCÚn
, 
iTimeOut
, 
iCÚnPrÙo
 = 
SOCK_STREAM
 );

48 
št32_t
 
S‘DeçuÉS”v”
ĞcÚ¡ *
pchIp
, cÚ¡ 
iPÜt
 );

50 
	g´Ùeùed
:

51 
ušt32_t
 
m_uiSeq
;

52 
şib_sock_l5
* 
	gm_pcSock
;

54 
št32_t
 
C®lS”v”
Ğšt32_ˆ
iCmd
, cÚ¡ 
googË
::
´Ùobuf
::
Mes§ge
& 
cReqBody
,

55 
googË
::
´Ùobuf
::
Mes§ge
& 
cRe¥Body
 );

56 
št32_t
 
S’dAndRecvPb
ĞcÚ¡ 
v½c
::
´ÙocŞ
::
h—d
& 
cReqH—d
,

57 cÚ¡ 
googË
::
´Ùobuf
::
Mes§ge
& 
cReqBody
,

58 
v½c
::
´ÙocŞ
::
h—d
& 
cRe¥H—d
,

59 
googË
::
´Ùobuf
::
Mes§ge
& 
cRe¥Body
 );

60 
št32_t
 
S’dAndRecvPbSŒ
ĞcÚ¡ * 
pcBuf
, 
iBufL’
, 
¡ršg
& 
¡rRe¥
 );

	@protobuf_cpp_service/pkg_resource/cpp/src/vrpc/base/CObject.cc

8 
	~"CObjeù.h
"

10 
Çme¥aû
 
	gv½c


12 
Çme¥aû
 
	gba£


15 
	gCObjeù
::
CObjeù
()

19 
CObjeù
::~CObject()

	@protobuf_cpp_service/pkg_resource/cpp/src/vrpc/base/CObject.h

8 #iâdeà
COBJECT_H_


9 
	#COBJECT_H_


	)

10 
	~<¡d¬g.h
>

11 
	~<¡dio.h
>

13 
Çme¥aû
 
	gv½c


15 
Çme¥aû
 
	gba£


18 şas 
	cCObjeù


20 
	gpublic
:

21 
CObjeù
();

22 
	gvœtu®


23 ~
CObjeù
();

25 
šlše
 cÚ¡ * 
G‘E¼ÜMes§ge
()

27  
	gm_szE¼
;

30 
šlše
 
S‘E¼ÜMes§ge
ĞcÚ¡ * 
fmt
, ... )

32 
va_li¡
 
	g¬gs
;

34 
va_¡¬t
(
¬gs
, 
fmt
);

35 
v¢´štf
Ğ
m_szE¼
, (m_szE¼), 
fmt
, 
¬gs
 );

36 
va_’d
(
¬gs
);

39 
vœtu®
 
Re£t
()

41 
	gm_szE¼
[0] = 0;

44 
	g´iv©e
:

45 
m_szE¼
[1024];

	@protobuf_cpp_service/pkg_resource/cpp/src/vrpc/base/CService.h

8 #iâdeà
CSERVICE_H_


9 
	#CSERVICE_H_


	)

10 
	~"v½c/ba£/CObjeù.h
"

12 
Çme¥aû
 
	gv½c


14 
Çme¥aû
 
	gba£


17 şas 
	cCS”viû
 : 
public
 
CObjeù


19 
public
:

20 
CS”viû
(){}

21 
vœtu®
 ~
CS”viû
(){}

22 
vœtu®
 
In™W™hCÚf
ĞcÚ¡ * 
pchCÚfFe
 ) = 0;

	@protobuf_cpp_service/pkg_resource/cpp/src/vrpc/base/error_def.h

8 #iâdeà
ERROR_DEF_H_


9 
	#ERROR_DEF_H_


	)

12 
	#L5_OK
 0

	)

15 
	#L5_ERROR
 (-1)

	)

17 
Çme¥aû
 
	gv½c


19 
Çme¥aû
 
	gba£


21 
	eE¼ÜCode


23 
	gAPI_SOCKINIT_ERR
 = -101,

24 
	gAPI_SOCKSEND_ERR
 = -102,

25 
	gAPI_SOCKRECVLEN_ERR
 = -103,

26 
	gAPI_SOCKRECVBODY_ERR
 = -104,

27 
	gAPI_PARSERESP_ERR
 = -105,

28 
	gAPI_RESPHEAD_ERR
 = -106,

29 
	gAPI_BUFOVERFLOW_ERR
 = -107

	@protobuf_cpp_service/pkg_resource/cpp/src/vrpc/base/mem_tools.h

1 #iâdeà
_VRPC_BASE_MEM_TOOLS_H_


2 
	#_VRPC_BASE_MEM_TOOLS_H_


	)

3 
	~"v½c/ba£/CObjeù.h
"

5 
Çme¥aû
 
	gv½c


7 
Çme¥aû
 
	gba£


10 
	#SAFE_FREE
(
p
)\

13 ifĞ
p
 !ğ
NULL
 )\

15 ::
	`ä“
(
p
);\

17 
p
 = 
NULL
;\

18 }0)

	)

20 
	#SAFE_DELETE
(
p
)\

23 
d–‘e
 
p
;\

24 
p
 = 
NULL
;\

25 }0)

	)

27 
	#SAFE_DELETE_ARR
(
p
)\

30 
d–‘e
[] 
p
;\

31 
p
 = 
NULL
;\

32 }0)

	)

34 
	g‹m¶©e
<
şass
 
	gT
>

35 şas 
	cCScİePŒGu¬d
 : 
public
 
CObjeù


37 
public
:

38 
CScİePŒGu¬d
Ğ
T
* 
p
 ) : 
m_p
(p)

42 ~
CScİePŒGu¬d
()

44 
SAFE_DELETE
(
m_p
);

47 
	g´iv©e
:

48 
T
* 
m_p
;

51 şas 
	cCScİePŒGu¬dC
 : 
public
 
CObjeù


53 
public
:

54 
CScİePŒGu¬dC
Ğ* 
p
 ) : 
m_p
(p)

58 ~
CScİePŒGu¬dC
()

60 
SAFE_FREE
(
m_p
);

63 
	g´iv©e
:

64 * 
m_p
;

	@protobuf_cpp_service/pkg_resource/cpp/src/vrpc/ipc/CSysVShm.cc

7 
	~<¡ršg.h
>

8 
	~<”ºo.h
>

9 
	~<sys/shm.h
>

10 
	~"CSysVShm.h
"

12 
Çme¥aû
 
	gv½c


14 
Çme¥aû
 
	gc


17 
	gCSysVShm
::
CSysVShm
(è: 
m_key
(-1), 
m_id
(-1), 
m_pcD©a
(
NULL
)

22 
	gCSysVShm
::~
CSysVShm
()

27 
CSysVShm
::
O³nAndA‰ach
Ğ
key_t
 
key
, 
size_t
 
size
, 
oæag
 )

29 
	gshm_id
 = 
shmg‘
Ğ
key
, 
size
, 
oæag
 );

30 ifĞ-1 =ğ
shm_id
 )

32 
S‘E¼ÜMes§ge
Ğ"shmg‘ faed.”r:%s", 
¡»¼Ü
(
”ºo
) );

36 * 
	gd©a
 = 
shm©
Ğ
shm_id
, 
NULL
, 0 );

37 ifĞ-1 =ğ()
d©a
 )

39 
S‘E¼ÜMes§ge
Ğ"shm© faed.”r:%s", 
¡»¼Ü
(
”ºo
) );

43 
	gm_key
 = 
key
;

44 
	gm_id
 = 
shm_id
;

45 
	gm_pcD©a
 = 
d©a
;

	@protobuf_cpp_service/pkg_resource/cpp/src/vrpc/ipc/CSysVShm.h

8 #iâdeà
CSYSVSHM_H_


9 
	#CSYSVSHM_H_


	)

10 
	~<sys/ty³s.h
>

11 
	~<sys/c.h
>

12 
	~"v½c/ba£/CObjeù.h
"

14 
Çme¥aû
 
	gv½c


16 
Çme¥aû
 
	gc


19 şas 
	cCSysVShm
 : 
public
 
v½c
::
ba£
::
CObjeù


21 
public
:

22 
CSysVShm
();

23 
	gvœtu®


24 ~
CSysVShm
();

26 
O³nAndA‰ach
Ğ
key_t
 
key
, 
size_t
 
size
, 
oæag
 );

27 * 
G‘ShmAddr
(){  
	gm_pcD©a
; }

28 
key_t
 
G‘Key
(){  
	gm_key
; }

29 
G‘Id
(){  
	gm_id
; }

31 
	g´iv©e
:

32 
key_t
 
m_key
;

33 
	gm_id
;

34 * 
	gm_pcD©a
;

	@protobuf_cpp_service/pkg_resource/cpp/src/vrpc/protocol/protocol.h

1 #iâdeà
_PROTOCOL_DEFINE_H_


2 
	#_PROTOCOL_DEFINE_H_


	)

3 
	~<¡ršg
>

4 
	~<¬·/š‘.h
>

5 
	~"v½c/´ÙocŞ/v½c_h—d.pb.h
"

7 
usšg
 
	g¡d
::
¡ršg
;

9 
Çme¥aû
 
	gv½c


11 
Çme¥aû
 
	g´ÙocŞ


14 cÚ¡ 
št32_t
 
	gPKG_LENGTH_LEN
 = (
ušt32_t
);

15 cÚ¡ 
ušt32_t
 
	gVRPC_VER_1
 = 1;

16 cÚ¡ 
ušt32_t
 
	gBUF_LEN
 = 10240;

18 
uÅack_h—d
ĞcÚ¡ * 
buf
, 
ušt32_t
 
buf_Ën
, 
v½c
::
´ÙocŞ
::
h—d
& head,

19 cÚ¡ *& 
body
, 
ušt32_t
& 
body_Ën
 )

22 
ušt32_t
 
	gpkg_Ën
 = 
Áohl
(*(ušt32_t*)
buf
);

23 
ušt32_t
 
	gh—d_Ën
 = 
Áohl
(*(ušt32_t*)(
buf
+
PKG_LENGTH_LEN
));

24 
	gbody_Ën
 = 
pkg_Ën
 - 2*
PKG_LENGTH_LEN
 - 
h—d_Ën
;

26 cÚ¡ * 
	gp_h—d
 = 
buf
+2*
PKG_LENGTH_LEN
;

27 
	gbody
 = 
buf
+2*
PKG_LENGTH_LEN
+
h—d_Ën
;

29 ifĞ
	gh—d_Ën
 > 
	gpkg_Ën
 )

35 ifĞ!
	gh—d
.
P¬£FromA¼ay
(
p_h—d
, 
h—d_Ën
) )

43 
uÅack_mes§ge
ĞcÚ¡ 
¡ršg
& 
¡rBuf
, 
v½c
::
´ÙocŞ
::
h—d
& head,

44 
googË
::
´Ùobuf
::
Mes§ge
& 
body
 )

46 cÚ¡ * 
body_±r
 = 
NULL
;

47 
ušt32_t
 
	gbody_Ën
 = 0;

48 
	g»t
 = 
uÅack_h—d
Ğ
¡rBuf
.
d©a
(), sŒBuf.
size
(), 
h—d
, 
body_±r
, 
body_Ën
 );

49 ifĞ
	g»t
 != 0 )

51  
»t
;

54 ifĞ!
	gbody
.
P¬£FromA¼ay
(
body_±r
, 
body_Ën
) )

62 
·ck_mes§ge
ĞcÚ¡ 
v½c
::
´ÙocŞ
::
h—d
& 
cH—d
,

63 cÚ¡ 
googË
::
´Ùobuf
::
Mes§ge
& 
cBody
,

64 *& 
pcBuf
, & 
iL’
 )

67 
	giH—dL’
 = 
cH—d
.
By‹Size
();

68 
	giBodyL’
 = 
cBody
.
By‹Size
();

69 
	giPkgL’
 = 2*
PKG_LENGTH_LEN
+
iH—dL’
+
iBodyL’
;

70 
	giL’
 = 
iPkgL’
;

72 
ušt32_t
 
	guiNPkgL’
 = 
htÚl
(
iPkgL’
);

73 
ušt32_t
 
	guiNH—dL’
 = 
htÚl
(
iH—dL’
);

75 
	gpcBuf
 = (*)
m®loc
(
iPkgL’
);

77 
memıy
Ğ
pcBuf
, (*)&
uiNPkgL’
, 
PKG_LENGTH_LEN
 );

78 
memıy
Ğ
pcBuf
+
PKG_LENGTH_LEN
, (*)&
uiNH—dL’
, PKG_LENGTH_LEN );

79 
	gcH—d
.
S”ŸlizeToA¼ay
Ğ
pcBuf
+2*
PKG_LENGTH_LEN
, 
iH—dL’
 );

80 
	gcBody
.
S”ŸlizeToA¼ay
Ğ
pcBuf
+2*
PKG_LENGTH_LEN
+
iH—dL’
, 
iBodyL’
 );

	@protobuf_cpp_service/pkg_resource/cpp/src/vrpc/protocol/vrpc_head.pb.cc

4 
	#INTERNAL_SUPPRESS_PROTOBUF_FIELD_DEPRECATION


	)

5 
	~"v½c_h—d.pb.h
"

7 
	~<®gÜ™hm
>

9 
	~<googË/´Ùobuf/¡ubs/commÚ.h
>

10 
	~<googË/´Ùobuf/¡ubs/Úû.h
>

11 
	~<googË/´Ùobuf/io/coded_¡»am.h
>

12 
	~<googË/´Ùobuf/wœe_fÜm©_l™e_šl.h
>

13 
	~<googË/´Ùobuf/desütÜ.h
>

14 
	~<googË/´Ùobuf/g’”©ed_mes§ge_»æeùiÚ.h
>

15 
	~<googË/´Ùobuf/»æeùiÚ_İs.h
>

16 
	~<googË/´Ùobuf/wœe_fÜm©.h
>

19 
Çme¥aû
 
	gv½c
 {

20 
Çme¥aû
 
	g´ÙocŞ
 {

22 
	gÇme¥aû
 {

24 cÚ¡ ::
googË
::
´Ùobuf
::
DesütÜ
* 
h—d_desütÜ_
 = 
NULL
;

25 cÚ¡ ::
googË
::
´Ùobuf
::
š‹º®
::
G’”©edMes§geReæeùiÚ
*

26 
h—d_»æeùiÚ_
 = 
NULL
;

31 
´Ùobuf_AssignDesc_v½c_5fh—d_2•rÙo
() {

32 
´Ùobuf_AddDesc_v½c_5fh—d_2•rÙo
();

33 cÚ¡ ::
googË
::
´Ùobuf
::
FeDesütÜ
* 
fe
 =

34 ::
googË
::
´Ùobuf
::
DesütÜPoŞ
::
g’”©ed_poŞ
()->
FšdFeByName
(

36 
GOOGLE_CHECK
(
fe
 !ğ
NULL
);

37 
	gh—d_desütÜ_
 = 
fe
->
mes§ge_ty³
(0);

38 cÚ¡ 
	gh—d_off£ts_
[3] = {

39 
GOOGLE_PROTOBUF_GENERATED_MESSAGE_FIELD_OFFSET
(
h—d
, 
v”_
),

40 
GOOGLE_PROTOBUF_GENERATED_MESSAGE_FIELD_OFFSET
(
h—d
, 
cmd_
),

41 
GOOGLE_PROTOBUF_GENERATED_MESSAGE_FIELD_OFFSET
(
h—d
, 
£q_
),

43 
	gh—d_»æeùiÚ_
 =

44 
Ãw
 ::
googË
::
´Ùobuf
::
š‹º®
::
G’”©edMes§geReæeùiÚ
(

45 
h—d_desütÜ_
,

46 
h—d
::
deçuÉ_š¡ªû_
,

47 
h—d_off£ts_
,

48 
GOOGLE_PROTOBUF_GENERATED_MESSAGE_FIELD_OFFSET
(
h—d
, 
_has_b™s_
[0]),

49 
GOOGLE_PROTOBUF_GENERATED_MESSAGE_FIELD_OFFSET
(
h—d
, 
_unknown_f›lds_
),

51 ::
googË
::
´Ùobuf
::
DesütÜPoŞ
::
g’”©ed_poŞ
(),

52 ::
googË
::
´Ùobuf
::
Mes§geFaùÜy
::
g’”©ed_çùÜy
(),

53 (
h—d
));

56 
	gÇme¥aû
 {

58 
GOOGLE_PROTOBUF_DECLARE_ONCE
(
´Ùobuf_AssignDesütÜs_Úû_
);

59 
šlše
 
´Ùobuf_AssignDesütÜsOnû
() {

60 ::
googË
::
´Ùobuf
::
GoogËOnûIn™
(&
´Ùobuf_AssignDesütÜs_Úû_
,

61 &
´Ùobuf_AssignDesc_v½c_5fh—d_2•rÙo
);

64 
´Ùobuf_Regi¡”Ty³s
(cÚ¡ ::
¡d
::
¡ršg
&) {

65 
´Ùobuf_AssignDesütÜsOnû
();

66 ::
googË
::
´Ùobuf
::
Mes§geFaùÜy
::
IÁ”ÇlRegi¡”G’”©edMes§ge
(

67 
h—d_desütÜ_
, &
h—d
::
deçuÉ_š¡ªû
());

72 
´Ùobuf_ShutdownFe_v½c_5fh—d_2•rÙo
() {

73 
d–‘e
 
	gh—d
::
deçuÉ_š¡ªû_
;

74 
d–‘e
 
	gh—d_»æeùiÚ_
;

77 
´Ùobuf_AddDesc_v½c_5fh—d_2•rÙo
() {

78 
boŞ
 
	g®»ady_h”e
 = 
çl£
;

79 ià(
	g®»ady_h”e
) ;

80 
	g®»ady_h”e
 = 
Œue
;

81 
	gGOOGLE_PROTOBUF_VERIFY_VERSION
;

83 ::
googË
::
´Ùobuf
::
DesütÜPoŞ
::
IÁ”ÇlAddG’”©edFe
(

86 ::
googË
::
´Ùobuf
::
Mes§geFaùÜy
::
IÁ”ÇlRegi¡”G’”©edFe
(

87 "v½c_h—d.´Ùo", &
´Ùobuf_Regi¡”Ty³s
);

88 
	gh—d
::
deçuÉ_š¡ªû_
 = 
Ãw
 
h—d
();

89 
	gh—d
::
deçuÉ_š¡ªû_
->
In™AsDeçuÉIn¡ªû
();

90 ::
googË
::
´Ùobuf
::
š‹º®
::
OnShutdown
(&
´Ùobuf_ShutdownFe_v½c_5fh—d_2•rÙo
);

94 
	sSticDesütÜIn™Ÿliz”_v½c_5fh—d_2•rÙo
 {

95 
SticDesütÜIn™Ÿliz”_v½c_5fh—d_2•rÙo
() {

96 
´Ùobuf_AddDesc_v½c_5fh—d_2•rÙo
();

98 } 
	g¡©ic_desütÜ_š™Ÿliz”_v½c_5fh—d_2•rÙo_
;

102 #iâdeà
_MSC_VER


103 cÚ¡ 
	gh—d
::
kV”F›ldNumb”
;

104 cÚ¡ 
	gh—d
::
kCmdF›ldNumb”
;

105 cÚ¡ 
	gh—d
::
kSeqF›ldNumb”
;

108 
	gh—d
::
h—d
()

109 : ::
googË
::
´Ùobuf
::
Mes§ge
() {

110 
Sh¬edCtÜ
();

113 
	gh—d
::
In™AsDeçuÉIn¡ªû
() {

116 
h—d
::h—d(cÚ¡ h—d& 
äom
)

117 : ::
googË
::
´Ùobuf
::
Mes§ge
() {

118 
Sh¬edCtÜ
();

119 
M”geFrom
(
äom
);

122 
	gh—d
::
Sh¬edCtÜ
() {

123 
_ÿched_size_
 = 0;

124 
	gv”_
 = 0u;

125 
	gcmd_
 = 0u;

126 
	g£q_
 = 0u;

127 ::
mem£t
(
_has_b™s_
, 0, (_has_bits_));

130 
	gh—d
::~
h—d
() {

131 
Sh¬edDtÜ
();

134 
	gh—d
::
Sh¬edDtÜ
() {

135 ià(
this
 !ğ
deçuÉ_š¡ªû_
) {

139 
h—d
::
S‘CachedSize
(
size
) const {

140 
GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN
();

141 
	g_ÿched_size_
 = 
size
;

142 
GOOGLE_SAFE_CONCURRENT_WRITES_END
();

144 cÚ¡ ::
googË
::
´Ùobuf
::
DesütÜ
* 
h—d
::
desütÜ
() {

145 
´Ùobuf_AssignDesütÜsOnû
();

146  
	gh—d_desütÜ_
;

149 cÚ¡ 
	gh—d
& h—d::
deçuÉ_š¡ªû
() {

150 ià(
deçuÉ_š¡ªû_
 =ğ
NULL
è
´Ùobuf_AddDesc_v½c_5fh—d_2•rÙo
();

151  *
	gdeçuÉ_š¡ªû_
;

154 
h—d
* 
	gh—d
::
deçuÉ_š¡ªû_
 = 
NULL
;

156 
h—d
* 
	gh—d
::
New
() const {

157  
Ãw
 
h—d
;

160 
	gh—d
::
CË¬
() {

161 ià(
_has_b™s_
[0 / 32] & (0xffu << (0 % 32))) {

162 
v”_
 = 0u;

163 
	gcmd_
 = 0u;

164 
	g£q_
 = 0u;

166 ::
mem£t
(
_has_b™s_
, 0, (_has_bits_));

167 
mubË_unknown_f›lds
()->
CË¬
();

170 
boŞ
 
	gh—d
::
M”geP¬tŸlFromCodedSŒ—m
(

171 ::
googË
::
´Ùobuf
::
io
::
CodedIÅutSŒ—m
* 
šput
) {

172 
	#DO_
(
EXPRESSION
èià(!(EXPRESSION)è 
çl£


	)

173 ::
googË
::
´Ùobuf
::
ušt32
 
g
;

174 (
	gg
 = 
šput
->
R—dTag
()) != 0) {

175 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
G‘TagF›ldNumb”
(
g
)) {

178 ià(::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
G‘TagWœeTy³
(
g
) ==

179 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
WIRETYPE_VARINT
) {

180 
DO_
((::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
R—dPrim™ive
<

181 ::
googË
::
´Ùobuf
::
ušt32
, ::googË::´Ùobuf::
š‹º®
::
WœeFÜm©L™e
::
TYPE_UINT32
>(

182 
šput
, &
v”_
)));

183 
£t_has_v”
();

185 
	ghªdË_unš‹½»‹d
;

187 ià(
	gšput
->
Ex³ùTag
(16)è
	g·r£_cmd
;

193 ià(::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
G‘TagWœeTy³
(
g
) ==

194 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
WIRETYPE_VARINT
) {

195 
·r£_cmd
:

196 
DO_
((::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
R—dPrim™ive
<

197 ::
googË
::
´Ùobuf
::
ušt32
, ::googË::´Ùobuf::
š‹º®
::
WœeFÜm©L™e
::
TYPE_UINT32
>(

198 
šput
, &
cmd_
)));

199 
£t_has_cmd
();

201 
	ghªdË_unš‹½»‹d
;

203 ià(
	gšput
->
Ex³ùTag
(24)è
	g·r£_£q
;

209 ià(::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
G‘TagWœeTy³
(
g
) ==

210 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
WIRETYPE_VARINT
) {

211 
·r£_£q
:

212 
DO_
((::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
R—dPrim™ive
<

213 ::
googË
::
´Ùobuf
::
ušt32
, ::googË::´Ùobuf::
š‹º®
::
WœeFÜm©L™e
::
TYPE_UINT32
>(

214 
šput
, &
£q_
)));

215 
£t_has_£q
();

217 
	ghªdË_unš‹½»‹d
;

219 ià(
	gšput
->
Ex³ùAtEnd
()è 
	gŒue
;

224 
hªdË_unš‹½»‹d
:

225 ià(::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
G‘TagWœeTy³
(
g
) ==

226 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
WIRETYPE_END_GROUP
) {

227  
Œue
;

229 
DO_
(::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©
::
SkF›ld
(

230 
šput
, 
g
, 
mubË_unknown_f›lds
()));

235  
	gŒue
;

236 #undeà
DO_


239 
	gh—d
::
S”ŸlizeW™hCachedSizes
(

240 ::
googË
::
´Ùobuf
::
io
::
CodedOuutSŒ—m
* 
ouut
) const {

242 ià(
has_v”
()) {

243 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
Wr™eUIÁ32
(1, 
this
->
v”
(), 
ouut
);

247 ià(
has_cmd
()) {

248 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
Wr™eUIÁ32
(2, 
this
->
cmd
(), 
ouut
);

252 ià(
has_£q
()) {

253 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
Wr™eUIÁ32
(3, 
this
->
£q
(), 
ouut
);

256 ià(!
unknown_f›lds
().
em±y
()) {

257 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©
::
S”ŸlizeUnknownF›lds
(

258 
unknown_f›lds
(), 
ouut
);

262 ::
googË
::
´Ùobuf
::
ušt8
* 
h—d
::
S”ŸlizeW™hCachedSizesToA¼ay
(

263 ::
googË
::
´Ùobuf
::
ušt8
* 
rg‘
) const {

265 ià(
has_v”
()) {

266 
rg‘
 = ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
Wr™eUIÁ32ToA¼ay
(1, 
this
->
v”
(),arget);

270 ià(
has_cmd
()) {

271 
	grg‘
 = ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
Wr™eUIÁ32ToA¼ay
(2, 
this
->
cmd
(), 
rg‘
);

275 ià(
has_£q
()) {

276 
	grg‘
 = ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
Wr™eUIÁ32ToA¼ay
(3, 
this
->
£q
(), 
rg‘
);

279 ià(!
unknown_f›lds
().
em±y
()) {

280 
	grg‘
 = ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©
::
S”ŸlizeUnknownF›ldsToA¼ay
(

281 
unknown_f›lds
(), 
rg‘
);

283  
	grg‘
;

286 
	gh—d
::
By‹Size
() const {

287 
tÙ®_size
 = 0;

289 ià(
	g_has_b™s_
[0 / 32] & (0xffu << (0 % 32))) {

291 ià(
has_v”
()) {

292 
	gtÙ®_size
 += 1 +

293 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
UIÁ32Size
(

294 
this
->
v”
());

298 ià(
has_cmd
()) {

299 
	gtÙ®_size
 += 1 +

300 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
UIÁ32Size
(

301 
this
->
cmd
());

305 ià(
has_£q
()) {

306 
	gtÙ®_size
 += 1 +

307 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©L™e
::
UIÁ32Size
(

308 
this
->
£q
());

312 ià(!
unknown_f›lds
().
em±y
()) {

313 
	gtÙ®_size
 +=

314 ::
googË
::
´Ùobuf
::
š‹º®
::
WœeFÜm©
::
Compu‹UnknownF›ldsSize
(

315 
unknown_f›lds
());

317 
GOOGLE_SAFE_CONCURRENT_WRITES_BEGIN
();

318 
	g_ÿched_size_
 = 
tÙ®_size
;

319 
GOOGLE_SAFE_CONCURRENT_WRITES_END
();

320  
	gtÙ®_size
;

323 
	gh—d
::
M”geFrom
(cÚ¡ ::
googË
::
´Ùobuf
::
Mes§ge
& 
äom
) {

324 
GOOGLE_CHECK_NE
(&
äom
, 
this
);

325 cÚ¡ 
h—d
* 
	gsourû
 =

326 ::
googË
::
´Ùobuf
::
š‹º®
::
dyÇmic_ÿ¡_if_avaabË
<cÚ¡ 
h—d
*>(

327 &
äom
);

328 ià(
	gsourû
 =ğ
NULL
) {

329 ::
googË
::
´Ùobuf
::
š‹º®
::
ReæeùiÚOps
::
M”ge
(
äom
, 
this
);

331 
M”geFrom
(*
sourû
);

335 
	gh—d
::
M”geFrom
(cÚ¡ 
h—d
& 
äom
) {

336 
GOOGLE_CHECK_NE
(&
äom
, 
this
);

337 ià(
	gäom
.
	g_has_b™s_
[0 / 32] & (0xffu << (0 % 32))) {

338 ià(
	gäom
.
has_v”
()) {

339 
£t_v”
(
äom
.
v”
());

341 ià(
	gäom
.
has_cmd
()) {

342 
£t_cmd
(
äom
.
cmd
());

344 ià(
	gäom
.
has_£q
()) {

345 
£t_£q
(
äom
.
£q
());

348 
mubË_unknown_f›lds
()->
M”geFrom
(
äom
.
unknown_f›lds
());

351 
	gh—d
::
CİyFrom
(cÚ¡ ::
googË
::
´Ùobuf
::
Mes§ge
& 
äom
) {

352 ià(&
äom
 =ğ
this
) ;

353 
CË¬
();

354 
M”geFrom
(
äom
);

357 
	gh—d
::
CİyFrom
(cÚ¡ 
h—d
& 
äom
) {

358 ià(&
äom
 =ğ
this
) ;

359 
CË¬
();

360 
M”geFrom
(
äom
);

363 
boŞ
 
	gh—d
::
IsIn™Ÿlized
() const {

365  
Œue
;

368 
	gh—d
::
Sw­
(
h—d
* 
Ùh”
) {

369 ià(
Ùh”
 !ğ
this
) {

370 
¡d
::
sw­
(
v”_
, 
Ùh”
->ver_);

371 
	g¡d
::
sw­
(
cmd_
, 
Ùh”
->cmd_);

372 
	g¡d
::
sw­
(
£q_
, 
Ùh”
->seq_);

373 
	g¡d
::
sw­
(
_has_b™s_
[0], 
Ùh”
->_has_bits_[0]);

374 
	g_unknown_f›lds_
.
Sw­
(&
Ùh”
->
_unknown_f›lds_
);

375 
	g¡d
::
sw­
(
_ÿched_size_
, 
Ùh”
->_cached_size_);

379 ::
googË
::
´Ùobuf
::
M‘ad©a
 
h—d
::
G‘M‘ad©a
() const {

380 
´Ùobuf_AssignDesütÜsOnû
();

381 ::
googË
::
´Ùobuf
::
M‘ad©a
 
m‘ad©a
;

382 
	gm‘ad©a
.
	gdesütÜ
 = 
h—d_desütÜ_
;

383 
	gm‘ad©a
.
	g»æeùiÚ
 = 
h—d_»æeùiÚ_
;

384  
	gm‘ad©a
;

	@protobuf_cpp_service/pkg_resource/cpp/src/vrpc/protocol/vrpc_head.pb.h

4 #iâdeà
PROTOBUF_v½c_5fh—d_2•rÙo__INCLUDED


5 
	#PROTOBUF_v½c_5fh—d_2•rÙo__INCLUDED


	)

7 
	~<¡ršg
>

9 
	~<googË/´Ùobuf/¡ubs/commÚ.h
>

11 #ià
GOOGLE_PROTOBUF_VERSION
 < 2005000

12 #”rÜ 
This
 
fe
 
was
 
g’”©ed
 
by
 
a
 
Ãw”
 
v”siÚ
 
of
 
´Ùoc
 
which
 
is


13 #”rÜ 
šcom·tibË
 
w™h
 
your
 
PrÙocŞ
 
Bufãr
 
h—d”s
. 
PËa£
 
upd©e


14 #”rÜ 
your
 
h—d”s
.

16 #ià2005000 < 
GOOGLE_PROTOBUF_MIN_PROTOC_VERSION


17 #”rÜ 
This
 
fe
 
was
 
g’”©ed
 
by
 
ª
 
Şd”
 
v”siÚ
 
of
 
´Ùoc
 
which
 
is


18 #”rÜ 
šcom·tibË
 
w™h
 
your
 
PrÙocŞ
 
Bufãr
 
h—d”s
. 
PËa£


19 #”rÜ 
»g’”©e
 
this
 
fe
 
w™h
 
a
 
Ãw”
 
v”siÚ
 
of
 
´Ùoc
.

22 
	~<googË/´Ùobuf/g’”©ed_mes§ge_ut.h
>

23 
	~<googË/´Ùobuf/mes§ge.h
>

24 
	~<googË/´Ùobuf/»³©ed_f›ld.h
>

25 
	~<googË/´Ùobuf/ex‹nsiÚ_£t.h
>

26 
	~<googË/´Ùobuf/unknown_f›ld_£t.h
>

29 
Çme¥aû
 
	gv½c
 {

30 
Çme¥aû
 
	g´ÙocŞ
 {

33 
´Ùobuf_AddDesc_v½c_5fh—d_2•rÙo
();

34 
´Ùobuf_AssignDesc_v½c_5fh—d_2•rÙo
();

35 
´Ùobuf_ShutdownFe_v½c_5fh—d_2•rÙo
();

37 
şass
 
	gh—d
;

41 şas 
	ch—d
 : 
public
 ::
googË
::
´Ùobuf
::
Mes§ge
 {

42 
public
:

43 
h—d
();

44 
	gvœtu®
 ~
h—d
();

46 
h—d
(cÚ¡ h—d& 
äom
);

48 
šlše
 
	gh—d
& 
	gİ”©Ü
=(cÚ¡ 
h—d
& 
äom
) {

49 
CİyFrom
(
äom
);

50  *
	gthis
;

53 
šlše
 cÚ¡ ::
googË
::
´Ùobuf
::
UnknownF›ldS‘
& 
unknown_f›lds
() const {

54  
_unknown_f›lds_
;

57 
	gšlše
 ::
googË
::
´Ùobuf
::
UnknownF›ldS‘
* 
mubË_unknown_f›lds
() {

58  &
_unknown_f›lds_
;

61 cÚ¡ ::
googË
::
´Ùobuf
::
DesütÜ
* 
desütÜ
();

62 cÚ¡ 
	gh—d
& 
deçuÉ_š¡ªû
();

64 
Sw­
(
h—d
* 
Ùh”
);

68 
h—d
* 
New
() const;

69 
CİyFrom
(cÚ¡ ::
googË
::
´Ùobuf
::
Mes§ge
& 
äom
);

70 
M”geFrom
(cÚ¡ ::
googË
::
´Ùobuf
::
Mes§ge
& 
äom
);

71 
CİyFrom
(cÚ¡ 
h—d
& 
äom
);

72 
M”geFrom
(cÚ¡ 
h—d
& 
äom
);

73 
CË¬
();

74 
boŞ
 
IsIn™Ÿlized
() const;

76 
By‹Size
() const;

77 
boŞ
 
M”geP¬tŸlFromCodedSŒ—m
(

78 ::
googË
::
´Ùobuf
::
io
::
CodedIÅutSŒ—m
* 
šput
);

79 
S”ŸlizeW™hCachedSizes
(

80 ::
googË
::
´Ùobuf
::
io
::
CodedOuutSŒ—m
* 
ouut
) const;

81 ::
googË
::
´Ùobuf
::
ušt8
* 
S”ŸlizeW™hCachedSizesToA¼ay
(::googË::´Ùobuf::ušt8* 
ouut
) const;

82 
G‘CachedSize
(ècÚ¡ {  
	g_ÿched_size_
; }

83 
	g´iv©e
:

84 
Sh¬edCtÜ
();

85 
Sh¬edDtÜ
();

86 
S‘CachedSize
(
size
) const;

87 
	gpublic
:

89 ::
googË
::
´Ùobuf
::
M‘ad©a
 
G‘M‘ad©a
() const;

96 
šlše
 
boŞ
 
has_v”
() const;

97 
šlše
 
ş—r_v”
();

98 cÚ¡ 
	gkV”F›ldNumb”
 = 1;

99 
	gšlše
 ::
googË
::
´Ùobuf
::
ušt32
 
v”
() const;

100 
šlše
 
£t_v”
(::
googË
::
´Ùobuf
::
ušt32
 
v®ue
);

103 
šlše
 
boŞ
 
has_cmd
() const;

104 
šlše
 
ş—r_cmd
();

105 cÚ¡ 
	gkCmdF›ldNumb”
 = 2;

106 
	gšlše
 ::
googË
::
´Ùobuf
::
ušt32
 
cmd
() const;

107 
šlše
 
£t_cmd
(::
googË
::
´Ùobuf
::
ušt32
 
v®ue
);

110 
šlše
 
boŞ
 
has_£q
() const;

111 
šlše
 
ş—r_£q
();

112 cÚ¡ 
	gkSeqF›ldNumb”
 = 3;

113 
	gšlše
 ::
googË
::
´Ùobuf
::
ušt32
 
£q
() const;

114 
šlše
 
£t_£q
(::
googË
::
´Ùobuf
::
ušt32
 
v®ue
);

117 
	g´iv©e
:

118 
šlše
 
£t_has_v”
();

119 
šlše
 
ş—r_has_v”
();

120 
šlše
 
£t_has_cmd
();

121 
šlše
 
ş—r_has_cmd
();

122 
šlše
 
£t_has_£q
();

123 
šlše
 
ş—r_has_£q
();

125 ::
googË
::
´Ùobuf
::
UnknownF›ldS‘
 
_unknown_f›lds_
;

127 ::
googË
::
´Ùobuf
::
ušt32
 
v”_
;

128 ::
googË
::
´Ùobuf
::
ušt32
 
cmd_
;

129 ::
googË
::
´Ùobuf
::
ušt32
 
£q_
;

131 
mubË
 
	g_ÿched_size_
;

132 ::
googË
::
´Ùobuf
::
ušt32
 
_has_b™s_
[(3 + 31) / 32];

134 
ä›nd
 
´Ùobuf_AddDesc_v½c_5fh—d_2•rÙo
();

135 
ä›nd
 
´Ùobuf_AssignDesc_v½c_5fh—d_2•rÙo
();

136 
ä›nd
 
´Ùobuf_ShutdownFe_v½c_5fh—d_2•rÙo
();

138 
In™AsDeçuÉIn¡ªû
();

139 
h—d
* 
	gdeçuÉ_š¡ªû_
;

149 
šlše
 
boŞ
 
	gh—d
::
has_v”
() const {

150  (
_has_b™s_
[0] & 0x00000001u) != 0;

152 
šlše
 
	gh—d
::
£t_has_v”
() {

153 
_has_b™s_
[0] |= 0x00000001u;

155 
šlše
 
	gh—d
::
ş—r_has_v”
() {

156 
_has_b™s_
[0] &= ~0x00000001u;

158 
šlše
 
	gh—d
::
ş—r_v”
() {

159 
v”_
 = 0u;

160 
ş—r_has_v”
();

162 
	gšlše
 ::
googË
::
´Ùobuf
::
ušt32
 
h—d
::
v”
() const {

163  
v”_
;

165 
šlše
 
	gh—d
::
£t_v”
(::
googË
::
´Ùobuf
::
ušt32
 
v®ue
) {

166 
£t_has_v”
();

167 
	gv”_
 = 
v®ue
;

171 
šlše
 
boŞ
 
	gh—d
::
has_cmd
() const {

172  (
_has_b™s_
[0] & 0x00000002u) != 0;

174 
šlše
 
	gh—d
::
£t_has_cmd
() {

175 
_has_b™s_
[0] |= 0x00000002u;

177 
šlše
 
	gh—d
::
ş—r_has_cmd
() {

178 
_has_b™s_
[0] &= ~0x00000002u;

180 
šlše
 
	gh—d
::
ş—r_cmd
() {

181 
cmd_
 = 0u;

182 
ş—r_has_cmd
();

184 
	gšlše
 ::
googË
::
´Ùobuf
::
ušt32
 
h—d
::
cmd
() const {

185  
cmd_
;

187 
šlše
 
	gh—d
::
£t_cmd
(::
googË
::
´Ùobuf
::
ušt32
 
v®ue
) {

188 
£t_has_cmd
();

189 
	gcmd_
 = 
v®ue
;

193 
šlše
 
boŞ
 
	gh—d
::
has_£q
() const {

194  (
_has_b™s_
[0] & 0x00000004u) != 0;

196 
šlše
 
	gh—d
::
£t_has_£q
() {

197 
_has_b™s_
[0] |= 0x00000004u;

199 
šlše
 
	gh—d
::
ş—r_has_£q
() {

200 
_has_b™s_
[0] &= ~0x00000004u;

202 
šlše
 
	gh—d
::
ş—r_£q
() {

203 
£q_
 = 0u;

204 
ş—r_has_£q
();

206 
	gšlše
 ::
googË
::
´Ùobuf
::
ušt32
 
h—d
::
£q
() const {

207  
£q_
;

209 
šlše
 
	gh—d
::
£t_£q
(::
googË
::
´Ùobuf
::
ušt32
 
v®ue
) {

210 
£t_has_£q
();

211 
	g£q_
 = 
v®ue
;

220 #iâdeà
SWIG


221 
Çme¥aû
 
	ggoogË
 {

222 
Çme¥aû
 
	g´Ùobuf
 {

	@protobuf_cpp_service/src/cpp_service.cc

7 
	~<googË/´Ùobuf/comp”/¶ugš.h
>

8 
	~"ıp_£rviû_g’”©Ü.h
"

10 
	$maš
Ğ
¬gc
, ** 
¬gv
 )

12 
googË
::
´Ùobuf
::
comp”
::
CµS”viûCodeG’”©Ü
 
g’”©Ü
;

13  
googË
::
´Ùobuf
::
comp”
::
	`PlugšMaš
(
¬gc
, 
¬gv
, &
g’”©Ü
);

14 
	}
}

	@protobuf_cpp_service/src/cpp_service_generator.cc

7 
	~<£t
>

8 
	~<googË/´Ùobuf/desütÜ.pb.h
>

9 
	~<googË/´Ùobuf/io/z”o_cİy_¡»am.h
>

10 
	~"ıp_£rviû_h–³rs.h
"

11 
	~"ıp_£rviû_g’”©Ü.h
"

13 
Çme¥aû
 
	ggoogË
 {

14 
Çme¥aû
 
	g´Ùobuf
 {

15 
Çme¥aû
 
	gcomp”
 {

17 
¡ršg
 
G‘SµMašFeName
ĞcÚ¡ 
FeDesütÜ
* 
fe
 )

19 
¡ršg
 
	gÇme
 = 
ıp_£rviû
::
ToFeName
Ğ
fe
->
·ckage
() );

20 ifĞ
	gÇme
.
size
() > 0 )

22  "¥p_" + 
	gÇme
 + "_main.cc";

30 
¡ršg
 
G‘SµMašObjName
ĞcÚ¡ 
FeDesütÜ
* 
fe
 )

32 
¡ršg
 
	gÇme
 = 
ıp_£rviû
::
ToFeName
Ğ
fe
->
·ckage
() );

33 ifĞ
	gÇme
.
size
() > 0 )

35  "¥p_" + 
	gÇme
 + "_main.o";

43 
¡ršg
 
G‘Ba£DefHFeName
ĞcÚ¡ 
FeDesütÜ
* 
fe
 )

45 
¡ršg
 
	gÇme
 = 
ıp_£rviû
::
ToFeName
Ğ
fe
->
·ckage
() );

46 ifĞ
	gÇme
.
size
() > 0 )

48  
	gÇme
 + "_def.h";

56 
¡ršg
 
G‘S”viûApiHFeName
ĞcÚ¡ 
FeDesütÜ
* 
fe
 )

58 
¡ršg
 
	gÇme
 = 
ıp_£rviû
::
ToFeName
Ğ
fe
->
£rviû
(0)->
fuÎ_Çme
() );

59  
	gÇme
 + "_api.h";

62 
¡ršg
 
G‘S”viûApiCCFeName
 ( cÚ¡ 
FeDesütÜ
* 
fe
 )

64 
¡ršg
 
	gÇme
 = 
ıp_£rviû
::
ToFeName
Ğ
fe
->
£rviû
(0)->
fuÎ_Çme
() );

65  
	gÇme
 + "_api.cc";

68 
¡ršg
 
G‘S”viûApiObjFeName
 ( cÚ¡ 
FeDesütÜ
* 
fe
 )

70 
¡ršg
 
	gÇme
 = 
ıp_£rviû
::
ToFeName
Ğ
fe
->
£rviû
(0)->
fuÎ_Çme
() );

71  
	gÇme
 + "_api.o";

74 
¡ršg
 
G‘S”viûApiR–—£Name
ĞcÚ¡ 
FeDesütÜ
* 
fe
 )

76 
¡ršg
 
	gÇme
 = 
ıp_£rviû
::
ToFeName
Ğ
fe
->
£rviû
(0)->
fuÎ_Çme
() );

77  "lib" + 
	gÇme
 + "_api.a";

80 
¡ršg
 
G‘S”viûHFeName
ĞcÚ¡ 
FeDesütÜ
* 
fe
 )

82 
¡ršg
 
	gÇme
 = 
ıp_£rviû
::
ToFeName
Ğ
fe
->
£rviû
(0)->
fuÎ_Çme
() );

83  
	gÇme
 + ".h";

86 
¡ršg
 
G‘S”viûCCFeName
ĞcÚ¡ 
FeDesütÜ
* 
fe
 )

88 
¡ršg
 
	gÇme
 = 
ıp_£rviû
::
ToFeName
Ğ
fe
->
£rviû
(0)->
fuÎ_Çme
() );

89  
	gÇme
 + ".cc";

92 
¡ršg
 
G‘S”viûObjFeName
ĞcÚ¡ 
FeDesütÜ
* 
fe
 )

94 
¡ršg
 
	gÇme
 = 
ıp_£rviû
::
ToFeName
Ğ
fe
->
£rviû
(0)->
fuÎ_Çme
() );

95  
	gÇme
 + ".o";

98 
¡ršg
 
G‘SµSoFeName
ĞcÚ¡ 
FeDesütÜ
* 
fe
 )

100 
¡ršg
 
	gÇme
 = 
ıp_£rviû
::
ToFeName
Ğ
fe
->
£rviû
(0)->
fuÎ_Çme
() );

101  "¥p_" + 
	gÇme
 + ".so";

104 
¡ršg
 
G‘PbHFeName
ĞcÚ¡ 
FeDesütÜ
* 
fe
 )

106 
¡ršg
 
	gÇme
 = 
ıp_£rviû
::
SŒPrÙo
(
fe
->
Çme
());

107  
	gÇme
 + ".pb.h";

110 
¡ršg
 
G‘PbObjFeName
ĞcÚ¡ 
FeDesütÜ
* 
fe
 )

112 
¡ršg
 
	gÇme
 = 
ıp_£rviû
::
SŒPrÙo
(
fe
->
Çme
());

113  
	gÇme
 + ".pb.o";

116 
PrštNameS·ûO³n
ĞcÚ¡ 
FeDesütÜ
* 
fe
,

117 
io
::
Prš‹r
& 
´š‹r
 )

119 
veùÜ
<
¡ršg
> 
Çme_¥aûs
 = 
ıp_£rviû
::
G‘NameS·û
(
fe
);

120  
ušt32_t
 
	gi
=0; i<
	gÇme_¥aûs
.
size
(); ++i )

122 
	g´š‹r
.
Pršt
(

125 "Çme¥aû", 
Çme_¥aûs
[
i
]

130 
PrštNameS·ûClo£
ĞcÚ¡ 
FeDesütÜ
* 
fe
,

131 
io
::
Prš‹r
& 
´š‹r
 )

133 
veùÜ
<
¡ršg
> 
Çme_¥aûs
 = 
ıp_£rviû
::
G‘NameS·û
(
fe
);

134  
ušt32_t
 
	gi
=0; i<
	gÇme_¥aûs
.
size
(); ++i )

136 
	g´š‹r
.
Pršt
(

142 
boŞ


143 
	gCµS”viûCodeG’”©Ü
::
G’”©e
(

144 cÚ¡ 
FeDesütÜ
* 
fe
, cÚ¡ 
¡ršg
& 
·¿m‘”
,

145 
G’”©ÜCÚ‹xt
* 
g’”©Ü_cÚ‹xt
, 
¡ršg
* 
”rÜ
 ) const

147 ifĞ!
	gıp_£rviû
::
HasG’”icS”viûs
(
fe
) )

149  
Œue
;

153 iàĞ
	gfe
->
£rviû_couÁ
()!= 1 )

155 
årštf
Ğ
¡d”r
, "service count must be 1\n" );

156  
	gçl£
;

160 
¡ršg
 
	g¥p_maš_cc_fe
 = 
G‘SµMašFeName
(
fe
);

161 
¡ršg
 
	gba£_def_h_fe
 = 
G‘Ba£DefHFeName
(
fe
);

162 
¡ršg
 
	g£rviû_h_fe
 = 
G‘S”viûHFeName
(
fe
);

163 
¡ršg
 
	g£rviû_cc_fe
 = 
G‘S”viûCCFeName
(
fe
);

164 
¡ršg
 
	gpb_h_fe
 = 
G‘PbHFeName
(
fe
);

165 
¡ršg
 
	g£rviû_­i_h_fe
 = 
G‘S”viûApiHFeName
(
fe
);

166 
¡ršg
 
	g£rviû_­i_cc_fe
 = 
G‘S”viûApiCCFeName
(
fe
);

168 
¡ršg
 
	gtmp_”r
 = "";

169 ifĞ!
G’”©eSµMašCC
(
¥p_maš_cc_fe
, 
g’”©Ü_cÚ‹xt
,

170 
fe
, 
tmp_”r
) )

172 *
	g”rÜ
 = "G’”©eSµMašƒ¼Ü:" + 
tmp_”r
;

173  
	gçl£
;

176 ifĞ!
G’”©eBa£DefH
(
ba£_def_h_fe
, 
g’”©Ü_cÚ‹xt
,

177 
fe
, 
tmp_”r
) )

179 *
	g”rÜ
 = "G’”©eBa£DefHƒ¼Ü:" + 
tmp_”r
;

180  
	gçl£
;

183 ifĞ!
G’”©eS”viûH
(
£rviû_h_fe
, 
g’”©Ü_cÚ‹xt
,

184 
fe
, 
tmp_”r
) )

186 *
	g”rÜ
 = "G’”©eS”viûHƒ¼Ü:" + 
tmp_”r
;

187  
	gçl£
;

190 ifĞ!
G’”©eS”viûCC
(
£rviû_cc_fe
, 
g’”©Ü_cÚ‹xt
,

191 
fe
, 
tmp_”r
) )

193 *
	g”rÜ
 = "G’”©eS”viûCCƒ¼Ü:" + 
tmp_”r
;

194  
	gçl£
;

197 ifĞ!
G’”©eS”viûApiH
(
£rviû_­i_h_fe
, 
g’”©Ü_cÚ‹xt
,

198 
fe
, 
tmp_”r
) )

200 *
	g”rÜ
 = "G’”©eS”viûApiHƒ¼Ü:" + 
tmp_”r
;

201  
	gçl£
;

204 ifĞ!
G’”©eS”viûApiCC
(
£rviû_­i_cc_fe
, 
g’”©Ü_cÚ‹xt
,

205 
fe
, 
tmp_”r
) )

207 *
	g”rÜ
 = "G’”©eS”viûApiCCƒ¼Ü:" + 
tmp_”r
;

208  
	gçl£
;

211 ifĞ!
G’”©eMakefe
("Makefe", 
g’”©Ü_cÚ‹xt
,

212 
fe
, 
tmp_”r
) )

214 *
	g”rÜ
 = "G’”©eMakef”rÜ:" + 
tmp_”r
;

215  
	gçl£
;

218  
	gŒue
;

221 
boŞ


222 
	gCµS”viûCodeG’”©Ü
::
G’”©eSµMašCC
(

223 cÚ¡ 
¡ršg
& 
cc_fe
, 
G’”©ÜCÚ‹xt
* 
g’”©Ü_cÚ‹xt
,

224 cÚ¡ 
FeDesütÜ
* 
fe
, 
¡ršg
& 
”r
 ) const

226 
	gscİed_±r
<
	gio
::
Z”oCİyOuutSŒ—m
> 
ouut
(

227 
g’”©Ü_cÚ‹xt
->
O³n
(
cc_fe
));

228 
	gio
::
Prš‹r
 
´š‹r
(
ouut
.
g‘
(), '$');

231 
	g´š‹r
.
Pršt
(

242 
	gi
 = 0; i < 
	gfe
->
d•’d’cy_couÁ
(); i++)

244 
	g´š‹r
.
Pršt
(

246 "d•’d’cy", 
G‘PbHFeName
(
fe
)

250 
	gm­
<
	g¡ršg
, sŒšg> 
	gv¬s_
;

251 
	gv¬s_
["ba£_def_h"] = 
G‘Ba£DefHFeName
(
fe
);

252 
	gv¬s_
["£rviû_h"] = 
G‘S”viûHFeName
(
fe
);

253 
	g´š‹r
.
Pršt
Ğ
v¬s_
,

260 
	g´š‹r
.
Pršt
(

266 cÚ¡ 
S”viûDesütÜ
* 
	g£rviû
 = 
fe
->
£rviû
(0);

267 
as£¹
Ğ
£rviû
 );

268 
	g´š‹r
.
Pršt
(

271 "£rviû_Çme", 
ıp_£rviû
::
ToCÏssName
(
£rviû
->
fuÎ_Çme
())

275 
	g´š‹r
.
Pršt
(

288 
	g´š‹r
.
Pršt
(

327 
	g´š‹r
.
Pršt
(

359 
	g´š‹r
.
Pršt
(

375 
	g´š‹r
.
Pršt
(

422  
št32_t
 
	gi
=0; i<
	g£rviû
->
m‘hod_couÁ
(); ++i )

424 
	gm­
<
	g¡ršg
, sŒšg> 
	gv¬s
;

425 
	gv¬s
["»q_şass"] = 
ıp_£rviû
::
G‘M‘hodInCÏss
(
£rviû
->
m‘hod
(
i
));

426 
	gv¬s
["»q_Çme"] = 
ıp_£rviû
::
G‘M‘hodReqName
(
£rviû
->
m‘hod
(
i
));

427 
	gv¬s
["»¥_şass"] = 
ıp_£rviû
::
G‘M‘hodOutCÏss
(
£rviû
->
m‘hod
(
i
));

428 
	gv¬s
["»¥_Çme"] = 
ıp_£rviû
::
G‘M‘hodRe¥Name
(
£rviû
->
m‘hod
(
i
));

429 
	g´š‹r
.
Pršt
(

430 
v¬s
,

435 
	g´š‹r
.
Pršt
("google::protobuf::Message*…cResp = NULL;\n");

437 
	g´š‹r
.
Pršt
(

441  
št32_t
 
	gi
=0; i<
	g£rviû
->
m‘hod_couÁ
(); ++i )

443 
	gm­
<
	g¡ršg
, sŒšg> 
	gv¬s
;

444 
	gv¬s
["m‘hod_cmd"] = 
ıp_£rviû
::
G‘M‘hodCmd
Ğ
£rviû
->
m‘hod
(
i
) );

445 
	gv¬s
["m‘hod_š_şass"] = 
ıp_£rviû
::
G‘M‘hodInCÏss
Ğ
£rviû
->
m‘hod
(
i
) );

446 
	gv¬s
["m‘hod_out_şass"] = 
ıp_£rviû
::
G‘M‘hodOutCÏss
Ğ
£rviû
->
m‘hod
(
i
) );

447 
	gv¬s
["m‘hod_Çme"] = 
£rviû
->
m‘hod
(
i
)->
Çme
();

448 
	gv¬s
["m‘hod_»q_Çme"] = 
ıp_£rviû
::
G‘M‘hodReqName
(
£rviû
->
m‘hod
(
i
));

449 
	gv¬s
["m‘hod_»¥_Çme"] = 
ıp_£rviû
::
G‘M‘hodRe¥Name
(
£rviû
->
m‘hod
(
i
));

450 
	g´š‹r
.
Pršt
Ğ
v¬s
,

462 
	g´š‹r
.
Pršt
(

470 
	g´š‹r
.
Pršt
(

487 
	g´š‹r
.
Pršt
(

494 
	g´š‹r
.
Pršt
(

537  
	gŒue
;

540 
boŞ


541 
	gCµS”viûCodeG’”©Ü
::
G’”©eBa£DefH
(

542 cÚ¡ 
¡ršg
& 
cc_fe
, 
G’”©ÜCÚ‹xt
* 
g’”©Ü_cÚ‹xt
,

543 cÚ¡ 
FeDesütÜ
* 
fe
, 
¡ršg
& 
”r
 ) const

545 
	gscİed_±r
<
	gio
::
Z”oCİyOuutSŒ—m
> 
ouut
(

546 
g’”©Ü_cÚ‹xt
->
O³n
(
cc_fe
));

547 
	gio
::
Prš‹r
 
´š‹r
(
ouut
.
g‘
(), '$');

549 cÚ¡ 
S”viûDesütÜ
* 
	g£rviû
 = 
fe
->
£rviû
(0);

551 
	g´š‹r
.
Pršt
(

555 "h_maüo", 
ıp_£rviû
::
G‘HMaüoName
(
cc_fe
)

559 
PrštNameS·ûO³n
Ğ
fe
, 
´š‹r
 );

560 
	g´š‹r
.
Pršt
("\n");

563 
	g´š‹r
.
Pršt
(

568  
	gi
=0; i<
	g£rviû
->
m‘hod_couÁ
(); ++i )

570 ifĞ
	gi
 =ğ
£rviû
->
m‘hod_couÁ
()-1 )

572 
´š‹r
.
Pršt
(

574 "cmd", 
ıp_£rviû
::
G‘M‘hodCmdNoNS
(
£rviû
->
m‘hod
(
i
))

579 
	g´š‹r
.
Pršt
(

581 "cmd", 
ıp_£rviû
::
G‘M‘hodCmdNoNS
(
£rviû
->
m‘hod
(
i
))

585 
	g´š‹r
.
Pršt
("};\n");

587 
	g´š‹r
.
Pršt
("\n");

590 
PrštNameS·ûClo£
Ğ
fe
, 
´š‹r
 );

592 
	g´š‹r
.
Pršt
(

594 "h_maüo", 
ıp_£rviû
::
G‘HMaüoName
(
cc_fe
)

597  
	gŒue
;

600 
boŞ


601 
	gCµS”viûCodeG’”©Ü
::
G’”©eS”viûH
(

602 cÚ¡ 
¡ršg
& 
cc_fe
, 
G’”©ÜCÚ‹xt
* 
g’”©Ü_cÚ‹xt
,

603 cÚ¡ 
FeDesütÜ
* 
fe
, 
¡ršg
& 
”r
 ) const

605 
	gscİed_±r
<
	gio
::
Z”oCİyOuutSŒ—m
> 
ouut
(

606 
g’”©Ü_cÚ‹xt
->
O³n
(
cc_fe
));

607 
	gio
::
Prš‹r
 
´š‹r
(
ouut
.
g‘
(), '$');

609 cÚ¡ 
S”viûDesütÜ
* 
	g£rviû
 = 
fe
->
£rviû
(0);

611 
	g´š‹r
.
Pršt
(

615 "h_maüo", 
ıp_£rviû
::
G‘HMaüoName
(
cc_fe
)

619 
	g´š‹r
.
Pršt
(

624 "pb_fe", 
G‘PbHFeName
(
fe
)

628 
	g£t
<
	g¡ršg
> 
	gty³_£t
;

629  
	gi
=0; i<
	g£rviû
->
m‘hod_couÁ
(); ++i )

631 
¡ršg
 
	gš_ty³
 = 
ıp_£rviû
::
G‘M‘hodInCÏss
(
£rviû
->
m‘hod
(
i
));

632 
¡ršg
 
	gout_ty³
 = 
ıp_£rviû
::
G‘M‘hodOutCÏss
(
£rviû
->
m‘hod
(
i
));

633 
	gty³_£t
.
š£¹
(
š_ty³
);

634 
	gty³_£t
.
š£¹
(
out_ty³
);

636  
	g£t
<
	g¡ršg
>::
™”©Ü
 
™”
=
ty³_£t
.
begš
();

637 
	g™”
!=
ty³_£t
.
’d
(); ++iter )

639 
	g´š‹r
.
Pršt
(

641 "şas¢ame", *
™”


644 
	g´š‹r
.
Pršt
("\n");

647 
PrštNameS·ûO³n
Ğ
fe
, 
´š‹r
 );

648 
	g´š‹r
.
Pršt
("\n");

651 
	g´š‹r
.
Pršt
(

663 "£rviû_Çme", 
£rviû
->
Çme
()

666  
	gi
=0; i<
	g£rviû
->
m‘hod_couÁ
(); ++i )

668 
	g´š‹r
.
Pršt
(

671 "m‘hod_deş¬e", 
ıp_£rviû
::
G‘M‘hodDeş¬e
(
£rviû
->
m‘hod
(
i
))

674 
	g´š‹r
.
Pršt
(

680 
	g´š‹r
.
Pršt
("\n");

681 
PrštNameS·ûClo£
Ğ
fe
, 
´š‹r
 );

683 
	g´š‹r
.
Pršt
(

685 "h_maüo", 
ıp_£rviû
::
G‘HMaüoName
(
cc_fe
)

688  
	gŒue
;

691 
boŞ


692 
	gCµS”viûCodeG’”©Ü
::
G’”©eS”viûCC
(

693 cÚ¡ 
¡ršg
& 
cc_fe
, 
G’”©ÜCÚ‹xt
* 
g’”©Ü_cÚ‹xt
,

694 cÚ¡ 
FeDesütÜ
* 
fe
, 
¡ršg
& 
”r
 ) const

696 
	gscİed_±r
<
	gio
::
Z”oCİyOuutSŒ—m
> 
ouut
(

697 
g’”©Ü_cÚ‹xt
->
O³n
(
cc_fe
));

698 
	gio
::
Prš‹r
 
´š‹r
(
ouut
.
g‘
(), '$');

700 cÚ¡ 
S”viûDesütÜ
* 
	g£rviû
 = 
fe
->
£rviû
(0);

703 
	g´š‹r
.
Pršt
(

705 "h—d", 
G‘S”viûHFeName
(
fe
)

707 
	g´š‹r
.
Pršt
("\n");

710 
PrštNameS·ûO³n
Ğ
fe
, 
´š‹r
 );

711 
	g´š‹r
.
Pršt
("\n");

714 
	g´š‹r
.
Pršt
(

735 "£rviû_Çme", 
£rviû
->
Çme
()

738 
	g´š‹r
.
Ind’t
();

739 
	g´š‹r
.
Ind’t
();

741  
	gi
=0; i<
	g£rviû
->
m‘hod_couÁ
(); ++i )

743 
	g´š‹r
.
Pršt
(

746 "m‘hod_imp", 
ıp_£rviû
::
G‘M‘hodImp
(
£rviû
->
m‘hod
(
i
))

751 
	g´š‹r
.
Outd’t
();

752 
	g´š‹r
.
Outd’t
();

753 
	g´š‹r
.
Pršt
("\n");

754 
PrštNameS·ûClo£
Ğ
fe
, 
´š‹r
 );

756  
	gŒue
;

760 
boŞ


761 
	gCµS”viûCodeG’”©Ü
::
G’”©eMakefe
(

762 cÚ¡ 
¡ršg
& 
cc_fe
, 
G’”©ÜCÚ‹xt
* 
g’”©Ü_cÚ‹xt
,

763 cÚ¡ 
FeDesütÜ
* 
fe
, 
¡ršg
& 
”r
 ) const

765 
	gscİed_±r
<
	gio
::
Z”oCİyOuutSŒ—m
> 
ouut
(

766 
g’”©Ü_cÚ‹xt
->
O³n
(
cc_fe
));

767 
	gio
::
Prš‹r
 
´š‹r
(
ouut
.
g‘
(), '!');

769 
	gm­
<
	g¡ršg
, sŒšg> 
	gv¬s
;

770 
	gv¬s
["¥p_so_Çme"] = 
G‘SµSoFeName
(
fe
);

771 
	gv¬s
["£rviû_obj_Çme"] = 
G‘S”viûObjFeName
(
fe
);

772 
	gv¬s
["pb_obj_Çme"] = 
G‘PbObjFeName
(
fe
);

773 
	gv¬s
["¥p_obj_Çme"] = 
G‘SµMašObjName
(
fe
);

774 
	gv¬s
["­i_obj_Çme"] = 
G‘S”viûApiObjFeName
(
fe
);

775 
	gv¬s
["­i_»Ëa£_Çme"] = 
G‘S”viûApiR–—£Name
(
fe
);

777 
	g´š‹r
.
Pršt
Ğ
v¬s
,

843  
	gŒue
;

846 
boŞ


847 
	gCµS”viûCodeG’”©Ü
::
G’”©eS”viûApiH
(

848 cÚ¡ 
¡ršg
& 
cc_fe
, 
G’”©ÜCÚ‹xt
* 
g’”©Ü_cÚ‹xt
,

849 cÚ¡ 
FeDesütÜ
* 
fe
, 
¡ršg
& 
”r
 ) const

851 
	gscİed_±r
<
	gio
::
Z”oCİyOuutSŒ—m
> 
ouut
(

852 
g’”©Ü_cÚ‹xt
->
O³n
(
cc_fe
));

853 
	gio
::
Prš‹r
 
´š‹r
(
ouut
.
g‘
(), '$');

855 cÚ¡ 
S”viûDesütÜ
* 
	g£rviû
 = 
fe
->
£rviû
(0);

857 
	g´š‹r
.
Pršt
(

861 "h_maüo", 
ıp_£rviû
::
G‘HMaüoName
(
cc_fe
)

865 
	g´š‹r
.
Pršt
(

869 "pb_fe", 
G‘PbHFeName
(
fe
)

873 
PrštNameS·ûO³n
Ğ
fe
, 
´š‹r
 );

874 
	g´š‹r
.
Pršt
("\n");

877 
	g´š‹r
.
Pršt
(

885 "£rviû_­i_Çme", 
ıp_£rviû
::
G‘S”viûApiCÏssName
(
£rviû
)

888  
	gi
=0; i<
	g£rviû
->
m‘hod_couÁ
(); ++i )

890 
	g´š‹r
.
Pršt
(

893 "m‘hod_deş¬e", 
ıp_£rviû
::
G‘M‘hodDeş¬e
(
£rviû
->
m‘hod
(
i
))

896 
	g´š‹r
.
Pršt
(

902 
	g´š‹r
.
Pršt
("\n");

903 
PrštNameS·ûClo£
Ğ
fe
, 
´š‹r
 );

905 
	g´š‹r
.
Pršt
(

907 "h_maüo", 
ıp_£rviû
::
G‘HMaüoName
(
cc_fe
)

910  
	gŒue
;

913 
boŞ


914 
	gCµS”viûCodeG’”©Ü
::
G’”©eS”viûApiCC
(

915 cÚ¡ 
¡ršg
& 
cc_fe
, 
G’”©ÜCÚ‹xt
* 
g’”©Ü_cÚ‹xt
,

916 cÚ¡ 
FeDesütÜ
* 
fe
, 
¡ršg
& 
”r
 ) const

918 
	gscİed_±r
<
	gio
::
Z”oCİyOuutSŒ—m
> 
ouut
(

919 
g’”©Ü_cÚ‹xt
->
O³n
(
cc_fe
));

920 
	gio
::
Prš‹r
 
´š‹r
(
ouut
.
g‘
(), '$');

922 cÚ¡ 
S”viûDesütÜ
* 
	g£rviû
 = 
fe
->
£rviû
(0);

925 
	gm­
<
	g¡ršg
, sŒšg> 
	gv¬s
;

926 
	gv¬s
["­i_h"] = 
G‘S”viûApiHFeName
(
fe
);

927 
	gv¬s
["ba£_def_h"] = 
G‘Ba£DefHFeName
(
fe
);

928 
	g´š‹r
.
Pršt
(

929 
v¬s
,

935 
	g´š‹r
.
Pršt
("\n");

938 
PrštNameS·ûO³n
Ğ
fe
, 
´š‹r
 );

939 
	g´š‹r
.
Pršt
("\n");

942 
	g´š‹r
.
Pršt
(

953 "£rviû_­i_Çme", 
ıp_£rviû
::
G‘S”viûApiCÏssName
(
£rviû
)

956 
	g´š‹r
.
Ind’t
();

957 
	g´š‹r
.
Ind’t
();

959  
	gi
=0; i<
	g£rviû
->
m‘hod_couÁ
(); ++i )

961 
	gm­
<
	g¡ršg
, sŒšg> 
	gv¬s
;

962 
	gv¬s
["£rviû_­i_Çme"] = 
ıp_£rviû
::
G‘S”viûApiCÏssName
(
£rviû
);

963 
	gv¬s
["m‘hod_Çme"] = 
£rviû
->
m‘hod
(
i
)->
Çme
();

964 
	gv¬s
["m‘hod_š_şass"] = 
ıp_£rviû
::
G‘M‘hodInCÏss
(
£rviû
->
m‘hod
(
i
));

965 
	gv¬s
["m‘hod_out_şass"] = 
ıp_£rviû
::
G‘M‘hodOutCÏss
(
£rviû
->
m‘hod
(
i
));

966 
	gv¬s
["m‘hod_cmd"] = 
ıp_£rviû
::
G‘M‘hodCmd
(
£rviû
->
m‘hod
(
i
));

967 
	g´š‹r
.
Pršt
(

968 
v¬s
,

985 
	g´š‹r
.
Outd’t
();

986 
	g´š‹r
.
Outd’t
();

987 
	g´š‹r
.
Pršt
("\n");

988 
PrštNameS·ûClo£
Ğ
fe
, 
´š‹r
 );

990  
	gŒue
;

	@protobuf_cpp_service/src/cpp_service_generator.h

8 #iâdeà
CPP_SERVICE_GENERATOR_H_


9 
	#CPP_SERVICE_GENERATOR_H_


	)

11 
	~<m­
>

12 
	~<¡ršg
>

13 
	~<googË/´Ùobuf/io/´š‹r.h
>

14 
	~<googË/´Ùobuf/comp”/code_g’”©Ü.h
>

16 
usšg
 
Çme¥aû
 
	g¡d
;

18 
Çme¥aû
 
	ggoogË
 {

19 
Çme¥aû
 
	g´Ùobuf
 {

20 
Çme¥aû
 
	gcomp”
 {

22 şas 
	cCµS”viûCodeG’”©Ü
 : 
public
 
CodeG’”©Ü


24 
public
:

25 
CµS”viûCodeG’”©Ü
(){}

26 
vœtu®
 ~
CµS”viûCodeG’”©Ü
(){}

28 
vœtu®
 
boŞ
 
G’”©e
(cÚ¡ 
FeDesütÜ
* 
fe
,

29 cÚ¡ 
¡ršg
& 
·¿m‘”
,

30 
G’”©ÜCÚ‹xt
* 
g’”©Ü_cÚ‹xt
,

31 
¡ršg
* 
”rÜ
) const;

33 
	g´iv©e
:

35 
boŞ
 
G’”©eSµMašCC
(

36 cÚ¡ 
¡ršg
& 
cc_fe
, 
G’”©ÜCÚ‹xt
* 
g’”©Ü_cÚ‹xt
,

37 cÚ¡ 
FeDesütÜ
* 
´Ùo_fe
, 
¡ršg
& 
”r
 ) const;

39 
boŞ
 
G’”©eBa£DefH
(

40 cÚ¡ 
¡ršg
& 
cc_fe
, 
G’”©ÜCÚ‹xt
* 
g’”©Ü_cÚ‹xt
,

41 cÚ¡ 
FeDesütÜ
* 
´Ùo_fe
, 
¡ršg
& 
”r
 ) const;

43 
boŞ
 
G’”©eS”viûH
(

44 cÚ¡ 
¡ršg
& 
cc_fe
, 
G’”©ÜCÚ‹xt
* 
g’”©Ü_cÚ‹xt
,

45 cÚ¡ 
FeDesütÜ
* 
´Ùo_fe
, 
¡ršg
& 
”r
 ) const;

47 
boŞ
 
G’”©eS”viûCC
(

48 cÚ¡ 
¡ršg
& 
cc_fe
, 
G’”©ÜCÚ‹xt
* 
g’”©Ü_cÚ‹xt
,

49 cÚ¡ 
FeDesütÜ
* 
´Ùo_fe
, 
¡ršg
& 
”r
 ) const;

51 
boŞ
 
G’”©eMakefe
(

52 cÚ¡ 
¡ršg
& 
cc_fe
, 
G’”©ÜCÚ‹xt
* 
g’”©Ü_cÚ‹xt
,

53 cÚ¡ 
FeDesütÜ
* 
´Ùo_fe
, 
¡ršg
& 
”r
 ) const;

55 
boŞ
 
G’”©eS”viûApiH
(

56 cÚ¡ 
¡ršg
& 
cc_fe
, 
G’”©ÜCÚ‹xt
* 
g’”©Ü_cÚ‹xt
,

57 cÚ¡ 
FeDesütÜ
* 
´Ùo_fe
, 
¡ršg
& 
”r
 ) const;

59 
boŞ
 
G’”©eS”viûApiCC
(

60 cÚ¡ 
¡ršg
& 
cc_fe
, 
G’”©ÜCÚ‹xt
* 
g’”©Ü_cÚ‹xt
,

61 cÚ¡ 
FeDesütÜ
* 
´Ùo_fe
, 
¡ršg
& 
”r
 ) const;

	@protobuf_cpp_service/src/cpp_service_helpers.cc

35 
	~<¡dio.h
>

36 
	~<lim™s
>

37 
	~<veùÜ
>

38 
	~"ıp_£rviû_h–³rs.h
"

41 
Çme¥aû
 
	ggoogË
 {

42 
Çme¥aû
 
	g´Ùobuf
 {

43 
Çme¥aû
 
	gcomp”
 {

44 
Çme¥aû
 
	gıp_£rviû
 {

47 
¡ršg
 
SŒPrÙo
(cÚ¡ sŒšg& 
f’ame
) {

48 ià(
HasSuffixSŒšg
(
f’ame
, ".protodevel")) {

49  
SŒSuffixSŒšg
(
f’ame
, ".protodevel");

51  
SŒSuffixSŒšg
(
f’ame
, ".proto");

55 
ušt32_t
 
SŒšgR•Ïû
Ğ
¡d
::
¡ršg
& 
ss
, cÚ¡ std::¡ršg& 
¤c
,

56 cÚ¡ 
¡d
::
¡ršg
& 
d¡
 )

58 
ušt32_t
 
»¶aû_couÁ
 = 0;

59 
	g¡d
::
¡ršg
::
size_ty³
 
pos
 = 0;

60 
	g¡d
::
¡ršg
::
size_ty³
 
¤ş’
 = 
¤c
.
size
();

61 
	g¡d
::
¡ršg
::
size_ty³
 
d¡Ën
 = 
d¡
.
size
();

62  (
	gpos
=
ss
.
fšd
(
¤c
, 
pos
)è!ğ
¡d
::
¡ršg
::
Åos
)

64 ++
»¶aû_couÁ
;

65 
	gss
.
»¶aû
(
pos
, 
¤ş’
, 
d¡
);

66 
	gpos
 +ğ
d¡Ën
;

68  
	g»¶aû_couÁ
;

71 
SŒšgToUµ”
Ğ
¡d
::
¡ršg
& 
ss
 )

73 
ŒªsfÜm
 ( 
ss
.
begš
(),ss.
’d
(), ss.begin(),

74 ::
touµ”
 );

77 
SŒšgS¶™
ĞcÚ¡ 
¡d
::
¡ršg
& 
¡r
,

78 cÚ¡ 
¡d
::
¡ršg
& 
d–im
,

79 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
™ems
 )

81 
™ems
.
ş—r
();

83 
	g¡d
::
¡ršg
 
sEËm’t
;

84 
	g¡d
::
¡ršg
::
size_ty³
 
bpos
 = 0;

85 
	g¡d
::
¡ršg
::
size_ty³
 
•os
 = 0;

86 
	g¡d
::
¡ršg
::
size_ty³
 
Æ’
 = 
d–im
.
size
();

87 (
	g•os
=
¡r
.
fšd
(
d–im
, 
•os
)è!ğ
¡d
::
¡ršg
::
Åos
)

89 
sEËm’t
 = 
¡r
.
sub¡r
(
bpos
, 
•os
-bpos);

91 if(!
	gsEËm’t
.
em±y
())

93 
	g™ems
.
push_back
(
sEËm’t
);

95 
	g•os
 +ğ
Æ’
;

96 
	gbpos
 = 
•os
;

99 
	gsEËm’t
 = 
¡r
.
sub¡r
(
bpos
, sŒ.
size
()-bpos);

100 if(!
	gsEËm’t
.
em±y
())

102 
	g™ems
.
push_back
(
sEËm’t
);

106 
¡ršg
 
ToCÏssName
Ğ¡ršg 
fuÎ_Çme
 )

108 
	gıp_£rviû
::
SŒšgR•Ïû
Ğ
fuÎ_Çme
, ".", "::" );

109  
	gfuÎ_Çme
;

112 
¡ršg
 
ToFeName
Ğ¡ršg 
fuÎ_Çme
 )

114 
	gıp_£rviû
::
SŒšgR•Ïû
Ğ
fuÎ_Çme
, ".", "_" );

115  
	gfuÎ_Çme
;

118 
¡ršg
 
G‘HMaüoName
Ğ¡ršg 
fe_Çme
 )

120 
	gıp_£rviû
::
SŒšgR•Ïû
Ğ
fe_Çme
, ".", "_" );

121 
	gıp_£rviû
::
SŒšgToUµ”
Ğ
fe_Çme
 );

122  
	gfe_Çme
;

125 
	gveùÜ
<
	g¡ršg
> 
G‘NameS·û
ĞcÚ¡ 
FeDesütÜ
* 
fe
 )

127 
	gveùÜ
<
	g¡ršg
> 
	g»t
;

128 
SŒšgS¶™
Ğ
fe
->
·ckage
(), ".", 
»t
 );

129  
	g»t
;

132 
¡ršg
 
G‘M‘hodName¥aû
ĞcÚ¡ 
M‘hodDesütÜ
* 
m‘hod
 )

134  
ToCÏssName
Ğ
m‘hod
->
£rviû
()->
fe
()->
·ckage
() );

138 
¡ršg
 
G‘M‘hodCmd
ĞcÚ¡ 
M‘hodDesütÜ
* 
m‘hod
 )

140 
¡ršg
 
	gÇme_¥aû
 = 
G‘M‘hodName¥aû
Ğ
m‘hod
 );

141 ifĞ
	gÇme_¥aû
.
size
() > 0 )

143  
	gÇme_¥aû
 + "::" + 
G‘M‘hodCmdNoNS
(
m‘hod
);

147  
G‘M‘hodCmdNoNS
(
m‘hod
);

151 
¡ršg
 
G‘M‘hodReqName
ĞcÚ¡ 
M‘hodDesütÜ
* 
m‘hod
 )

153  "cReq_" + 
	gm‘hod
->
Çme
();

156 
¡ršg
 
G‘M‘hodRe¥Name
ĞcÚ¡ 
M‘hodDesütÜ
* 
m‘hod
 )

158  "cRe¥_" + 
	gm‘hod
->
Çme
();

161 
¡ršg
 
G‘M‘hodCmdNoNS
ĞcÚ¡ 
M‘hodDesütÜ
* 
m‘hod
 )

163 
¡ršg
 
	gm‘hod_Çme
 = 
m‘hod
->
Çme
();

164 
SŒšgToUµ”
Ğ
m‘hod_Çme
 );

165  
	gm‘hod_Çme
 + "_CMD";

168 
¡ršg
 
G‘M‘hodInCÏss
ĞcÚ¡ 
M‘hodDesütÜ
* 
m‘hod
 )

170  
ToCÏssName
Ğ
m‘hod
->
šput_ty³
()->
fuÎ_Çme
() );

173 
¡ršg
 
G‘M‘hodOutCÏss
ĞcÚ¡ 
M‘hodDesütÜ
* 
m‘hod
 )

175  
ToCÏssName
Ğ
m‘hod
->
ouut_ty³
()->
fuÎ_Çme
() );

178 
¡ršg
 
G‘M‘hodDeş¬e
ĞcÚ¡ 
M‘hodDesütÜ
* 
m‘hod
 )

180  
¡ršg
("št32_ˆ"è+ 
	gm‘hod
->
Çme
() + "( const " +

181 
G‘M‘hodInCÏss
(
m‘hod
) + "&„eq,\n" +

182 " " + 
G‘M‘hodOutCÏss
(
m‘hod
) + "&„esp )";

185 
¡ršg
 
G‘M‘hodImp
ĞcÚ¡ 
M‘hodDesütÜ
* 
m‘hod
 )

187  
¡ršg
("št32_ˆ"è+ 
	gm‘hod
->
£rviû
()->
Çme
() + "::" +

188 
	gm‘hod
->
Çme
() + "( const " +

189 
G‘M‘hodInCÏss
(
m‘hod
) + "&„eq,\n" +

190 " " + 
G‘M‘hodOutCÏss
(
m‘hod
) + "&„esp )\n" +

196 
¡ršg
 
G‘S”viûApiCÏssName
ĞcÚ¡ 
S”viûDesütÜ
* 
£rviû
 )

198  
	g£rviû
->
Çme
() + "Api";

	@protobuf_cpp_service/src/cpp_service_helpers.h

35 #iâdeà
GOOGLE_PROTOBUF_COMPILER_CPP_HELPERS_H__


36 
	#GOOGLE_PROTOBUF_COMPILER_CPP_HELPERS_H__


	)

38 
	~<¡ršg
>

39 
	~<veùÜ
>

40 
	~<googË/´Ùobuf/desütÜ.h
>

41 
	~<googË/´Ùobuf/desütÜ.pb.h
>

43 
Çme¥aû
 
	ggoogË
 {

44 
Çme¥aû
 
	g´Ùobuf
 {

45 
Çme¥aû
 
	gcomp”
 {

46 
Çme¥aû
 
	gıp_£rviû
 {

58 
šlše
 
boŞ
 
ascii_i§Êum
(
c
) {

59  ('a' <ğ
c
 && c <= 'z') ||

60 ('A' <ğ
c
 && c <= 'Z') ||

61 ('0' <ğ
c
 && c <= '9');

64 
šlše
 
boŞ
 
ascii_isdig™
(
c
) {

65  ('0' <ğ
c
 && c <= '9');

76 
šlše
 
boŞ
 
HasP»fixSŒšg
(cÚ¡ 
¡ršg
& 
¡r
,

77 cÚ¡ 
¡ršg
& 
´efix
) {

78  
	g¡r
.
size
(è>ğ
´efix
.size() &&

79 
¡r
.
com·»
(0, 
´efix
.
size
(),…refix) == 0;

82 
šlše
 
¡ršg
 
SŒP»fixSŒšg
(cÚ¡ sŒšg& 
¡r
, cÚ¡ sŒšg& 
´efix
) {

83 ià(
HasP»fixSŒšg
(
¡r
, 
´efix
)) {

84  
	g¡r
.
sub¡r
(
´efix
.
size
());

86  
	g¡r
;

98 
šlše
 
boŞ
 
HasSuffixSŒšg
(cÚ¡ 
¡ršg
& 
¡r
,

99 cÚ¡ 
¡ršg
& 
suffix
) {

100  
	g¡r
.
size
(è>ğ
suffix
.size() &&

101 
¡r
.
com·»
(¡r.
size
(è- 
suffix
.size(), suffix.size(), suffix) == 0;

104 
šlše
 
¡ršg
 
SŒSuffixSŒšg
(cÚ¡ sŒšg& 
¡r
, cÚ¡ sŒšg& 
suffix
) {

105 ià(
HasSuffixSŒšg
(
¡r
, 
suffix
)) {

106  
	g¡r
.
sub¡r
(0, 
¡r
.
size
(è- 
suffix
.size());

108  
	g¡r
;

113 
¡ršg
 
SŒPrÙo
(cÚ¡ sŒšg& 
f’ame
);

116 
šlše
 
boŞ
 
HasUnknownF›lds
(cÚ¡ 
FeDesütÜ
 *
fe
) {

117  
	gfe
->
İtiÚs
().
İtimize_fÜ
(è!ğ
FeO±iÚs
::
LITE_RUNTIME
;

122 
šlše
 
boŞ
 
HasG’”©edM‘hods
(cÚ¡ 
FeDesütÜ
 *
fe
) {

123  
	gfe
->
İtiÚs
().
İtimize_fÜ
(è!ğ
FeO±iÚs
::
CODE_SIZE
;

127 
šlše
 
boŞ
 
HasDesütÜM‘hods
(cÚ¡ 
FeDesütÜ
 *
fe
) {

128  
	gfe
->
İtiÚs
().
İtimize_fÜ
(è!ğ
FeO±iÚs
::
LITE_RUNTIME
;

132 
šlše
 
boŞ
 
HasG’”icS”viûs
(cÚ¡ 
FeDesütÜ
 *
fe
) {

133  
	gfe
->
£rviû_couÁ
() > 0 &&

134 
	gfe
->
İtiÚs
().
İtimize_fÜ
(è!ğ
FeO±iÚs
::
LITE_RUNTIME
;

138 
šlše
 
boŞ
 
HasUtf8V”ifiÿtiÚ
(cÚ¡ 
FeDesütÜ
* 
fe
) {

139  
	gfe
->
İtiÚs
().
İtimize_fÜ
(è!ğ
FeO±iÚs
::
LITE_RUNTIME
;

145 
šlše
 
boŞ
 
HasFa¡A¼ayS”Ÿliz©iÚ
(cÚ¡ 
FeDesütÜ
* 
fe
) {

146  
	gfe
->
İtiÚs
().
İtimize_fÜ
(è=ğ
FeO±iÚs
::
SPEED
;

149 
ušt32_t
 
SŒšgR•Ïû
Ğ
¡d
::
¡ršg
& 
ss
, cÚ¡ std::¡ršg& 
¤c
,

150 cÚ¡ 
¡d
::
¡ršg
& 
d¡
 );

151 
SŒšgToUµ”
Ğ
¡d
::
¡ršg
& 
ss
 );

152 
¡ršg
 
ToCÏssName
Ğ¡ršg 
fuÎ_Çme
 );

153 
¡ršg
 
ToFeName
Ğ¡ršg 
fuÎ_Çme
 );

154 
¡ršg
 
G‘M‘hodName¥aû
ĞcÚ¡ 
M‘hodDesütÜ
* 
m‘hod
 );

155 
¡ršg
 
G‘M‘hodCmd
ĞcÚ¡ 
M‘hodDesütÜ
* 
m‘hod
 );

156 
¡ršg
 
G‘M‘hodCmdNoNS
ĞcÚ¡ 
M‘hodDesütÜ
* 
m‘hod
 );

157 
¡ršg
 
G‘M‘hodInCÏss
ĞcÚ¡ 
M‘hodDesütÜ
* 
m‘hod
 );

158 
¡ršg
 
G‘M‘hodOutCÏss
ĞcÚ¡ 
M‘hodDesütÜ
* 
m‘hod
 );

159 
¡ršg
 
G‘M‘hodReqName
ĞcÚ¡ 
M‘hodDesütÜ
* 
m‘hod
 );

160 
¡ršg
 
G‘M‘hodRe¥Name
ĞcÚ¡ 
M‘hodDesütÜ
* 
m‘hod
 );

161 
¡ršg
 
G‘HMaüoName
Ğ¡ršg 
fe_Çme
 );

162 
	gveùÜ
<
	g¡ršg
> 
G‘NameS·û
ĞcÚ¡ 
FeDesütÜ
* 
fe
 );

163 
¡ršg
 
G‘M‘hodDeş¬e
ĞcÚ¡ 
M‘hodDesütÜ
* 
m‘hod
 );

164 
¡ršg
 
G‘M‘hodImp
ĞcÚ¡ 
M‘hodDesütÜ
* 
m‘hod
 );

165 
¡ršg
 
G‘S”viûApiCÏssName
ĞcÚ¡ 
S”viûDesütÜ
* 
£rviû
 );

	@
1
.
0
118
9026
protobuf_cpp_service/output_example/example_test.cc
protobuf_cpp_service/output_example/spp_vrpc_example_main.cc
protobuf_cpp_service/output_example/spp_vrpc_example_main_ex.cc
protobuf_cpp_service/output_example/vrpc_example_def.h
protobuf_cpp_service/output_example/vrpc_example_example_service.cc
protobuf_cpp_service/output_example/vrpc_example_example_service.h
protobuf_cpp_service/output_example/vrpc_example_example_service_api.cc
protobuf_cpp_service/output_example/vrpc_example_example_service_api.h
protobuf_cpp_service/pkg_resource/cpp/include/clib/clib_sock_l5.h
protobuf_cpp_service/pkg_resource/cpp/include/clib/clib_timer.h
protobuf_cpp_service/pkg_resource/cpp/include/l5/qos_client.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/GetExtInfo.cpp
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/GetExtInfo.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/GetInfo.cpp
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/GetInfo.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/GetState.cpp
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/GetState.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/GetState2.cpp
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/GetState2.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/UpdateData.cpp
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/UpdateData.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/UpdateState.cpp
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/UpdateState.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/echo_example.cpp
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/msg.cpp
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/msg.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/service.cpp
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/ActionInfo.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/ActionSet.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/AntiParalActionInfo.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/AsyncFrame.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/CommDef.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/IAction.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/IState.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/MsgBase.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/NonStateActionInfo.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/PtrMgr.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/SEXInterface.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/StateActionInfo.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/asyn_api.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/atomic.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/atomic_asm.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/atomic_asm8.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/atomic_gcc.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/atomic_gcc8.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/list.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/myatomic_gcc8.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/serverbase.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/spp_async_interface.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/spp_version.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/tcommu.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/tlog.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/tprocmon.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/tstat.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/spp_incl/tstat_policy.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_32/sppincl.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/GetExtInfo.cpp
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/GetExtInfo.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/GetInfo.cpp
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/GetInfo.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/GetState.cpp
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/GetState.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/GetState2.cpp
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/GetState2.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/UpdateData.cpp
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/UpdateData.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/UpdateState.cpp
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/UpdateState.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/echo_example.cpp
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/msg.cpp
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/msg.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/service.cpp
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/ActionInfo.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/ActionSet.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/AntiParalActionInfo.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/AsyncFrame.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/CommDef.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/IAction.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/IState.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/MsgBase.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/NonStateActionInfo.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/PtrMgr.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/SEXInterface.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/StateActionInfo.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/asyn_api.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/atomic.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/atomic_asm.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/atomic_asm8.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/atomic_gcc.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/atomic_gcc8.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/list.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/myatomic_gcc8.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/serverbase.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/spp_async_interface.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/spp_version.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/tcommu.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/tlog.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/tprocmon.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/tstat.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/spp_incl/tstat_policy.h
protobuf_cpp_service/pkg_resource/cpp/include/spp/spp_2.7.1_64/sppincl.h
protobuf_cpp_service/pkg_resource/cpp/src/vrpc/base/CApiBase.cc
protobuf_cpp_service/pkg_resource/cpp/src/vrpc/base/CApiBase.h
protobuf_cpp_service/pkg_resource/cpp/src/vrpc/base/CObject.cc
protobuf_cpp_service/pkg_resource/cpp/src/vrpc/base/CObject.h
protobuf_cpp_service/pkg_resource/cpp/src/vrpc/base/CService.h
protobuf_cpp_service/pkg_resource/cpp/src/vrpc/base/error_def.h
protobuf_cpp_service/pkg_resource/cpp/src/vrpc/base/mem_tools.h
protobuf_cpp_service/pkg_resource/cpp/src/vrpc/ipc/CSysVShm.cc
protobuf_cpp_service/pkg_resource/cpp/src/vrpc/ipc/CSysVShm.h
protobuf_cpp_service/pkg_resource/cpp/src/vrpc/protocol/protocol.h
protobuf_cpp_service/pkg_resource/cpp/src/vrpc/protocol/vrpc_head.pb.cc
protobuf_cpp_service/pkg_resource/cpp/src/vrpc/protocol/vrpc_head.pb.h
protobuf_cpp_service/src/cpp_service.cc
protobuf_cpp_service/src/cpp_service_generator.cc
protobuf_cpp_service/src/cpp_service_generator.h
protobuf_cpp_service/src/cpp_service_helpers.cc
protobuf_cpp_service/src/cpp_service_helpers.h
